"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4286],{34714:(e,t,n)=>{function r(e){switch(e){case"u8":return 1;case"u16":return 2;case"u32":return 4;case"i8":return 1;case"i16":return 2;case"i32":case"f32":return 4;case"f64":return 8;default:return}}function i(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function s(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function o(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}n.d(t,{n1:()=>r,U:()=>s,B3:()=>i,Op:()=>o}),n(32780)},965:(e,t,n)=>{n.d(t,{d:()=>i});var r=n(19776);function i(e,t,n){var i;const u=e.byteLength/(4*t),l=new Uint32Array(e,0,u*t);let f=new Uint32Array(u);const d=null!=(i=null==n?void 0:n.minReduction)?i:0,h=(null==n?void 0:n.originalIndices)||null,p=h?h.length:0,g=(null==n?void 0:n.componentOffsets)||null;let m=0;if(g)for(let e=0;e<g.length-1;e++){const t=g[e+1]-g[e];t>m&&(m=t)}else m=u;const w=Math.floor(1.1*m)+1;(null==a||a.length<2*w)&&(a=new Uint32Array((0,r.Sf)(2*w)));for(let e=0;e<2*w;e++)a[e]=0;let y=0;const v=!!g&&!!h,A=v?p:u,b=v?new Uint32Array(p):null,F=1.96;let N=0!==d?Math.ceil(4*F*F/(d*d)*d*(1-d)):A,I=1,U=g?g[1]:A;for(let e=0;e<A;e++){if(e===N){const t=1-y/e;if(t+F*Math.sqrt(t*(1-t)/e)<d)return null;N*=2}if(e===U){for(let e=0;e<2*w;e++)a[e]=0;if(h)for(let e=g[I-1];e<g[I];e++)b[e]=f[h[e]];U=g[++I]}const n=v?h[e]:e,r=n*t,i=c(l,r,t);let o=i%w,u=y;for(;0!==a[2*o+1];){if(a[2*o]===i){const e=a[2*o+1]-1;if(s(l,r,e*t,t)){u=f[e];break}}o++,o>=w&&(o-=w)}u===y&&(a[2*o]=i,a[2*o+1]=n+1,y++),f[n]=u}if(0!==d&&1-y/u<d)return null;if(v){for(let e=g[I-1];e<b.length;e++)b[e]=f[h[e]];f=b}const E=new Uint32Array(t*y);y=0;for(let e=0;e<A;e++)f[e]===y&&(o(l,(v?h[e]:e)*t,E,y*t,t),y++);if(h&&!v){const e=new Uint32Array(p);for(let t=0;t<e.length;t++)e[t]=f[h[t]];f=e}return{buffer:E.buffer,indices:f,uniqueCount:y}}function s(e,t,n,r){for(let i=0;i<r;i++)if(e[t+i]!==e[n+i])return!1;return!0}function o(e,t,n,r,i){for(let s=0;s<i;s++)n[r+s]=e[t+s]}function c(e,t,n){let r=0;for(let i=0;i<n;i++)r=e[t+i]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let a=null},86363:(e,t,n)=>{n.d(t,{U$:()=>c});var r=n(38747),i=n(34714);class s{constructor(e,t){this.layout=e,this.buffer="number"==typeof t?new ArrayBuffer(t*e.stride):t;for(const t of e.fieldNames){const n=e.fields.get(t);this[t]=new n.constructor(this.buffer,n.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){const n=this[e];return n&&n.elementCount===t.ElementCount&&n.elementType===t.ElementType?n:null}slice(e,t){return new s(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e,t,n,r){const i=this.stride;if(i%4==0){const s=new Uint32Array(e.buffer,t*i,r*i/4);new Uint32Array(this.buffer,n*i,r*i/4).set(s)}else{const s=new Uint8Array(e.buffer,t*i,r*i);new Uint8Array(this.buffer,n*i,r*i).set(s)}}}class o{constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}vec2f(e,t){return this.appendField(e,r.Eu,t),this}vec2f64(e,t){return this.appendField(e,r.q6,t),this}vec3f(e,t){return this.appendField(e,r.ct,t),this}vec3f64(e,t){return this.appendField(e,r.fP,t),this}vec4f(e,t){return this.appendField(e,r.ek,t),this}vec4f64(e,t){return this.appendField(e,r.Cd,t),this}mat3f(e,t){return this.appendField(e,r.gK,t),this}mat3f64(e,t){return this.appendField(e,r.ey,t),this}mat4f(e,t){return this.appendField(e,r.bj,t),this}mat4f64(e,t){return this.appendField(e,r.O1,t),this}vec4u8(e,t){return this.appendField(e,r.mc,t),this}f32(e,t){return this.appendField(e,r.ly,t),this}f64(e,t){return this.appendField(e,r.oS,t),this}u8(e,t){return this.appendField(e,r.D_,t),this}u16(e,t){return this.appendField(e,r.av,t),this}i8(e,t){return this.appendField(e,r.Hz,t),this}vec2i8(e,t){return this.appendField(e,r.Vs,t),this}vec2i16(e,t){return this.appendField(e,r.or,t),this}vec2u8(e,t){return this.appendField(e,r.xA,t),this}vec4u16(e,t){return this.appendField(e,r.v6,t),this}u32(e,t){return this.appendField(e,r.Nu,t),this}appendField(e,t,n){const r=t.ElementCount*(0,i.n1)(t.ElementType),s=this.stride;this.fields.set(e,{size:r,constructor:t,offset:s,optional:n}),this.stride+=r,this.fieldNames.push(e)}alignTo(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this}hasField(e){return this.fieldNames.indexOf(e)>=0}createBuffer(e){return new s(this,e)}createView(e){return new s(this,e)}clone(){const e=new o;return e.stride=this.stride,e.fields=new Map,this.fields.forEach(((t,n)=>e.fields.set(n,t))),e.fieldNames=this.fieldNames.slice(),e.BufferType=this.BufferType,e}}function c(){return new o}},74286:(e,t,n)=>{n.r(t),n.d(t,{work:()=>j,wrappedWork:()=>_});var r=n(965);function i(e,t,n){const r=t/3,i=new Uint32Array(n+1),s=new Uint32Array(n+1),o=(e,t)=>{e<t?i[e+1]++:s[t+1]++};for(let t=0;t<r;t++){const n=e[3*t],r=e[3*t+1],i=e[3*t+2];o(n,r),o(r,i),o(i,n)}let c=0,a=0;for(let e=0;e<n;e++){const t=i[e+1],n=s[e+1];i[e+1]=c,s[e+1]=a,c+=t,a+=n}const u=new Uint32Array(6*r),l=i[n],f=(e,t,n)=>{if(e<t){const r=i[e+1]++;u[2*r]=t,u[2*r+1]=n}else{const r=s[t+1]++;u[2*l+2*r]=e,u[2*l+2*r+1]=n}};for(let t=0;t<r;t++){const n=e[3*t],r=e[3*t+1],i=e[3*t+2];f(n,r,t),f(r,i,t),f(i,n,t)}const d=(e,t)=>{const n=2*e,r=t-e;for(let e=1;e<r;e++){const t=u[n+2*e],r=u[n+2*e+1];let i=e-1;for(;i>=0&&u[n+2*i]>t;i--)u[n+2*i+2]=u[n+2*i],u[n+2*i+3]=u[n+2*i+1];u[n+2*i+2]=t,u[n+2*i+3]=r}};for(let e=0;e<n;e++)d(i[e],i[e+1]),d(l+s[e],l+s[e+1]);const h=new Int32Array(3*r),p=(t,n)=>t===e[3*n]?0:t===e[3*n+1]?1:t===e[3*n+2]?2:-1,g=(e,t)=>{const n=p(e,t);h[3*t+n]=-1},m=(e,t,n,r)=>{const i=p(e,t);h[3*t+i]=r;const s=p(n,r);h[3*r+s]=t};for(let e=0;e<n;e++){let t=i[e];const n=i[e+1];let r=s[e];const o=s[e+1];for(;t<n&&r<o;){const n=u[2*t],i=u[2*l+2*r];n===i?(m(e,u[2*t+1],i,u[2*l+2*r+1]),t++,r++):n<i?(g(e,u[2*t+1]),t++):(g(i,u[2*l+2*r+1]),r++)}for(;t<n;)g(e,u[2*t+1]),t++;for(;r<o;)g(u[2*l+2*r],u[2*l+2*r+1]),r++}return h}var s=n(38747),o=n(86363);function c(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:a(e.layout)}}function a(e){const t=new Array;return e.fields.forEach(((e,n)=>{const r={...e,constructor:l(e.constructor)};t.push([n,r])})),{stride:e.stride,fields:t,fieldNames:e.fieldNames}}const u=[s.ly,s.Eu,s.ct,s.ek,s.gK,s.bj,s.oS,s.q6,s.fP,s.Cd,s.ey,s.O1,s.D_,s.xA,s.ne,s.mc,s.av,s.TS,s.mw,s.v6,s.Nu,s.qt,s.G5,s.hu,s.Hz,s.Vs,s.P_,s.ir,s.o7,s.or,s.n1,s.zO,s.Jj,s.wA,s.PP,s.TN];function l(e){return`${e.ElementType}_${e.ElementCount}`}const f=new Map;function d(e,t=0){const n=e.stride;return e.fieldNames.filter((t=>{const n=e.fields.get(t).optional;return!(n&&n.glPadding)})).map((r=>{const i=e.fields.get(r),s=i.constructor.ElementCount,o=h(i.constructor.ElementType),c=i.offset,a=!(!i.optional||!i.optional.glNormalized);return{name:r,stride:n,count:s,type:o,offset:c,normalized:a,divisor:t}}))}function h(e){const t=p[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}u.forEach((e=>f.set(l(e),e)));const p={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126},g=(0,o.U$)().vec3f("position").u16("componentIndex").u16("u16padding"),m=(d((0,o.U$)().vec2u8("sideness")),(0,o.U$)().vec3f("position0").vec3f("position1").u16("componentIndex").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).u8("u8padding",{glPadding:!0}).u16("u16padding",{glPadding:!0})),w=m.clone().vec3f("normal"),y=m.clone().vec3f("normalA").vec3f("normalB");new Map([["position0",0],["position1",1],["componentIndex",2],["variantOffset",3],["variantStroke",4],["variantExtension",5],["normal",6],["normalA",6],["normalB",7],["sideness",8]]);var v=n(28675),A=n(55545),b=n(86591);class F{updateSettings(e){this.settings=e,this.edgeHashFunction=e.reducedPrecision?S:E}write(e,t,n){const r=this.edgeHashFunction(n);B.seed=r;const i=B.getIntRange(0,255),s=B.getIntRange(0,this.settings.variants-1),o=B.getFloat(),c=255*(.5*function(e,t){const n=e<0?-1:1;return Math.abs(e)**1.2*n}(-(1-Math.min(o/.7,1))+Math.max(0,o-.7)/(1-.7))+.5);e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1),e.componentIndex.set(t,n.componentIndex),e.variantOffset.set(t,i),e.variantStroke.set(t,s),e.variantExtension.set(t,c)}trim(e,t){return e.slice(0,t)}}const N=new Float32Array(6),I=new Uint32Array(N.buffer),U=new Uint32Array(1);function E(e){const t=N;t[0]=e.position0[0],t[1]=e.position0[1],t[2]=e.position0[2],t[3]=e.position1[0],t[4]=e.position1[1],t[5]=e.position1[2],U[0]=5381;for(let e=0;e<I.length;e++)U[0]=31*U[0]+I[e];return U[0]}function S(e){const t=N;t[0]=L(e.position0[0]),t[1]=L(e.position0[1]),t[2]=L(e.position0[2]),t[3]=L(e.position1[0]),t[4]=L(e.position1[1]),t[5]=L(e.position1[2]),U[0]=5381;for(let e=0;e<I.length;e++)U[0]=31*U[0]+I[e];return U[0]}function L(e){return Math.round(1e4*e)/1e4}class V{constructor(){this.commonWriter=new F}updateSettings(e){this.commonWriter.updateSettings(e)}allocate(e){return w.createBuffer(e)}write(e,t,n){this.commonWriter.write(e,t,n),(0,A.b)(k,n.faceNormal0,n.faceNormal1),(0,A.n)(k,k),e.normal.setVec(t,k)}trim(e,t){return this.commonWriter.trim(e,t)}}V.Layout=w,V.glLayout=d(w,1);class x{constructor(){this.commonWriter=new F}updateSettings(e){this.commonWriter.updateSettings(e)}allocate(e){return y.createBuffer(e)}write(e,t,n){this.commonWriter.write(e,t,n),e.normalA.setVec(t,n.faceNormal0),e.normalB.setVec(t,n.faceNormal1)}trim(e,t){return this.commonWriter.trim(e,t)}}x.Layout=y,x.glLayout=d(y,1);const k=(0,b.c)(),B=new v.Z;var M=n(89847),T=n(19776),C=n(71919);const D=-1;function P(e,t){return e.cosAngle<t}function W(e,t){return e.cosAngle>t}function O(e,t){const n=(0,T.ZF)(e.cosAngle),r=q.fwd,i=q.ortho;return(0,A.r)(r,e.position1,e.position0),n*((0,A.d)((0,A.c)(i,e.faceNormal0,e.faceNormal1),r)>0?-1:1)>t}function z(e){const t=e.faces.length/3,n=e.vertices.position,r=e.faces,i=$.v0,s=$.v1,o=$.v2,c=new Float32Array(3*t);for(let e=0;e<t;e++){const t=r[3*e+0],a=r[3*e+1],u=r[3*e+2];n.getVec(t,i),n.getVec(a,s),n.getVec(u,o),(0,A.f)(s,s,i),(0,A.f)(o,o,i),(0,A.c)(i,s,o),(0,A.n)(i,i),c[3*e+0]=i[0],c[3*e+1]=i[1],c[3*e+2]=i[2]}return c}const q={edge:{position0:(0,b.c)(),position1:(0,b.c)(),faceNormal0:(0,b.c)(),faceNormal1:(0,b.c)(),componentIndex:0,cosAngle:0},ortho:(0,b.c)(),fwd:(0,b.c)()},$={v0:(0,b.c)(),v1:(0,b.c)(),v2:(0,b.c)()},H={anglePlanar:4,angleSignificantEdge:35};async function _(e){const t=function(e){return{data:g.createView(e.dataBuffer),indices:"Uint32Array"===e.indicesType?new Uint32Array(e.indicesBuffer):"Uint16Array"===e.indicesType?new Uint16Array(e.indicesBuffer):void 0,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}(e),n=j(t),r=[t.data.buffer];return{result:R(n,r),transferList:r}}function j(e){const t=G(e.data,e.skipDeduplicate,e.indices,e.indicesLength);return K.updateSettings(e.writerSettings),Z.updateSettings(e.writerSettings),function(e,t,n,r=H){const i=e.vertices.position,s=e.vertices.componentIndex,o=(0,T.Vl)(r.anglePlanar),c=(0,T.Vl)(r.angleSignificantEdge),a=Math.cos(c),u=Math.cos(o),l=q.edge,f=l.position0,d=l.position1,h=l.faceNormal0,p=l.faceNormal1,g=z(e),m=function(e){const t=e.faces.length/3,n=e.faces,r=e.neighbors;let i=0;for(let e=0;e<t;e++){const t=r[3*e+0],s=r[3*e+1],o=r[3*e+2],c=n[3*e+0],a=n[3*e+1],u=n[3*e+2];i+=t===D||c<a?1:0,i+=s===D||a<u?1:0,i+=o===D||u<c?1:0}const s=new Int32Array(4*i);let o=0;for(let e=0;e<t;e++){const t=r[3*e+0],i=r[3*e+1],c=r[3*e+2],a=n[3*e+0],u=n[3*e+1],l=n[3*e+2];(t===D||a<u)&&(s[o++]=a,s[o++]=u,s[o++]=e,s[o++]=t),(i===D||u<l)&&(s[o++]=u,s[o++]=l,s[o++]=e,s[o++]=i),(c===D||l<a)&&(s[o++]=l,s[o++]=a,s[o++]=e,s[o++]=c)}return s}(e),w=m.length/4,y=t.allocate(w);let v=0;const b=w,F=n.allocate(b);let N=0,I=0,U=0;const E=(0,M.w6)(0,w),S=new Float32Array(w);(0,C.Ed)(S,((e,t,n)=>{i.getVec(m[4*t+0],f),i.getVec(m[4*t+1],d),n[t]=(0,A.i)(f,d)})),E.sort(((e,t)=>S[t]-S[e]));const L=new Array,V=new Array;for(let e=0;e<w;e++){const r=E[e],c=S[r],w=m[4*r+0],b=m[4*r+1],x=m[4*r+2],k=m[4*r+3],B=k===D;if(i.getVec(w,f),i.getVec(b,d),B)(0,A.s)(h,g[3*x+0],g[3*x+1],g[3*x+2]),(0,A.g)(p,h),l.componentIndex=s.get(w),l.cosAngle=(0,A.d)(h,p);else{if((0,A.s)(h,g[3*x+0],g[3*x+1],g[3*x+2]),(0,A.s)(p,g[3*k+0],g[3*k+1],g[3*k+2]),l.componentIndex=s.get(w),l.cosAngle=(0,A.d)(h,p),W(l,u))continue;l.cosAngle<-.9999&&(0,A.g)(p,h)}I+=c,U++,B||P(l,a)?(t.write(y,v++,l),L.push(c)):O(l,o)&&(n.write(F,N++,l),V.push(c))}const x=new Float32Array(L.reverse()),k=new Float32Array(V.reverse());return{regular:{instancesData:t.trim(y,v),lodInfo:{lengths:x}},silhouette:{instancesData:n.trim(F,N),lodInfo:{lengths:k}},averageEdgeLength:I/U}}(t,K,Z)}function R(e,t){return t.push(e.regular.lodInfo.lengths.buffer),t.push(e.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:c(e.regular.instancesData,t),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:c(e.silhouette.instancesData,t),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}function G(e,t,n,s){if(t)return{faces:n,facesLength:s,neighbors:i(n,s,e.count),vertices:e};const o=(0,r.d)(e.buffer,e.stride/4,{originalIndices:n,originalIndicesLength:s}),c=i(o.indices,s,o.uniqueCount);return{faces:o.indices,facesLength:o.indices.length,neighbors:c,vertices:g.createView(o.buffer)}}const K=new V,Z=new x}}]);