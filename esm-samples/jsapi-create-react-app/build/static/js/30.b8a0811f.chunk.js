(this["webpackJsonpjsapi-create-react-app"]=this["webpackJsonpjsapi-create-react-app"]||[]).push([[30],{1143:function(t,e,n){"use strict";n.r(e),n.d(e,"loadGLTFMesh",(function(){return T}));var r=n(35),o=n(84),c=n(2),a=n(52),s=n(83),i=n(5),u=n(31),l=n(594),b=n(474),j=n(362),f=n(595),O=n(21),p=n(168),d=n(528),m=n(338),x=n(776),g=n(486),h=n(489),v=n(529),w=n(136),y=n(368),C=n(376),A=n(421),B=n(475);async function T(t,e,n){const a=new g.a(function(t){return null!=t&&t.resolveFile?{busy:!1,request:async(e,n,r)=>{const a=t.resolveFile(e),s="image"===n?"image":"binary"===n?"array-buffer":"json";return(await Object(o.default)(a,{responseType:s,signal:Object(c.j)(r)?r.signal:null})).data}}:null}(n)),s=(await Object(h.a)(a,e,n,!0)).model,l=s.lods.shift(),p=new Map,d=new Map;s.textures.forEach(((t,e)=>p.set(e,function(t){return new j.a({data:t.data,wrap:I(t.parameters.wrap)})}(t)))),s.materials.forEach(((t,e)=>d.set(e,function(t,e){const n=new r.a(function(t,e){return Object(u.g)(S(t[0]),S(t[1]),S(t[2]),e)}(t.color,t.opacity)),o=t.emissiveFactor?new r.a(function(t){return Object(i.g)(S(t[0]),S(t[1]),S(t[2]))}(t.emissiveFactor)):null;return new b.a({color:n,colorTexture:Object(c.s)(Object(c.c)(t.textureColor,(t=>e.get(t)))),normalTexture:Object(c.s)(Object(c.c)(t.textureNormal,(t=>e.get(t)))),emissiveColor:o,emissiveTexture:Object(c.s)(Object(c.c)(t.textureEmissive,(t=>e.get(t)))),occlusionTexture:Object(c.s)(Object(c.c)(t.textureOcclusion,(t=>e.get(t)))),alphaMode:M(t.alphaMode),alphaCutoff:t.alphaCutoff,doubleSided:t.doubleSided,metallic:t.metallicFactor,roughness:t.roughnessFactor,metallicRoughnessTexture:Object(c.s)(Object(c.c)(t.textureMetallicRoughness,(t=>e.get(t))))})}(t,p))));const v=function(t){let e=0;const n={color:!1,tangent:!1,normal:!1,texCoord0:!1};for(const{attributes:{position:r,normal:o,color:c,tangent:a,texCoord0:s}}of t.parts)e+=r.count,o&&(n.normal=!0),c&&(n.color=!0),a&&(n.tangent=!0),s&&(n.texCoord0=!0);return{writeIndex:0,vertexAttributes:{position:Object(m.a)(O.v,e),normal:n.normal?Object(m.a)(O.u,e):null,tangent:n.tangent?Object(m.a)(O.C,e):null,color:n.color?Object(m.a)(O.J,e):null,texCoord0:n.texCoord0?Object(m.a)(O.m,e):null},components:[]}}(l);for(const r of l.parts)F(v,r,d);const{position:w,normal:y,tangent:C,color:A,texCoord0:B}=v.vertexAttributes,T={position:w.typedBuffer,normal:Object(c.j)(y)?y.typedBuffer:null,tangent:Object(c.j)(C)?C.typedBuffer:null,uv:Object(c.j)(B)?B.typedBuffer:null,color:Object(c.j)(A)?A.typedBuffer:null},E=Object(x.c)(T,t,n);return{transform:E.transform,components:v.components,spatialReference:t.spatialReference,vertexAttributes:new f.c({position:E.vertexAttributes.position,normal:E.vertexAttributes.normal,tangent:E.vertexAttributes.tangent,color:T.color,uv:T.uv})}}function F(t,e,n){const{position:r,normal:o,tangent:i,color:u,texCoord0:b}=t.vertexAttributes,j=t.writeIndex,f=e.attributes.position.count;if(Object(p.e)(r.slice(j,f),e.attributes.position,e.transform),Object(c.j)(e.attributes.normal)&&Object(c.j)(o)){const t=Object(a.a)(Object(s.b)(),e.transform);Object(p.a)(o.slice(j,f),e.attributes.normal,t)}else Object(c.j)(o)&&Object(C.b)(o,0,0,1,{dstIndex:j,count:f});if(Object(c.j)(e.attributes.tangent)&&Object(c.j)(i)){const t=Object(a.a)(Object(s.b)(),e.transform);Object(d.c)(i.slice(j,f),e.attributes.tangent,t)}else Object(c.j)(i)&&Object(A.b)(i,0,0,1,1,{dstIndex:j,count:f});if(Object(c.j)(e.attributes.texCoord0)&&Object(c.j)(b)?Object(B.b)(b.slice(j,f),e.attributes.texCoord0):Object(c.j)(b)&&Object(B.a)(b,0,0,{dstIndex:j,count:f}),Object(c.j)(e.attributes.color)&&Object(c.j)(u)){const t=e.attributes.color,n=u.slice(j,f);if(4===t.elementCount)t instanceof O.C?Object(d.b)(n,t,255):t instanceof O.J?Object(A.a)(n,t):t instanceof O.H&&Object(d.a)(n,t,8);else{Object(A.b)(n,255,255,255,255);const e=O.B.fromTypedArray(n.typedBuffer,n.typedBufferStride);t instanceof O.u?Object(p.d)(e,t,255):t instanceof O.B?Object(C.a)(e,t):t instanceof O.z&&Object(p.b)(e,t,8)}}else Object(c.j)(u)&&Object(A.b)(u.slice(j,f),255,255,255,255);const m=function(t,e){switch(e){case 4:return Object(v.c)(t,w.e);case 5:return Object(v.b)(t);case 6:return Object(v.a)(t)}}(e.indices||f,e.primitiveType);if(j)for(let c=0;c<m.length;c++)m[c]+=j;t.components.push(new l.a({faces:m,material:n.get(e.material).clone(),trustSourceNormals:!0})),t.writeIndex+=f}function M(t){switch(t){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function I(t){return{horizontal:E(t.s),vertical:E(t.t)}}function E(t){switch(t){case 33071:return"clamp";case 33648:return"mirror";case 10497:return"repeat"}}function S(t){return t**(1/y.a)*255}}}]);
//# sourceMappingURL=30.b8a0811f.chunk.js.map