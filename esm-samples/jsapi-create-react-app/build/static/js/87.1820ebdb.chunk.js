(this["webpackJsonpjsapi-create-react-app"]=this["webpackJsonpjsapi-create-react-app"]||[]).push([[87],{1173:function(e,t,a){"use strict";a.r(t);var r=a(0),i=a(11),n=a(2),s=a(1),l=(a(8),a(9),a(7),a(4)),o=a(36),c=a(564),u=a(589),f=a(562),p=a(445),y=a(12),b=a(760);const h=e=>{let t=class extends e{async fetchPopupFeatures(e,t){const{layer:a}=this;if(!e)return Promise.reject(new i.a("tilelayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:a}));if("tile"!==a.type)return Promise.reject(new i.a("tilelayerview:fetchPopupFeatures","Layer type should be 'tile'",{type:a.type}));const r=this.get("view.scale"),s=a.allSublayers.toArray().filter((e=>{const t=0===e.minScale||r<=e.minScale,a=0===e.maxScale||r>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&t&&a}));return Object(y.k)(s.map((async a=>{const r=a.createQuery(),i=Object(n.j)(t)?t.event:null,s=Object(b.a)({renderer:a.renderer,event:i});return r.geometry=this.createFetchPopupFeaturesQueryGeometry(e,s),r.outFields=await a.popupTemplate.getRequiredFields(),(await a.queryFeatures(r)).features}))).then((e=>[].concat(...e.map((e=>e.value)).filter(Boolean))))}};return Object(r.a)([Object(s.b)()],t.prototype,"layer",void 0),t=Object(r.a)([Object(l.a)("esri.layers.mixins.TileLayerView")],t),t};var m=a(810);let d=class extends(Object(p.a)(Object(u.a)(h(Object(c.a)(f.a))))){constructor(){super(...arguments),this.type="tile-3d"}get imageFormatIsOpaque(){return"jpg"===this.layer.tileInfo.format}get hasMixedImageFormats(){return"mixed"===this.layer.tileInfo.format}get dataLevelRange(){if(this.tileInfo){const e=this.tileInfo.lods,t=e[0].scale,a=e[e.length-1].scale;return this.levelRangeFromScaleRange(t,a)}return{minLevel:0,maxLevel:0}}initialize(){if("web-tile"===this.layer.type){const e=this.layer.get("fullExtent.spatialReference"),t=this.layer.get("tileInfo.spatialReference");if(Object(n.i)(e)||Object(n.i)(t)||!Object(o.b)(e,t)){const e="defaults"===this.layer.originOf("fullExtent")||Object(n.i)(this.layer.fullExtent)?"SceneView requires fullExtent to be specified by the user on WebTileLayer":"SceneView requires fullExtent to be specified in the same spatial reference as tileInfo on WebTileLayer";this.addResolvingPromise(Promise.reject(new i.a("layerview:incompatible-fullextent",e)))}}this._addTilingSchemeMatchPromise()}createFetchPopupFeaturesQueryGeometry(e,t){return Object(m.a)(e,t,this.view)}async doRefresh(e){this.suspended||this.emit("data-changed")}};Object(r.a)([Object(s.b)({readOnly:!0})],d.prototype,"imageFormatIsOpaque",null),Object(r.a)([Object(s.b)({readOnly:!0})],d.prototype,"hasMixedImageFormats",null),Object(r.a)([Object(s.b)({aliasOf:"layer.fullExtent"})],d.prototype,"fullExtent",void 0),Object(r.a)([Object(s.b)()],d.prototype,"layer",void 0),Object(r.a)([Object(s.b)({aliasOf:"layer.tileInfo"})],d.prototype,"tileInfo",void 0),Object(r.a)([Object(s.b)({readOnly:!0})],d.prototype,"dataLevelRange",null),d=Object(r.a)([Object(l.a)("esri.views.3d.layers.TileLayerView3D")],d);var j=d;t.default=j},760:function(e,t,a){"use strict";function r(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function i(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){let t=0,a=0;for(let r=0;r<e.length;r++){const i=e[r].size;"number"==typeof i&&(t+=i,a++)}return t/a}(e.stops):t}function n(e,t){if(!t)return e;const a=t.filter((e=>"size"===e.type)).map((t=>{const{maxSize:a,minSize:r}=t;return(i(a,e)+i(r,e))/2}));let r=0;const n=a.length;if(0===n)return e;for(let i=0;i<n;i++)r+=a[i];const s=Math.floor(r/n);return Math.max(s,e)}function s(e){const t=e&&e.renderer,a="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return a;const i="visualVariables"in t?n(a,t.visualVariables):a;if("simple"===t.type)return r(i,t.symbol);if("unique-value"===t.type){let e=i;return t.uniqueValueInfos.forEach((t=>{e=r(e,t.symbol)})),e}if("class-breaks"===t.type){let e=i;return t.classBreakInfos.forEach((t=>{e=r(e,t.symbol)})),e}return t.type,i}a.d(t,"a",(function(){return s}))},810:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a(113);var r=a(2),i=a(54),n=(a(760),a(50));function s(e,t,a,s=new n.a){let l;if("2d"===a.type)l=t*a.resolution;else if("3d"===a.type){const n=a.overlayPixelSizeInMapUnits(e),s=a.basemapSpatialReference;l=Object(r.j)(s)&&!s.equals(a.spatialReference)?Object(i.f)(s)/Object(i.f)(a.spatialReference):t*n}const o=e.x-l,c=e.y-l,u=e.x+l,f=e.y+l,{spatialReference:p}=a;return s.xmin=Math.min(o,u),s.ymin=Math.min(c,f),s.xmax=Math.max(o,u),s.ymax=Math.max(c,f),s.spatialReference=p,s}new n.a}}]);
//# sourceMappingURL=87.1820ebdb.chunk.js.map