{"version":3,"sources":["../node_modules/@arcgis/core/views/layers/GroupLayerView.js"],"names":["o","l","constructor","e","super","this","type","layerViews","i","initialize","handles","add","on","_layerViewsChangeHandler","_layerViewsAfterChangesHandler","layer","watch","_visibilityModeHandler","_visibleHandler","target","added","toArray","removed","moved","_set","s","_get","isUpdating","some","updating","length","reduce","updatingProgress","_hasLayerViewVisibleOverrides","_isOverridden","_findLayerViewForLayer","find","_firstVisibleOnLayerOrder","layers","visible","_enforceExclusiveVisibility","getItemAt","forEach","remove","map","_layerViewVisibleHandler","_enforceVisibility","_updateUpdating","visibilityMode","notifyChange","t","cast","r","prototype","readOnly","a","h"],"mappings":"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","file":"static/js/208.e5e8a250.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import i from\"../../core/Collection.js\";import{referenceSetter as s,castForReferenceSetter as r}from\"../../core/collectionUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import l from\"./LayerView.js\";let o=class extends l{constructor(e){super(e),this.type=\"group\",this.layerViews=new i}initialize(){this.handles.add([this.layerViews.on(\"change\",(e=>this._layerViewsChangeHandler(e))),this.layerViews.on(\"after-changes\",(()=>this._layerViewsAfterChangesHandler())),this.layer.watch(\"visibilityMode\",(()=>this._visibilityModeHandler()),!0),this.watch(\"visible\",(()=>this._visibleHandler()),!0)],\"grouplayerview\"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]}),this._layerViewsAfterChangesHandler()}set layerViews(e){this._set(\"layerViews\",s(e,this._get(\"layerViews\")))}isUpdating(){return this.layerViews.some((e=>e.updating))}get updatingProgress(){return 0===this.layerViews.length?1:this.layerViews.reduce(((e,i)=>e+i.updatingProgress),0)/this.layerViews.length}_hasLayerViewVisibleOverrides(){return this.layerViews.some((e=>e._isOverridden(\"visible\")))}_findLayerViewForLayer(e){return e&&this.layerViews.find((i=>i.layer===e))}_firstVisibleOnLayerOrder(){const e=this.layer.layers.find((e=>{const i=this._findLayerViewForLayer(e);return i&&i.visible}));return e&&this._findLayerViewForLayer(e)}_enforceExclusiveVisibility(e){this._hasLayerViewVisibleOverrides()&&(e||!(e=this._firstVisibleOnLayerOrder())&&this.layerViews.length>0&&(e=this._findLayerViewForLayer(this.layer.layers.getItemAt(0))),this.layerViews.forEach((i=>{i.visible=i===e})))}_layerViewsChangeHandler(e){this.handles.remove(\"grouplayerview:visible\"),this.handles.add(this.layerViews.map((e=>e.watch(\"visible\",(i=>this._layerViewVisibleHandler(i,e)),!0))).toArray(),\"grouplayerview:visible\");const i=e.added[e.added.length-1];let s=null;i&&i.visible&&(s=i),this._enforceVisibility(s)}_layerViewsAfterChangesHandler(){this.handles.remove(\"grouplayerview:updating\"),this.handles.add(this.layerViews.map((e=>e.watch(\"updating\",(()=>this._updateUpdating()),!0))).toArray(),\"grouplayerview:updating\"),this._updateUpdating()}_enforceVisibility(e){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case\"inherited\":{const e=this.visible;this.layerViews.forEach((i=>{i.visible=e}));break}case\"exclusive\":this._enforceExclusiveVisibility(e)}}_visibilityModeHandler(){this._enforceVisibility()}_layerViewVisibleHandler(e,i){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case\"inherited\":e!==this.visible&&(i.visible=this.visible);break;case\"exclusive\":this._enforceExclusiveVisibility(e&&i)}}_visibleHandler(){var e;this._hasLayerViewVisibleOverrides()&&\"inherited\"===(null==(e=this.layer)?void 0:e.visibilityMode)&&this._enforceVisibility()}_updateUpdating(){this.notifyChange(\"updating\")}};e([t({cast:r})],o.prototype,\"layerViews\",null),e([t()],o.prototype,\"view\",void 0),e([t({readOnly:!0})],o.prototype,\"updatingProgress\",null),o=e([a(\"esri.views.layers.GroupLayerView\")],o);var h=o;export default h;\n"],"sourceRoot":""}