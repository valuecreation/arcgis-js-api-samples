{"version":3,"sources":["../node_modules/@arcgis/core/views/3d/layers/PointCloudWorkerHandle.js","../node_modules/@arcgis/core/views/3d/layers/i3s/LoDUtil.js","../node_modules/@arcgis/core/views/3d/layers/i3s/PagedNodeIndex.js","../node_modules/@arcgis/core/views/3d/layers/i3s/PointCloudRendererUtil.js","../node_modules/@arcgis/core/views/3d/layers/i3s/PointGraphic.js","../node_modules/@arcgis/core/views/3d/layers/i3s/PointHighlights.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/PointRendererTechnique.js","../node_modules/@arcgis/core/views/3d/layers/i3s/PointRenderer.js","../node_modules/@arcgis/core/views/3d/layers/PointCloudLayerView3D.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js","../node_modules/@arcgis/core/renderers/support/pointCloud/ColorModulation.js","../node_modules/@arcgis/core/renderers/support/pointCloud/PointSizeAlgorithm.js","../node_modules/@arcgis/core/renderers/support/pointCloud/PointSizeFixedSizeAlgorithm.js","../node_modules/@arcgis/core/renderers/support/pointCloud/PointSizeSplatAlgorithm.js","../node_modules/@arcgis/core/renderers/support/pointCloud/pointSizeAlgorithmTypeUtils.js","../node_modules/@arcgis/core/renderers/PointCloudRenderer.js","../node_modules/@arcgis/core/renderers/PointCloudStretchRenderer.js","../node_modules/@arcgis/core/views/3d/layers/support/PopupSceneLayerView.js","../node_modules/@arcgis/core/renderers/support/pointCloud/ColorClassBreakInfo.js","../node_modules/@arcgis/core/renderers/PointCloudClassBreaksRenderer.js","../node_modules/@arcgis/core/renderers/support/pointCloud/ColorUniqueValueInfo.js","../node_modules/@arcgis/core/renderers/PointCloudUniqueValueRenderer.js","../node_modules/@arcgis/core/views/3d/layers/i3s/PointCloudWorkerUtil.js","../node_modules/@arcgis/core/chunks/PointRenderer.glsl.js"],"names":["e","r","constructor","t","super","getTransferList","geometryBuffer","primaryAttributeData","buffer","push","modulationAttributeData","filterAttributesData","u","userAttributesData","n","l","o","h","indexOf","getParentId","d","remove","length","pop","load","g","c","s","this","_pages","pageSize","_nodeSR","_renderSR","addPage","i","p","obb","obbs","a","nodes","renderObbs","parents","Uint32Array","childCount","firstChild","hasPage","getNode","getRenderObb","getRenderCenter","center","setRenderObb","hasNodes","forEachNodeId","createVisibilityTraverse","index","queue","masks","tempAabb","f","clippingBox","frustum","predicate","pageMiss","renderer","type","toJSON","attributeStorageInfo","field","colorModulation","rendererJSON","isRGBRenderer","primaryAttribute","modulationAttribute","filters","map","filterJSON","attributeInfo","pointSizeAlgorithm","name","attributeValues","valueType","valuesPerElement","storageInfo","useElevation","encoding","toLowerCase","clone","cloneProperties","pointCloudMetadata","constructOnly","prototype","context","highlights","Set","size","destroy","add","enableSet","removeSet","disableSet","delete","enabled","forEachNode","enableSetForNode","ids","get","id","forEach","addHighlight","disableSetForNode","removeHighlight","nodeAdded","nodeRemoved","removeAll","Map","nodeId","pointId","set","initializeProgram","shader","configuration","build","output","slicePlaneEnabled","sliceHighlightDisabled","sliceEnabledForVertexPrograms","drawScreenSize","rctx","initializePipeline","depthTest","func","depthWrite","colorWrite","stencilWrite","sceneHasOcludees","stencilTest","m","arguments","count","k","positions","offset","stride","normalized","colors","T","_params","isGround","_bindParameters","inverseViewport","highlightDepthTexture","_highlights","j","canRender","layerUid","_useFixedSizes","_scaleFactor","_minSizePx","_useRealWorldSymbolSizes","_size","_sizePx","_slicePlaneEnabled","_clipBox","z","P","_techniqueConfig","L","tempMatrix4","tempVec3","_","hasHighlights","initializeRenderContext","_context","_techniqueRep","shaderTechniqueRep","requestRender","uninitializeRenderContext","intersect","x","v","camera","perScreenPixelRatio","near","_getSizeParams","y","S","q","node","point","dist","normal","A","C","B","b","forAll","splatSize","F","H","G","isLeaf","D","V","U","M","w","origin","E","coordinates","R","$","options","store","I","metadata","createGraphic","N","intersector","results","min","max","all","render","pass","vao","_initNode","selectTechnique","program","setUniform3fv","useProgram","bindPipelineState","setUniformMatrix4fv","projectionMatrix","setUniform2f","far","isHighlightPass","fullViewport","pixelRatio","drawFixedSize","fixedSize","fullHeight","sliceHelper","plane","screenMinSize","W","viewMatrix","bindVAO","_renderHighlightFragments","drawArrays","component","_requestRender","addNode","removeNode","filterInPlace","clear","highlight","J","K","filter","Q","O","createVertex","rgb","drawScreenSpace","hasOccludees","releaseAndAcquire","_technique","Math","isInstanceOfNode","hasOwnProperty","ae","getLogger","le","he","X","ie","maximumPointCount","_renderer","_rendererAdded","_renderedNodes","_nodeScales","_updateViewNeeded","_lodFactor","_maxLoggedBoxWarnings","_pageMultiplier","_nodeLoadEpoch","_indexQueue","_workQueue","Array","_idleQueue","_indexPagesLoading","_loadingNodes","_recalcWork","_layerIsVisible","_codedDomainPopulationPromise","_codedDomainPopulationAbortController","_totalWork","_index","_loadingInitNodePage","_nodeIdArray","layer","scaleFactor","useRealWorldSymbolSizes","pointsPerInch","outFields","fieldsIndex","from","view","clippingArea","renderSpatialReference","Z","elevationInfo","mode","spatialReference","unit","initialize","resourceController","_worker","schedule","addResolvingPromise","promise","_tmpPoint","_indexRequester","createStreamDataRequester","_dataRequester","_initRenderer","_initNodePages","memoryController","_memCache","getMemCache","uid","updatingHandles","_setUpdateViewNeeded","_elevationOffsetChanged","_rendererChanged","_reload","state","handles","basemapTerrain","on","_scaleUpdateHandler","events","when","scheduler","registerTask","oe","POINT_CLOUD_LAYER","registerIdleStateCallbacks","_idleBegin","_idleEnd","_clearNodeState","_updateLoading","cancelLoading","_destroyRenderer","abort","Y","_createGraphic","_setPointsVisible","minSizePx","sqrt","sizePx","slicePlane","pointIdFilterMap","computeMapPointFromVec3d","_createGraphicAttributes","pointIndexInNode","attributePointIndexInNode","epoch","geometry","attributes","sourceLayer","_encodeGraphicAttribute","values","_stage","addRenderPlugin","removeRenderPlugin","useFixedSizes","minScale","maxScale","extent","pe","has","scale","displayNodes","contentCamera","viewForward","sort","_updateQueues","_computeWork","notifyChange","_cancelNodeLoading","_cancelIndexLoading","abortController","cancelAll","_removeFromRenderer","suspended","runTask","_isRootNodeVisible","run","_updateWorkQueues","_processIndexQueue","_processWorkQueue","process","shift","_loadNodePage","then","_elevationOffset","done","_scheduleWorkEntry","_processWorkEntry","madeProgress","find","Promise","toString","resolve","loadNode","signal","_setupRendererData","_addToRenderer","catch","domain","queryCachedStatistics","ok","value","labels","isArray","ne","codedValues","code","label","populateClassCodeCodedDomain","_splitGraphicsPerNode","async","_loadElevationAttributeFromGeometry","resourceId","_loadAndParseAttribute","_isValidPointGraphic","_loadAttribute","vertexCount","defaultGeometrySchema","_loadGeometry","isCollection","toArray","_graphicToPointDefinition","canResume","isUpdating","nodesPerPage","nodePerIndexBlock","renderCoordsHelper","_traverseVisible","baseUrl","_requestNodePage","pointCount","lodThreshold","effectiveArea","inverseDensity","_getLodMemoryFactor","_computeNodesForMinimumDensity","_computePointCount","memoryFactor","_clippingBox","eye","re","_getScale","se","_computeAveragePixelArea","getScale","ee","loadNodeAsync","error","loadAdditionalUserAttributes","schema","rendererInfo","filterInfo","elevationOffset","inSR","outSR","invoke","_requestData","key","token","apiKey","request","query","put","ue","halfSize","warn","points","getUsedMemory","ce","getUnloadedMemory","reduce","ignoresMemoryFactor","displayedNumberOfFeatures","maximumNumberOfFeatures","totalNumberOfFeatures","core","visibleNodes","readOnly","aliasOf","Boolean","te","_e","popupTemplate","getRequiredFields","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","includes","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate","minValue","maxValue","String","json","write","Number","nonNullable","pointCloudFixedSizeAlgorithm","pointCloudSplatAlgorithm","apiValues","jsonValues","read","base","typeMap","splat","pointCloudClassBreaksRenderer","pointCloudRGBRenderer","pointCloudStretchRenderer","pointCloudUniqueValueRenderer","console","declaredClass","types","fieldTransformTypeKebabDict","none","lowFourBit","highFourBit","absoluteValue","moduloTen","legendOptions","fieldTransformType","stops","_validateFetchPopupFeatures","popupEnabled","reject","clientGraphics","associatedLayer","prepareFetchPopupFeatures","whenGraphicAttributes","concat","description","color","source","target","colorClassBreakInfos","colorUniqueValueInfos","fromJSON","Uint8Array","vertexAttributes","position","header","fields","offsetX","offsetY","offsetZ","scaleX","scaleY","scaleZ","Float64Array","result","requiredSetBits","requiredClearBits","includedReturns","abs","extensions","include","vertex","uniforms","varyings","fragment","Object","freeze","__proto__"],"mappings":"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","file":"static/js/44.06ca94a4.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../core/maybe.js\";import{WorkerHandle as r}from\"../../../core/workers/WorkerHandle.js\";class e extends r{constructor(t){super(\"PointCloudWorker\",\"transform\",t)}getTransferList(r){const e=[r.geometryBuffer];if(t(r.primaryAttributeData)&&r.primaryAttributeData.buffer&&e.push(r.primaryAttributeData.buffer),t(r.modulationAttributeData)&&r.modulationAttributeData.buffer&&e.push(r.modulationAttributeData.buffer),t(r.filterAttributesData))for(const u of r.filterAttributesData)t(u)&&u.buffer&&e.push(u.buffer);for(const t of r.userAttributesData)t.buffer&&e.push(t.buffer);return e}}export{e as PointCloudWorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{d as e}from\"../../../../chunks/vec3.js\";function t(e,t,g){for(let n=0;n<t.length;n++)r[n]=!1,o[n]=null;for(let r=0;r<e.length;r++)n[r]=!1,l[r]=null;for(let n=0;n<t.length;n++){const o=h(t[n],e,g);o>=0&&(r[n]=!0,null!=l[o]?l[o].push(t[n]):l[o]=[t[n]])}for(let l=0;l<e.length;l++){const r=h(e[l],t,g);r>=0&&(n[l]=!0,null!=o[r]?o[r].push(e[l]):o[r]=[e[l]])}const u=[];for(let r=0;r<e.length;r++)null!=l[r]||n[r]||u.push({load:[],remove:[e[r]]});for(let n=0;n<t.length;n++)null!=o[n]||r[n]||u.push({load:[t[n]],remove:[]});for(let n=0;n<t.length;n++)null!=o[n]&&(o[n].length>1||o[n][0]!==t[n])&&u.push({load:[t[n]],remove:o[n]});for(let n=0;n<e.length;n++)null!=l[n]&&(l[n].length>1||l[n][0]!==e[n])&&u.push({load:l[n],remove:[e[n]]});return u}const n=[!1],l=[null],r=[!1],o=[null];function h(e,t,n){let l=e;for(;l>0;){const e=t.indexOf(l);if(e>=0)return e;l=n.getParentId(l)}return t.indexOf(l)}function g(t,n,l){return t.sort(((t,r)=>{if(0===t.load.length&&0===r.load.length)return 0;if(0===t.load.length)return-1;if(0===r.load.length)return 1;if(0===t.remove.length&&0===r.remove.length){const o=l.getRenderCenter(t.load[0]),h=l.getRenderCenter(r.load[0]);return e(o,n)-e(h,n)}if(0===t.remove.length)return-1;if(0===r.remove.length)return 1;if(1===t.load.length&&1===r.load.length){const o=l.getRenderCenter(t.load[0]),h=l.getRenderCenter(r.load[0]);return e(o,n)-e(h,n)}if(1===t.load.length)return-1;if(1===r.load.length)return 1;{const o=l.getRenderCenter(t.remove[0]),h=l.getRenderCenter(r.remove[0]);return e(o,n)-e(h,n)}}))}function u(e,t,n){for(let l=0;l<e.length;++l){const r=e[l];r.load.length>t&&1===r.remove.length&&d(e,r,n)}}function d(e,t,n){const l=[t.remove[0]],r=[];for(;1===l.length;){const e=l.pop();r.length=0;for(let o=0;o<t.load.length;o++){let h=t.load[o],g=n.getParentId(h);for(;g!==e;)h=g,g=n.getParentId(h);let u=l.indexOf(h);u<0&&(u=l.length,l.push(h),r.push([])),r[u].push(t.load[o])}}t.load=l;for(let o=0;o<l.length;o++)r[o].length>1?e.push({remove:[l[o]],load:r[o]}):l[o]=r[o][0]}export{t as nodeDiff,g as sortFrontToBack,u as splitWorkEntries,d as splitWorkEntry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{create as e,contains as t,intersects as s}from\"../../../../geometry/support/aaBoundingBox.js\";import{transformObb as n}from\"./I3SUtil.js\";import{set as i,toAaBoundingBox as r,intersectPlane as o,ObbArray as p}from\"../../support/orientedBoundingBox.js\";class h{constructor(e,t,s){this._pages=[],this.pageSize=0,this._nodeSR=null,this._renderSR=null,this._nodeSR=e,this._renderSR=t,this.pageSize=s}addPage(e,t,s=0){for(;this._pages.length<e;)this._pages.push(null);const n=a(t,this._nodeSR,this._renderSR,s);this._pages[e]={nodes:t,renderObbs:n,parents:new Uint32Array(this.pageSize)},u(this._pages,this.pageSize)}hasPage(e){return!!this._pages[e]}getNode(e){const t=this.pageSize;return this._pages[l(e,t)].nodes[c(e,t)]}getRenderObb(e){const t=this.pageSize;return this._pages[l(e,t)].renderObbs[c(e,t)]}getRenderCenter(e){return this.getRenderObb(e).center}setRenderObb(e,t){const s=this.pageSize;i(t,this._pages[l(e,s)].renderObbs[c(e,s)])}getParentId(e){const t=this.pageSize;return this._pages[l(e,t)].parents[c(e,t)]}hasNodes(e,t){const s=l(e,this.pageSize),n=l(e+t-1,this.pageSize);for(let i=s;i<=n;i++)if(null==this._pages[i])return!1;return!0}forEachNodeId(e){for(let t=0;t<this._pages.length;t++){const s=this._pages[t];if(s)for(let n=0;n<s.nodes.length;n++)e(t*this.pageSize+n)}}createVisibilityTraverse(){const t={index:this,queue:[],masks:[],tempAabb:e()};return(e,s)=>g(t,e,s)}}function g(e,n,i){const p=e.index;if(!p.hasNodes(0,1))return;const h=e.queue;h.length=0,h.push(0);const g=e.masks;for(g.length=0,g.push(0);h.length>0;){const a=h.pop();let u=g.pop();const c=p.getNode(a),d=p.getRenderObb(a);let f=!0;if(null!=n.clippingBox){const i=1<<n.frustum.length;if(0==(u&i)){const o=r(d,e.tempAabb);t(n.clippingBox,o)?u|=i:s(n.clippingBox,o)||(f=!1)}}for(let e=0;e<n.frustum.length&&f;e++){const t=1<<e;if(0==(u&t)){const s=o(d,n.frustum[e]);s>0?f=!1:s<0&&(u|=t)}}if(i.predicate(a,c,f)){const e=c.firstChild,t=c.childCount;let s=!1;const n=l(e,p.pageSize),r=l(e+t-1,p.pageSize);for(let o=n;o<=r;o++)if(!p.hasPage(o)){i.pageMiss(a,o),s=!0;break}if(!s)for(let i=0;i<t;i++)h.push(e+i),g.push(u)}}}function a(e,t,s,i){const r=new p(e.length);for(let o=0;o<e.length;o++)n(e[o].obb,t,r.obbs[o],s,i);return r.obbs}function u(e,t){const s=[0];for(;s.length;){const n=s.pop(),i=e[l(n,t)].nodes[c(n,t)];for(let r=0;r<i.childCount;r++){const o=i.firstChild+r;null!=e[l(o,t)]&&(e[l(o,t)].parents[c(o,t)]=n,s.push(o))}}}function l(e,t){return e/t|0}function c(e,t){return e%t}export default h;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction t(t){const e=t.renderer,n=e&&e.type,o=e&&t.renderer.toJSON()||null;let r=null,i=!1;\"point-cloud-unique-value\"===n||\"point-cloud-stretch\"===n||\"point-cloud-class-breaks\"===n?r=u(t.attributeStorageInfo,e.field):\"point-cloud-rgb\"===n?(r=l(t.attributeStorageInfo,e.field),i=null!=r):(r=l(t.attributeStorageInfo,\"RGB\"),i=null!=r);let a=null;return e&&e.colorModulation&&(a=u(t.attributeStorageInfo,e.colorModulation.field)),{rendererJSON:o,isRGBRenderer:i,primaryAttribute:r,modulationAttribute:a}}function e(t){const e=t.filters;return e?e.map((e=>({filterJSON:e.toJSON(),attributeInfo:u(t.attributeStorageInfo,e.field)}))):[]}function n(t){const e=t&&t.pointSizeAlgorithm;return e&&\"splat\"===e.type?e:null}function o(t){const e=t&&t.pointSizeAlgorithm;return e&&\"fixed-size\"===e.type?e:null}function r(t){const e=t&&t.pointSizeAlgorithm;return!(!e||!e.type)&&\"fixed-size\"===e.type}function l(t,e){for(const n of t)if(n.name===e&&null!=n.attributeValues&&\"UInt8\"===n.attributeValues.valueType&&3===n.attributeValues.valuesPerElement)return{name:e,storageInfo:n,useElevation:!1};return null}function u(t,e){for(const n of t)if(n.name===e){const t=\"embedded-elevation\"===n.encoding;return{name:e,storageInfo:t?null:n,useElevation:t}}return\"elevation\"===e.toLowerCase()?{name:e,storageInfo:null,useElevation:!0}:null}export{u as getAttributeInfo,e as getFilterInfo,o as getFixedSizeAlgorithm,t as getRendererInfo,n as getSplatSizeAlgorithm,r as rendererUsesFixedSizes};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import o from\"../../../../Graphic.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";var t;let p=t=class extends o{constructor(r){super(r)}clone(){return new t(this.cloneProperties())}cloneProperties(){const{pointCloudMetadata:r}=this;return{...super.cloneProperties(),pointCloudMetadata:r}}};r([e({constructOnly:!0})],p.prototype,\"pointCloudMetadata\",void 0),p=t=r([s(\"esri.views.3d.layers.i3s.PointGraphic\")],p);export{p as PointGraphic};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{makeHandle as e}from\"../../../../core/handleUtils.js\";import{isSome as t}from\"../../../../core/maybe.js\";import{Object3DStateID as i}from\"../../webgl-engine/lib/Object3DStateID.js\";class h{constructor(e){this.context=e,this.highlights=new Set}get hasHighlights(){return this.highlights.size>0}destroy(){this.highlights=null}add(t){const i=new s(t);return this.highlights.add(i),this.enableSet(i),e((()=>this.removeSet(i)))}removeSet(e){this.disableSet(e),this.highlights.delete(e)}enableSet(e){e.enabled||(e.enabled=!0,this.context.forEachNode((t=>this.enableSetForNode(e,t))))}enableSetForNode(e,t){if(!e.enabled)return;const i=e.ids.get(t.id);i&&i.forEach((i=>this.context.addHighlight(t,i,e.id)))}disableSet(e){e.enabled&&(e.enabled=!1,this.context.forEachNode((t=>this.disableSetForNode(e,t))))}disableSetForNode(e,t){e.enabled||this.context.removeHighlight(t,e.id)}nodeAdded(e){this.highlights.forEach((t=>this.enableSetForNode(t,e)))}nodeRemoved(e){this.highlights.forEach((t=>this.disableSetForNode(t,e)))}removeAll(){this.highlights.forEach((e=>this.disableSet(e)))}}class s{constructor(e){this.id=new i(0),this.ids=new Map,this.enabled=!1;for(const i of e)t(i)&&this.add(i.nodeId,i.pointId)}add(e,t){const i=this.ids.get(e);i?i.add(t):this.ids.set(e,new Set([t]))}}export{h as PointHighlights};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{ReloadableShaderModule as r}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as t}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as i,parameter as s}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as o}from\"../lib/DefaultVertexAttributeLocations.js\";import{Program as n}from\"../lib/Program.js\";import{stencilWriteMaskOn as l,stencilBaseAllZerosParams as c}from\"../lib/StencilUtils.js\";import{P as a}from\"../../../../chunks/PointRenderer.glsl.js\";import{makePipelineState as u,defaultDepthWriteParams as d,defaultColorWriteParams as p}from\"../../../webgl/renderState.js\";class h extends t{constructor(e,r,t){super(e,r,t)}initializeProgram(e){const r=h.shader.get(),t=this.configuration,i=r.build({output:t.output,slicePlaneEnabled:t.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!0,drawScreenSize:t.drawScreenSize});return new n(e.rctx,i,o)}initializePipeline(){return u({depthTest:{func:513},depthWrite:d,colorWrite:p,stencilWrite:this.configuration.sceneHasOcludees?l:null,stencilTest:this.configuration.sceneHasOcludees?c:null})}}h.shader=new r(a,(()=>import(\"./PointRenderer.glsl.js\")));class m extends i{constructor(){super(...arguments),this.output=0,this.slicePlaneEnabled=!1,this.drawScreenSize=!1,this.sceneHasOcludees=!1}}e([s({count:8})],m.prototype,\"output\",void 0),e([s()],m.prototype,\"slicePlaneEnabled\",void 0),e([s()],m.prototype,\"drawScreenSize\",void 0),e([s()],m.prototype,\"sceneHasOcludees\",void 0);export{h as PointRendererTechnique,m as PointRendererTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isNone as e,unwrap as i,disposeMaybe as t,isSome as s}from\"../../../../core/maybe.js\";import r from\"../../../../core/PooledArray.js\";import{i as n,t as o,m as a}from\"../../../../chunks/mat4.js\";import{c as h}from\"../../../../chunks/mat4f32.js\";import{I as l}from\"../../../../chunks/mat4f64.js\";import{f as c,l as d,a as u,o as m,d as p,p as g,s as f}from\"../../../../chunks/vec3.js\";import{c as _}from\"../../../../chunks/vec3f32.js\";import{c as x}from\"../../../../chunks/vec3f64.js\";import{s as S}from\"../../../../chunks/vec4.js\";import{create as z,POSITIVE_INFINITY as P,offset as b,contains as w,containsPoint as R,equals as y,set as q}from\"../../../../geometry/support/aaBoundingBox.js\";import{create as v}from\"../../../../geometry/support/plane.js\";import{fromPoints as M}from\"../../../../geometry/support/ray.js\";import{PointHighlights as j}from\"./PointHighlights.js\";import{minimumDistancePlane as F,maximumDistancePlane as H,intersectLine as V,toAaBoundingBox as U}from\"../../support/orientedBoundingBox.js\";import{bindSliceUniforms as A}from\"../../webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{bindOutputHighlight as C}from\"../../webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js\";import{Default3D as B}from\"../../webgl-engine/lib/DefaultVertexAttributeLocations.js\";import{IntersectorResult as E}from\"../../webgl-engine/lib/intersectorUtils.js\";import{PointRendererTechniqueConfiguration as L,PointRendererTechnique as I}from\"../../webgl-engine/shaders/PointRendererTechnique.js\";import N from\"../../../webgl/BufferObject.js\";import O from\"../../../webgl/VertexArrayObject.js\";const k={positions:[{name:\"position\",count:3,type:5126,offset:0,stride:12,normalized:!1}],colors:[{name:\"color\",count:3,type:5121,offset:0,stride:3,normalized:!0}]};class T{constructor(e){this._params=e,this.type=\"Point\",this.isGround=!1,this._bindParameters={inverseViewport:[0,0],highlightDepthTexture:null},this._highlights=new j({forEachNode:e=>this.forEachNode(e),addHighlight:(e,i,t)=>this.addHighlight(e,i,t),removeHighlight:(e,i)=>this.removeHighlight(e,i)}),this.canRender=!0,this.layerUid=\"\",this._useFixedSizes=!1,this._scaleFactor=1,this._minSizePx=0,this._useRealWorldSymbolSizes=!1,this._size=0,this._sizePx=0,this._slicePlaneEnabled=!1,this._clipBox=z(P),this._techniqueConfig=new L,this.tempMatrix4=h(),this.tempVec3=_(),this.nodes=new r}get needsHighlight(){return this._highlights.hasHighlights}initializeRenderContext(e){this._context=e,this._techniqueRep=this._context.shaderTechniqueRep,e.requestRender()}uninitializeRenderContext(){}intersect(e,i,t,s){const r=x(),n=x(),o=x(),a=x(),h=v(),f=e.camera.perScreenPixelRatio/2,_=e.camera.near,P=this._getSizeParams();c(n,s,t);const y=1/d(n);u(n,n,y),m(o,n),S(h,n[0],n[1],n[2],-p(n,t));class q{constructor(){this.node=null,this.pointId=null,this.point=null,this.dist=null,this.normal=null,this.layerUid=\"\"}}const j=new q,A=new q,C=[],B=z(),L=z(this._clipBox);b(L,-t[0],-t[1],-t[2],L),this.nodes.forAll((l=>{const d=l.splatSize*this._scaleFactor;let u=F(l.obb,h),m=H(l.obb,h);u-=G(d,u+_,P,f,l.isLeaf),m-=G(d,m+_,P,f,l.isLeaf);const x=m<0,S=null!=j.dist&&null!=A.dist&&j.dist<u*y&&A.dist>m*y;if(x||S)return;const z=D(d,m+_,P,f,l.isLeaf);if(!V(l.obb,t,n,z))return;const v=z*z;U(l.obb,B),b(B,-t[0],-t[1],-t[2],B);const M=!w(L,B);c(a,l.origin,t);const E=l.coordinates.length/3;for(let h=0;h<E;h++){if(r[0]=a[0]+l.coordinates[3*h],r[1]=a[1]+l.coordinates[3*h+1],r[2]=a[2]+l.coordinates[3*h+2],M&&!R(L,r))continue;const c=p(r,n),u=g(r)-c*c;if(u>v)continue;let m=c+_;const x=G(d,m,P,f,l.isLeaf);if(c-x<0)continue;m-=x;const S=D(d,m,P,f,l.isLeaf);if(u>S*S)continue;const z=(c-x)*y,b=e=>{e.point=$(l,h,e.point),e.dist=z,e.normal=o,e.node=l,e.pointId=h,e.layerUid=this.layerUid};if((null==j.dist||z<j.dist)&&(null==i||i(t,s,z))&&b(j),0!==e.options.store&&(null==A.dist||z>A.dist)&&(null==i||i(t,s,z))&&b(A),2===e.options.store&&(null==i||i(t,s,z))){const e=new q;b(e),C.push(e)}}}));const I=e=>{const{layerUid:i,node:t,pointId:s}=e;return{type:\"external\",point:e.point,metadata:{layerUid:i,createGraphic:()=>this._params.createGraphic(t,s,e.point)}}},N=(e,i)=>{const t=I(i),s=`${i.layerUid}/${i.node.id}/${i.pointId}`;e.set(t,s,i.dist,i.normal,l,void 0),e.intersector=\"PointRenderer\"};if(null!=j.dist){const i=e.results.min;(null==i.dist||j.dist<i.dist)&&N(i,j)}if(null!=A.dist&&0!==e.options.store){const i=e.results.max;(null==i.dist||A.dist>i.dist)&&N(i,A)}if(2===e.options.store){const i=M(t,s);for(const t of C){const s=new E(i);N(s,t),e.results.all.push(s)}}}render(e){if(0!==e.pass&&2!==e.pass&&5!==e.pass)return!1;const i=2===e.pass,t=e.rctx;this.nodes.forAll((i=>{null==i.vao&&this._initNode(e,i)}));const s=this._getSizeParams(),r=this.selectTechnique(e,s),h=r.program;if(null==h||0===this.nodes.length)return!0;const l=this._clipBox,c=!y(l,P,((e,i)=>e===i));c||(f(this.tempVec3,-1/0,-1/0,-1/0),h.setUniform3fv(\"uClipMin\",this.tempVec3),f(this.tempVec3,1/0,1/0,1/0),h.setUniform3fv(\"uClipMax\",this.tempVec3)),t.useProgram(h),r.bindPipelineState(t),h.setUniformMatrix4fv(\"uProjectionMatrix\",e.camera.projectionMatrix),i&&h.setUniform2f(\"nearFar\",e.camera.near,e.camera.far),e.isHighlightPass&&(this._bindParameters.inverseViewport[0]=1/e.camera.fullViewport[2],this._bindParameters.inverseViewport[1]=1/e.camera.fullViewport[3],this._bindParameters.highlightDepthTexture=e.highlightDepthTexture,C(h,this._bindParameters));const d=e.camera.pixelRatio;s.drawFixedSize&&h.setUniform2f(\"uPointScale\",s.fixedSize*d,e.camera.fullHeight);const u=this._slicePlaneEnabled?e.sliceHelper&&e.sliceHelper.plane:null;return this.nodes.forAll((i=>{if(0===i.coordinates.length||e.isHighlightPass&&!i.highlights)return;if(h.setUniform2f(\"uScreenMinMaxSize\",s.screenMinSize*d,W(i.isLeaf)*d),!s.drawFixedSize){const t=i.splatSize*this._scaleFactor;h.setUniform2f(\"uPointScale\",t*d,e.camera.fullHeight/d)}const m=i.origin;c&&(f(this.tempVec3,l[0]-m[0],l[1]-m[1],l[2]-m[2]),h.setUniform3fv(\"uClipMin\",this.tempVec3),f(this.tempVec3,l[3]-m[0],l[4]-m[1],l[5]-m[2]),h.setUniform3fv(\"uClipMax\",this.tempVec3)),n(this.tempMatrix4),o(this.tempMatrix4,this.tempMatrix4,m),a(this.tempMatrix4,e.camera.viewMatrix,this.tempMatrix4),h.setUniformMatrix4fv(\"uModelViewMatrix\",this.tempMatrix4),A(h,r.configuration,u,m),t.bindVAO(i.vao),e.isHighlightPass?this._renderHighlightFragments(t,i):t.drawArrays(0,0,i.coordinates.length/3)})),!0}_renderHighlightFragments(t,s){const r=s.highlights;if(e(r))return;let n=i(r[0].component),o=n+1;for(let e=1;e<r.length;e++){const s=i(r[e].component);if(s!==o){const e=o-n;e>0&&t.drawArrays(0,n,e),n=s}o=s+1}const a=o-n;a>0&&t.drawArrays(0,n,a)}set useFixedSizes(e){this._useFixedSizes!==e&&(this._useFixedSizes=e,this._requestRender())}get useFixedSizes(){return this._useFixedSizes}set scaleFactor(e){this._scaleFactor!==e&&(this._scaleFactor=e,this._requestRender())}get scaleFactor(){return this._scaleFactor}set minSizePx(e){this._minSizePx!==e&&(this._minSizePx=e,this._requestRender())}get minSizePx(){return this._minSizePx}set useRealWorldSymbolSizes(e){this._useRealWorldSymbolSizes!==e&&(this._useRealWorldSymbolSizes=e,this._requestRender())}get useRealWorldSymbolSizes(){return this._useRealWorldSymbolSizes}set size(e){this._size!==e&&(this._size=e,this._requestRender())}get size(){return this._size}set sizePx(e){this._sizePx!==e&&(this._sizePx=e,this._requestRender())}get sizePx(){return this._sizePx}set clippingBox(e){q(this._clipBox,e||P)}get slicePlane(){return this._slicePlaneEnabled}set slicePlane(e){this._slicePlaneEnabled!==e&&(this._slicePlaneEnabled=e,this._requestRender())}get intersectionHandlerId(){return this.layerUid}addNode(e){this.nodes.push(e),this._highlights.nodeAdded(e),this._requestRender()}removeNode(e){let i=null;return this.nodes.filterInPlace((s=>s.id!==e||(i=s,s.vao=t(s.vao),this._highlights.nodeRemoved(s),!1))),this._requestRender(),i}forEachNode(e){this.nodes.forAll(e)}removeAll(){this.nodes.forAll((e=>e.vao=t(e.vao))),this._highlights.removeAll(),this.nodes.clear(),this._requestRender()}highlight(e){return this._highlights.add(e)}addHighlight(e,i,t){e.highlights=K(e.highlights,i,t),this._requestRender()}removeHighlight(e,i){e.highlights=Q(e.highlights,i),this._requestRender()}_initNode(e,i){const t=e.rctx;i.vao=new O(t,B,k,{positions:N.createVertex(t,35044,i.coordinates),colors:N.createVertex(t,35044,i.rgb)})}_requestRender(){this._context&&this._context.requestRender()}_getSizeParams(){const e=this._useFixedSizes,i=e&&!this._useRealWorldSymbolSizes;return{drawScreenSpace:i,drawFixedSize:e,fixedSize:i?this._sizePx:this._size,screenMinSize:e?0:this._minSizePx}}selectTechnique(e,i){return this._techniqueConfig.drawScreenSize=i.drawScreenSpace,this._techniqueConfig.slicePlaneEnabled=this._slicePlaneEnabled,this._techniqueConfig.sceneHasOcludees=e.hasOccludees,this._techniqueConfig.output=2===e.pass?1:5===e.pass?4:0,this._techniqueRep.releaseAndAcquire(I,this._techniqueConfig,this._technique)}}function W(e){return e?256:64}function D(e,i,t,s,r){if(t.drawScreenSpace)return t.fixedSize*i*s;const n=W(r)*i*s;return t.drawFixedSize?Math.min(t.fixedSize/2,n):t.screenMinSize>0?Math.min(Math.max(t.screenMinSize*i*s,e/2),n):Math.min(e/2,n)}function G(e,i,t,s,r){return t.drawScreenSpace?0:D(e,i,t,s,r)}function $(e,i,t){return null==t&&(t=x()),t[0]=e.origin[0]+e.coordinates[3*i],t[1]=e.origin[1]+e.coordinates[3*i+1],t[2]=e.origin[2]+e.coordinates[3*i+2],t}function J(e){return s(e.component)?e.component:-1}function K(i,t,s){e(i)&&(i=[]);const r={component:t,id:s};i.push(r);const n=J(r);let o=i.length-1;for(;o>0&&n<J(i[o-1]);)[i[o-1],i[o]]=[i[o],i[o-1]],--o;return i}function Q(i,t){if(e(i))return i;const s=i.filter((e=>e.id!==t));return 0===s.length?null:s}!function(e){function i(e){return e.hasOwnProperty(\"splatSize\")}e.isInstanceOfNode=i}(T||(T={}));export{T as PointRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{result as t,forEach as i}from\"../../../core/asyncUtils.js\";import r from\"../../../core/Collection.js\";import s from\"../../../core/Logger.js\";import{unwrapOr as o,isSome as n,isNone as a,mapSome as d}from\"../../../core/maybe.js\";import{createAbortController as l,eachAlways as h,isAbortError as u,eachAlwaysValues as p,throwIfAborted as c}from\"../../../core/promiseUtils.js\";import{pt2px as _}from\"../../../core/screenUtils.js\";import{estimateSize as m,isArrayBuffer as g}from\"../../../core/typedArrayUtil.js\";import{getMetersPerVerticalUnitForSR as f}from\"../../../core/unitUtils.js\";import{property as y}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as b}from\"../../../core/accessorSupport/decorators/subclass.js\";import{d as w}from\"../../../chunks/vec3.js\";import{a as N}from\"../../../chunks/vec3f32.js\";import{projectBoundingRect as x}from\"../../../geometry/projection.js\";import{create as P}from\"../../../geometry/support/aaBoundingBox.js\";import{containsPoint as v,create as C}from\"../../../geometry/support/aaBoundingRect.js\";import{create as S,fromNormalAndOffset as I}from\"../../../geometry/support/plane.js\";import{makeDehydratedPoint as A}from\"../../../layers/graphics/dehydratedFeatures.js\";import k from\"../../../layers/support/CodedValue.js\";import\"../../../layers/support/domains.js\";import{unpackFieldNames as V}from\"../../../layers/support/fieldUtils.js\";import R from\"../../../layers/support/PromiseQueue.js\";import{getMetersPerUnit as L}from\"../../../symbols/support/unitConversionUtils.js\";import{LayerView3D as Q}from\"./LayerView3D.js\";import{PointCloudWorkerHandle as U}from\"./PointCloudWorkerHandle.js\";import{checkPointCloudLayerValid as j,checkPointCloudLayerCompatibleWithView as D}from\"./i3s/I3SUtil.js\";import{nodeDiff as F,sortFrontToBack as z,splitWorkEntries as M}from\"./i3s/LoDUtil.js\";import W from\"./i3s/PagedNodeIndex.js\";import{getSplatSizeAlgorithm as O,getFixedSizeAlgorithm as E,getRendererInfo as H,getFilterInfo as B,rendererUsesFixedSizes as G,getAttributeInfo as q}from\"./i3s/PointCloudRendererUtil.js\";import{getAttributeValues as T,readGeometry as $,elevationFromPositions as J}from\"./i3s/PointCloudWorkerUtil.js\";import{PointGraphic as K}from\"./i3s/PointGraphic.js\";import{PointRenderer as Y}from\"./i3s/PointRenderer.js\";import{PopupSceneLayerView as X}from\"./support/PopupSceneLayerView.js\";import{projectToBoundingBox as Z}from\"../support/extentUtils.js\";import{minimumDistancePlane as ee}from\"../support/orientedBoundingBox.js\";import{updatingProgress as te}from\"../support/updatingProperties.js\";import ie from\"../../layers/LayerView.js\";import{extractSafeScaleBounds as re,scaleBoundsPredicate as se}from\"../../support/layerViewUtils.js\";import{TaskPriority as oe}from\"../../support/Scheduler.js\";import ne from\"../../../layers/support/CodedValueDomain.js\";const ae=s.getLogger(\"esri.views.3d.layers.PointCloudLayerView3D\"),de=8,le=S();let he=class extends(X(Q(ie))){constructor(){super(...arguments),this.type=\"point-cloud-3d\",this.maximumPointCount=4e6,this.slicePlaneEnabled=!1,this._renderer=null,this._rendererAdded=!1,this._renderedNodes=new Set,this._nodeScales=new Map,this._updateViewNeeded=!0,this._lodFactor=1,this._maxLoggedBoxWarnings=5,this._pageMultiplier=1,this._nodeLoadEpoch=0,this._indexQueue=[],this._workQueue=new Array,this._idleQueue=new R,this._indexPagesLoading=new Map,this._loadingNodes=new Map,this._recalcWork=!0,this._layerIsVisible=!1,this._codedDomainPopulationPromise=null,this._codedDomainPopulationAbortController=null,this._totalWork=0,this._index=null,this._loadingInitNodePage=!1,this._nodeIdArray=[]}get pointScale(){const e=O(this.layer&&this.layer.renderer),t=1;return e&&null!=e.scaleFactor?e.scaleFactor:t}get useRealWorldSymbolSizes(){const e=E(this.layer&&this.layer.renderer),t=!1;return e&&null!=e.useRealWorldSymbolSizes?e.useRealWorldSymbolSizes:t}get pointSize(){const e=E(this.layer&&this.layer.renderer),t=0;return e&&null!=e.size?e.size:t}get inverseDensity(){const e=96;return this.layer&&this.layer.renderer?1*e/this.layer.renderer.pointsPerInch:5}get availableFields(){const e=H(this.layer),t=new Set;e.primaryAttribute&&t.add(e.primaryAttribute.name),e.modulationAttribute&&t.add(e.primaryAttribute.name);const i=B(this.layer);if(i)for(const r of i)t.add(r.attributeInfo.name);if(this.layer.outFields)for(const r of V(this.layer.fieldsIndex,this.layer.outFields))t.add(r);return Array.from(t)}get _clippingBox(){if(!this.view||!this.view.clippingArea)return null;const e=P(),t=this.view.renderSpatialReference;return Z(this.view.clippingArea,e,t)?e:null}get _elevationOffset(){const e=this.layer&&this.layer.elevationInfo;if(e&&\"absolute-height\"===e.mode){const t=f(this.layer.spatialReference),i=L(e.unit);return o(e.offset,0)*i/t}return 0}initialize(){const e=this.view.resourceController;this._worker=new U((t=>e.schedule(t))),this.addResolvingPromise(this._worker.promise),this._tmpPoint=A(0,0,0,this.layer.spatialReference),j(this.layer),D(this.layer,this.view),this._indexRequester=e.createStreamDataRequester(2),this._dataRequester=e.createStreamDataRequester(3),this._initRenderer();const t=this._initNodePages(),i=this.view.resourceController.memoryController;this._memCache=i.getMemCache(this.layer.uid),this.updatingHandles.add(this,\"_clippingBox\",(()=>this._setUpdateViewNeeded()),2),this.updatingHandles.add(this,\"_elevationOffset\",(()=>this._elevationOffsetChanged()),2),this.updatingHandles.add(this.layer,\"renderer\",(()=>this._rendererChanged()),2),this.updatingHandles.add(this.layer,\"filters\",(()=>this._reload()),2),this.updatingHandles.add(this.layer,\"outFields\",(()=>this._reload()),2),this.updatingHandles.add(this.layer,\"scaleRangeId\",(()=>this._setUpdateViewNeeded())),this.updatingHandles.add(this,\"clippingArea\",(()=>this._setUpdateViewNeeded()),2),this.updatingHandles.add(this.view.state,\"contentCamera\",(()=>this._setUpdateViewNeeded())),this.handles.add([this.view.basemapTerrain.on(\"scale-change\",(e=>this._scaleUpdateHandler(e))),i.events.on(\"quality-changed\",(()=>this._setUpdateViewNeeded()))]),this.addResolvingPromise(t),this.when((()=>{this.handles.add([e.scheduler.registerTask(oe.POINT_CLOUD_LAYER,this),e.scheduler.registerIdleStateCallbacks((()=>this._idleBegin()),(()=>this._idleEnd())),this.updatingHandles.add(this,\"suspended\",(e=>{e?this._clearNodeState():this._setUpdateViewNeeded()}),2)])}),(()=>{this.updatingHandles.removeAll(),this.handles.removeAll()}))}_setUpdateViewNeeded(){this._updateViewNeeded=!0,this._updateLoading()}destroy(){this.cancelLoading(),this._worker&&(this._worker.destroy(),this._worker=null),this._destroyRenderer(),this._memCache.destroy(),this._memCache=null,this._codedDomainPopulationAbortController&&(this._codedDomainPopulationAbortController.abort(),this._codedDomainPopulationAbortController=null),this._codedDomainPopulationPromise=null}_initRenderer(){this._renderer=new Y({createGraphic:(e,t,i)=>this._createGraphic(e,t,i)}),this._renderer.layerUid=this.layer.uid,this.updatingHandles.add(this,\"_clippingBox\",(e=>this._renderer.clippingBox=e),2),this.updatingHandles.add(this,\"suspended\",(e=>this._setPointsVisible(!e)),2),this.updatingHandles.add(this,\"pointScale\",(e=>this._renderer.scaleFactor=e),2),this._renderer.minSizePx=Math.sqrt(2),this.updatingHandles.add(this,\"useRealWorldSymbolSizes\",(e=>this._renderer.useRealWorldSymbolSizes=e),2),this.updatingHandles.add(this,\"pointSize\",(e=>{const t=_(e);this._renderer.size=e,this._renderer.sizePx=t}),2),this.updatingHandles.add(this,\"slicePlaneEnabled\",(e=>this._renderer.slicePlane=e),2),this.updatingHandles.add(this,\"inverseDensity\",(()=>this._setUpdateViewNeeded()),2),this.updatingHandles.add(this,\"maximumPointCount\",(()=>this._setUpdateViewNeeded()),2),this.updatingHandles.add(this.view,\"qualitySettings.sceneService.pointCloud.lodFactor\",(e=>{this._lodFactor=e,this._setUpdateViewNeeded()}),2)}_destroyRenderer(){this._renderer.removeAll(),this._setPointsVisible(!1)}_createGraphic(e,t,i){const r=n(e.pointIdFilterMap)?e.pointIdFilterMap[t]:t,s=this.view.computeMapPointFromVec3d(i),o=this._createGraphicAttributes(e,r);return new K({pointCloudMetadata:{nodeId:e.id,pointIndexInNode:t,attributePointIndexInNode:r,epoch:this._nodeLoadEpoch},geometry:s,attributes:o,layer:this.layer,sourceLayer:this.layer})}_createGraphicAttributes(e,t){const i={};for(const r of e.attributes)this._encodeGraphicAttribute(r.attributeInfo,r.values,t,i);return i}_encodeGraphicAttribute(e,t,i,r){const s=e.storageInfo&&e.storageInfo.attributeValues,o=s?s.valuesPerElement:1;if(1===o)r[e.name]=t[i];else if(\"UInt8\"===s.valueType&&o<=4){let s=0;const n=i*o;for(let e=n;e<n+o;e++)s=(s<<8)+t[e];r[e.name]=s}else r[e.name]=void 0}_setPointsVisible(e){e&&!this._rendererAdded?(this.view._stage.addRenderPlugin([4],this._renderer),this._rendererAdded=!0):!e&&this._rendererAdded&&(this.view._stage.removeRenderPlugin(this._renderer),this._rendererAdded=!1)}_rendererChanged(){this._renderer.useFixedSizes=G(this.layer.renderer),this._reload()}_reload(){this._clearNodeState(),this._memCache.clear(),this._setUpdateViewNeeded()}_elevationOffsetChanged(){this._clearNodeState(),this._memCache.clear(),this._initNodePages()}_scaleUpdateHandler(e){this.layer.minScale||this.layer.maxScale?x(e.extent,e.spatialReference,pe,this.layer.spatialReference)&&(this._nodeScales.forEach(((t,i)=>{if(!this._renderedNodes.has(i))return void this._nodeScales.delete(i);const r=this._index.getNode(i);v(pe,r.obb.center)&&this._nodeScales.set(i,e.scale)})),this._setUpdateViewNeeded()):this._nodeScales.clear()}displayNodes(e){this._workQueue=F([...this._renderedNodes],e,this._index),z(this._workQueue,this.view.state.contentCamera.viewForward,this._index),M(this._workQueue,de,this._index),this._updateQueues(),this._totalWork=this._computeWork(),this._updateLoading(),this._layerIsVisible=e.length>0||this._loadingInitNodePage,this.notifyChange(\"suspended\")}cancelLoading(){this._cancelNodeLoading(),this._cancelIndexLoading()}_cancelNodeLoading(){const e=new Array;this._loadingNodes.forEach((({abortController:t})=>e.push(t))),this._loadingNodes.clear();for(const t of e)t.abort();this._workQueue=[],this._idleQueue.cancelAll(),this._totalWork=this._computeWork(),this._updateLoading()}_updateQueues(){const e=new Set;this._workQueue.forEach((t=>t.load.forEach((t=>e.add(t)))));const t=new Array,i=new Map;this._loadingNodes.forEach(((r,s)=>{e.has(s)?i.set(s,r):t.push(r)})),this._loadingNodes=i;for(const{abortController:r}of t)r.abort();this._workQueue=this._workQueue.filter((e=>{for(const t of e.load)if(this._loadingNodes.has(t))return this._recalcWork=!0,!1;return!0})),this._totalWork=this._computeWork(),this._updateLoading()}_cancelIndexLoading(){this._indexQueue=[],this._indexPagesLoading.forEach((({abortController:e})=>e.abort())),this._indexPagesLoading.clear(),this._totalWork=this._computeWork(),this._updateLoading()}_clearNodeState(){this._nodeLoadEpoch++,this._renderedNodes.forEach((e=>this._removeFromRenderer(e))),this._cancelNodeLoading()}_idleBegin(){this._setUpdateViewNeeded()}_idleEnd(){this._setUpdateViewNeeded()}get running(){return this.suspended?this._updateViewNeeded:this._updateViewNeeded||this._indexQueue.length>0||this._workQueue.length>0||this._idleQueue.length>0}runTask(e){if(this.suspended){if(this._updateViewNeeded){this._updateViewNeeded=!1;const e=this._isRootNodeVisible();e!==this._layerIsVisible&&(this._layerIsVisible=e,this.notifyChange(\"suspended\")),this._updateLoading()}}else{for(e.run((()=>this._updateWorkQueues()));this._indexQueue.length>0&&e.run((()=>this._processIndexQueue())););for(this._processWorkQueue(e);this._idleQueue.length>0&&e.run((()=>this._idleQueue.process())););}}_processIndexQueue(){const e=this._indexQueue.shift(),t=this._loadNodePage(e);return this._indexPagesLoading.set(e,t),t.promise.then((t=>{this._index.addPage(e,t,this._elevationOffset),this._setUpdateViewNeeded()})).then((()=>{this._indexPagesLoading.delete(e)}),(()=>{this._indexPagesLoading.delete(e)})),!0}_processWorkQueue(e){for(;!e.done;){const t=this._scheduleWorkEntry();if(a(t))return;this._processWorkEntry(t),e.madeProgress()}}_scheduleWorkEntry(){let e=this._workQueue.length;for(;e--;){const e=this._workQueue.shift();if(!e.remove.find((e=>!this._renderedNodes.has(e))))return e;this._workQueue.push(e)}return null}_processWorkEntry(e){if(0!==e.load.length)Promise.all(e.load.map((e=>{const t=l(),i=this._memCache.pop(e.toString());return n(i)?this._loadingNodes.set(e,{abortController:t,promise:Promise.resolve(i)}):this._loadingNodes.has(e)||this._loadingNodes.set(e,{abortController:t,promise:this.loadNode(e,t.signal)}),this._loadingNodes.get(e).promise}))).then((t=>{for(let i=0;i<e.load.length;i++)if(t[i]){const r=this._setupRendererData(e.load[i],t[i]);this._addToRenderer(r)}for(const i of e.remove)this._removeFromRenderer(i)})).catch((()=>{})).then((()=>{for(const t of e.load)this._loadingNodes.delete(t);this._updateLoading(),this._recalcWork&&0===this._idleQueue.length&&0===this._indexQueue.length&&0===this._loadingNodes.size&&(this._recalcWork=!1,this._setUpdateViewNeeded())})),this._updateLoading();else for(const t of e.remove)this._removeFromRenderer(t)}async populateClassCodeCodedDomain(e,i){const r=\"CLASS_CODE\",s=this.layer.fieldsIndex.get(r);if(!s||s.domain)return;if(-1===e.indexOf(s.name))return;const o=await t(this.layer.queryCachedStatistics(r,{signal:i}));if(!1===o.ok)return;const n=o.value,a=n&&n.labels&&n.labels.labels;a&&Array.isArray(a)&&(s.domain=new ne({name:\"CLASS_CODE\",codedValues:a.map((e=>new k({code:e.value,name:e.label})))}))}async prepareFetchPopupFeatures(e){return this._codedDomainPopulationPromise||(this._codedDomainPopulationAbortController=l(),this._codedDomainPopulationPromise=this.populateClassCodeCodedDomain(e,this._codedDomainPopulationAbortController.signal).then((()=>{this._codedDomainPopulationAbortController=null}))),this._codedDomainPopulationPromise}async whenGraphicAttributes(e,t){const r=this._splitGraphicsPerNode(e),s=this.layer.attributeStorageInfo,o=t.map((e=>q(s,e))),n=async(e,t)=>{const r=this._index.getNode(t);await i(o,(async t=>{const i=t.useElevation?await this._loadElevationAttributeFromGeometry(r.resourceId):await this._loadAndParseAttribute(r,t);if(i)for(const r of e)if(this._isValidPointGraphic(r)){const e=r.pointCloudMetadata.attributePointIndexInNode;this._encodeGraphicAttribute(t,i,e,r.attributes)}}))},a=[];return r.forEach(((e,t)=>{a.push(n(e,t))})),await h(a),e}_isValidPointGraphic(e){return e instanceof K&&e.pointCloudMetadata&&e.pointCloudMetadata.epoch===this._nodeLoadEpoch}_splitGraphicsPerNode(e){const t=new Map;for(const i of e){if(!this._isValidPointGraphic(i))continue;const e=i.pointCloudMetadata,r=t.get(e.nodeId);r?r.push(i):t.set(e.nodeId,[i])}return t}async _loadAndParseAttribute(e,t){const i=await this._loadAttribute(e.resourceId,t,null);return n(i)?T({attributeInfo:t,buffer:i},null,e.vertexCount):null}async _loadElevationAttributeFromGeometry(e){const t=this.layer.store.defaultGeometrySchema,i=$(t,await this._loadGeometry(e,null));return J(i,i.length/3)}highlight(e){if(!e)return{remove(){}};const t=r.isCollection(e)?e.toArray():Array.isArray(e)?e:[e];return this._renderer.highlight(t.map((e=>this._graphicToPointDefinition(e))))}_graphicToPointDefinition(e){if(!this._isValidPointGraphic(e))return null;const{nodeId:t,pointIndexInNode:i}=e.pointCloudMetadata;return null!=t&&null!=i?{nodeId:t,pointId:i}:null}_computeWork(){let e=0;for(const t of this._workQueue)e+=t.load.length+t.remove.length;return e+=this._loadingNodes.size,e+=(this._indexQueue.length+this._indexPagesLoading.size)*this._index.pageSize,e+=this._loadingInitNodePage?100:0,e+=this._updateViewNeeded?100:0,e}get updatingProgressValue(){if(this.suspended)return this._updateViewNeeded?0:1;const e=this._computeWork();return 1-Math.min(this._totalWork,e)/this._totalWork}_updateLoading(){this.notifyChange(\"updating\"),this.notifyChange(\"updatingProgressValue\")}canResume(){return super.canResume()&&this._layerIsVisible}isUpdating(){return this.suspended?this._updateViewNeeded:this._computeWork()>0}_initNodePages(){const e=this.layer.store.index,t=e.nodesPerPage||e.nodePerIndexBlock;return this._index=new W(this.layer.spatialReference,this.view.renderCoordsHelper.spatialReference,t),this._cancelIndexLoading(),this._traverseVisible=this._index.createVisibilityTraverse(),this._loadingInitNodePage=!0,this._layerIsVisible=!0,this.notifyChange(\"suspended\"),this._updateLoading(),this._pageMultiplier=null!=e.nodesPerPage?1:e.nodePerIndexBlock,this._loadNodePage(0).promise.then((e=>{this._index.addPage(0,e,this._elevationOffset),this._loadingInitNodePage=!1,this._setUpdateViewNeeded()}))}_loadNodePage(e){const t=l(),i=`${this.baseUrl}/nodepages/${e*this._pageMultiplier}`;return{promise:this._requestNodePage(i,t.signal).then((t=>t.nodes.map(((t,i)=>({resourceId:null!=t.resourceId?t.resourceId:e*this._index.pageSize+i,obb:t.obb,firstChild:t.firstChild,childCount:t.childCount,vertexCount:null!=t.vertexCount?t.vertexCount:t.pointCount,lodThreshold:null!=t.lodThreshold?t.lodThreshold:t.effectiveArea}))))),abortController:t}}_updateWorkQueues(){if(!this._updateViewNeeded)return!1;let e=this.inverseDensity/this._lodFactor*this._getLodMemoryFactor();const t=this.maximumPointCount*this._lodFactor*this._getLodMemoryFactor();let i=this._computeNodesForMinimumDensity(e),r=this._computePointCount(i),s=Math.sqrt(r/(.75*t));for(;r>t;)e*=s,i=this._computeNodesForMinimumDensity(e),r=this._computePointCount(i),s=Math.sqrt(2);return this.displayNodes(i),this._updateViewNeeded=!1,this._updateLoading(),!0}_computePointCount(e){let t=0;for(let i=0;i<e.length;i++){const r=this._index.getNode(e[i]);r&&(t+=r.vertexCount)}return t}_getLodMemoryFactor(){return this.view.resourceController.memoryController.memoryFactor}_isRootNodeVisible(){let e=!1;return this._traverseVisible({frustum:this.view.state.contentCamera.frustum,clippingBox:this._clippingBox},{predicate:(t,i,r)=>(e=r,!1),pageMiss:()=>{}}),e}_computeNodesForMinimumDensity(e){const t=this.view.state.contentCamera,i=t.frustum,r=this._clippingBox,s=t.viewForward,o=w(s,t.eye),n=I(s,-o,le),a=t.perScreenPixelRatio/2,d=e*e,l=this._nodeIdArray;l.length=0;const{minScale:h,maxScale:u}=re(this.layer),p=0===h&&0===u?e=>l.push(e):e=>{const t=this._getScale(e);se(t,h,u)&&l.push(e)};return this._traverseVisible({frustum:i,clippingBox:r},{predicate:(e,t,i)=>{if(!i)return!1;if(0===t.childCount)return p(e),!1;const r=this._index.getRenderObb(e);return!(this._computeAveragePixelArea(r,t.lodThreshold,t.vertexCount,n,a)<=d)||(p(e),!1)},pageMiss:(e,t)=>{p(e),this._indexQueue.indexOf(t)<0&&this._indexQueue.push(t)}}),l}_getScale(e){let t=this._nodeScales.get(e);if(null==t){const i=this._index.getNode(e).obb.center;this._tmpPoint.x=i[0],this._tmpPoint.y=i[1],this._tmpPoint.z=i[2],t=this.view.basemapTerrain.getScale(this._tmpPoint),this._nodeScales.set(e,t)}return t}_computeAveragePixelArea(e,t,i,r,s){const o=1e-7,n=Math.max(o,ee(e,r));return t/(n*n)/(4*s*s)/i}loadNode(e,t){try{return this.loadNodeAsync(e,t)}catch(i){throw u(i)||ae.error(i),i}}async loadAdditionalUserAttributes(e,t,i){const r=this.layer.outFields;if(!r)return[];const s=V(this.layer.fieldsIndex,r),o=new Set(e.map((e=>n(e)?e.name:null))),a=this.layer.attributeStorageInfo,l=[];for(const n of s){if(o.has(n))continue;const e=q(a,n);e&&l.push(t(e))}const h=await p(l);return c(i),d(h,(e=>e))}async loadNodeAsync(e,t){const i=this._index.getNode(e),r=H(this.layer),s=B(this.layer),o=i.resourceId,d=async e=>{if(a(e))return null;if(e.useElevation)return{attributeInfo:e,buffer:null};const i=await this._loadAttribute(o,e,t);return n(i)?{attributeInfo:e,buffer:i}:null};return this._idleQueue.push((async()=>{const i=this._loadGeometry(o,t),{primaryAttribute:n,modulationAttribute:a}=r,l=d(n),h=d(a),u=s.map((e=>e.attributeInfo)),p=u.map((e=>d(e))),_=this.loadAdditionalUserAttributes([n,a,...u],d,t),[m,g,f,y,b]=await Promise.all([i,l,h,Promise.all(p),_]);c(t);const w={geometryBuffer:m,primaryAttributeData:g,modulationAttributeData:f,filterAttributesData:y,userAttributesData:b,schema:this.layer.store.defaultGeometrySchema,rendererInfo:r,filterInfo:s,obb:this._index.getRenderObb(e),elevationOffset:this._elevationOffset,inSR:this.layer.spatialReference.toJSON(),outSR:this.view.renderCoordsHelper.spatialReference.toJSON()};return this._worker.invoke(w,t)}),t)}async _loadGeometry(e,t){return this._requestData(`${this.baseUrl}/nodes/${e}/geometries/0`,t)}async _loadAttribute(e,t,i){if(a(t)||!t.storageInfo)return null;const r=t.storageInfo.key;return this._requestData(`${this.baseUrl}/nodes/${e}/attributes/${r}`,i)}_requestNodePage(e,t){const i={f:\"json\",token:this.layer.apiKey};return this._indexRequester.request(e,\"json\",{query:i,signal:t})}_requestData(e,t){return this._dataRequester.request(e,\"binary\",{query:{token:this.layer.apiKey},signal:t})}_removeFromRenderer(e){if(this._renderedNodes.has(e)){const t=this._renderer.removeNode(e);this._renderedNodes.delete(e),this._nodeScales.delete(e),this._memCache.put(t.id.toString(),t,ue(t))}}_addToRenderer(e){this._renderedNodes.has(e.id)||(this._renderedNodes.add(e.id),this._renderer.addNode(e))}_setupRendererData(e,t){const i=this._index.getNode(e),r=Math.sqrt(i.lodThreshold/i.vertexCount),s=this._index.getRenderObb(e);if(Y.isInstanceOfNode(t))return t.splatSize=r,t.obb=s,t.origin=N(t.obb.center),t;const o=.01*Math.max(s.halfSize[0],s.halfSize[1],s.halfSize[2]);if(t.obb.halfSize[0]>s.halfSize[0]+o||t.obb.halfSize[1]>s.halfSize[1]+o||t.obb.halfSize[2]>s.halfSize[2]+o){if(this._maxLoggedBoxWarnings>0){const i=e=>`[${e.halfSize[0]}, ${e.halfSize[1]}, ${e.halfSize[2]}]`;ae.warn(`Node ${e} reported bounding box too small. got ${i(s)} but points cover ${i(t.obb)}`),0==--this._maxLoggedBoxWarnings&&ae.warn(\"  Too many bounding box errors, stopping reporting for this layer.\")}this._index.setRenderObb(e,t.obb)}return{id:e,coordinates:t.points,origin:N(s.center),rgb:t.rgb,attributes:t.attributes,pointIdFilterMap:t.pointIdFilterMap,highlights:null,splatSize:r,obb:s,isLeaf:0===i.childCount}}getUsedMemory(){let e=0;return this._renderer.forEachNode((t=>{e+=ce,e+=m(t.coordinates);for(const i of t.attributes){const t=i.values;g(t.buffer)&&(e+=m(t))}})),e}getUnloadedMemory(){const e=this._renderedNodes.size;if(e<4)return 0;const t=[...this._renderedNodes].reduce(((e,t)=>e+this._index.getNode(t).vertexCount));let i=this._loadingNodes.size;for(let r=0;r<this._workQueue.length;r++)i+=this._workQueue[r].load.length,i-=this._workQueue[r].remove.length;if(i<0)return 0;return i*t/e*((this.getUsedMemory()-e*ce)/t)+i*ce}ignoresMemoryFactor(){return!1}get performanceInfo(){return{nodes:this._renderedNodes.size,displayedNumberOfFeatures:[...this._renderedNodes].reduce(((e,t)=>e+this._index.getNode(t).vertexCount),0),maximumNumberOfFeatures:this.maximumPointCount,totalNumberOfFeatures:-1,core:null,\"Loading Nodes\":this._loadingNodes.size,\"Index Queue\":this._indexQueue.length,\"Work Queue\":this._workQueue.length,\"Idle Queue\":this._idleQueue.length}}get test(){return{index:this._index,visibleNodes:this._renderedNodes}}};function ue(e){return 5*e.coordinates.length+128}e([y()],he.prototype,\"layer\",void 0),e([y({readOnly:!0,aliasOf:\"layer.parsedUrl.path\"})],he.prototype,\"baseUrl\",void 0),e([y({readOnly:!0})],he.prototype,\"pointScale\",null),e([y({readOnly:!0})],he.prototype,\"useRealWorldSymbolSizes\",null),e([y({readOnly:!0})],he.prototype,\"pointSize\",null),e([y({readOnly:!0})],he.prototype,\"inverseDensity\",null),e([y()],he.prototype,\"maximumPointCount\",void 0),e([y({readOnly:!0})],he.prototype,\"availableFields\",null),e([y({readOnly:!0})],he.prototype,\"_clippingBox\",null),e([y({readOnly:!0})],he.prototype,\"_elevationOffset\",null),e([y({type:Boolean})],he.prototype,\"slicePlaneEnabled\",void 0),e([y()],he.prototype,\"updating\",void 0),e([y(te)],he.prototype,\"updatingProgress\",void 0),e([y({readOnly:!0})],he.prototype,\"updatingProgressValue\",null),he=e([b(\"esri.views.3d.layers.PointCloudLayerView3D\")],he);const pe=C(),ce=160;var _e=he;export default _e;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as o}from\"../../../core/JSONSupport.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";var s;let p=s=class extends o{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new s({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};e([r({type:String,json:{write:!0}})],p.prototype,\"field\",void 0),e([r({type:Number,nonNullable:!0,json:{write:!0}})],p.prototype,\"minValue\",void 0),e([r({type:Number,nonNullable:!0,json:{write:!0}})],p.prototype,\"maxValue\",void 0),p=s=e([t(\"esri.renderers.support.pointCloud.ColorModulation\")],p);var i=p;export default i;export{p as ColorModulation};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import{JSONMap as r}from\"../../../core/jsonMap.js\";import{JSONSupport as e}from\"../../../core/JSONSupport.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";const p=new r({pointCloudFixedSizeAlgorithm:\"fixed-size\",pointCloudSplatAlgorithm:\"splat\"});let i=class extends e{};o([s({type:p.apiValues,readOnly:!0,nonNullable:!0,json:{type:p.jsonValues,read:!1,write:p.write}})],i.prototype,\"type\",void 0),i=o([t(\"esri.renderers.support.pointCloud.PointSizeAlgorithm\")],i);var a=i;export default a;export{i as PointSizeAlgorithm,p as typeKebabDictionary};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{enumeration as r}from\"../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import t from\"./PointSizeAlgorithm.js\";var i;let p=i=class extends t{constructor(){super(...arguments),this.type=\"fixed-size\",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new i({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};e([r({pointCloudFixedSizeAlgorithm:\"fixed-size\"})],p.prototype,\"type\",void 0),e([o({type:Number,nonNullable:!0,json:{write:!0}})],p.prototype,\"size\",void 0),e([o({type:Boolean,json:{write:!0}})],p.prototype,\"useRealWorldSymbolSizes\",void 0),p=i=e([s(\"esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm\")],p);var l=p;export default l;export{p as PointSizeFixedSizeAlgorithm};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{enumeration as t}from\"../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"./PointSizeAlgorithm.js\";var p;let c=p=class extends s{constructor(){super(...arguments),this.type=\"splat\",this.scaleFactor=1}clone(){return new p({scaleFactor:this.scaleFactor})}};o([t({pointCloudSplatAlgorithm:\"splat\"})],c.prototype,\"type\",void 0),o([r({type:Number,value:1,nonNullable:!0,json:{write:!0}})],c.prototype,\"scaleFactor\",void 0),c=p=o([e(\"esri.renderers.support.pointCloud.PointSizeSplatAlgorithm\")],c);var a=c;export default a;export{c as PointSizeSplatAlgorithm};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport i from\"./PointSizeAlgorithm.js\";import t from\"./PointSizeFixedSizeAlgorithm.js\";import o from\"./PointSizeSplatAlgorithm.js\";const e={key:\"type\",base:i,typeMap:{\"fixed-size\":t,splat:o}};export{e as pointSizeAlgorithmTypes};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import{strict as e,JSONMap as r}from\"../core/jsonMap.js\";import{JSONSupport as t}from\"../core/JSONSupport.js\";import{clone as i}from\"../core/lang.js\";import{property as n}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/has.js\";import\"../core/Logger.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import l from\"./support/pointCloud/ColorModulation.js\";import{pointSizeAlgorithmTypes as p}from\"./support/pointCloud/pointSizeAlgorithmTypeUtils.js\";const u=e()({pointCloudClassBreaksRenderer:\"point-cloud-class-breaks\",pointCloudRGBRenderer:\"point-cloud-rgb\",pointCloudStretchRenderer:\"point-cloud-stretch\",pointCloudUniqueValueRenderer:\"point-cloud-unique-value\"});let c=class extends t{constructor(o){super(o),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(\".clone() is not implemented for \"+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:i(this.pointSizeAlgorithm),colorModulation:i(this.colorModulation),pointsPerInch:i(this.pointsPerInch)}}};o([n({type:u.apiValues,readOnly:!0,nonNullable:!0,json:{type:u.jsonValues,read:!1,write:u.write}})],c.prototype,\"type\",void 0),o([n({types:p,json:{write:!0}})],c.prototype,\"pointSizeAlgorithm\",void 0),o([n({type:l,json:{write:!0}})],c.prototype,\"colorModulation\",void 0),o([n({json:{write:!0},nonNullable:!0,type:Number})],c.prototype,\"pointsPerInch\",void 0),c=o([s(\"esri.renderers.PointCloudRenderer\")],c),function(o){o.fieldTransformTypeKebabDict=new r({none:\"none\",lowFourBit:\"low-four-bit\",highFourBit:\"high-four-bit\",absoluteValue:\"absolute-value\",moduloTen:\"modulo-ten\"})}(c||(c={}));var a=c;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{clone as r}from\"../core/lang.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/has.js\";import\"../core/Logger.js\";import{enumeration as t}from\"../core/accessorSupport/decorators/enumeration.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import p from\"./PointCloudRenderer.js\";import i from\"./support/LegendOptions.js\";import n from\"./visualVariables/support/ColorStop.js\";var l;let d=l=class extends p{constructor(e){super(e),this.type=\"point-cloud-stretch\",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new l({...this.cloneProperties(),field:r(this.field),fieldTransformType:r(this.fieldTransformType),stops:r(this.stops),legendOptions:r(this.legendOptions)})}};e([t({pointCloudStretchRenderer:\"point-cloud-stretch\"})],d.prototype,\"type\",void 0),e([o({json:{write:!0},type:String})],d.prototype,\"field\",void 0),e([o({type:i,json:{write:!0}})],d.prototype,\"legendOptions\",void 0),e([o({type:p.fieldTransformTypeKebabDict.apiValues,json:{type:p.fieldTransformTypeKebabDict.jsonValues,read:p.fieldTransformTypeKebabDict.read,write:p.fieldTransformTypeKebabDict.write}})],d.prototype,\"fieldTransformType\",void 0),e([o({type:[n],json:{write:!0}})],d.prototype,\"stops\",void 0),d=l=e([s(\"esri.renderers.PointCloudStretchRenderer\")],d);var a=d;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Error.js\";import{isSome as s}from\"../../../../core/maybe.js\";import\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{unpackFieldNames as o,populateMissingFields as p}from\"../../../../layers/support/fieldUtils.js\";import{getFetchPopupTemplate as a,getRequiredFields as i}from\"../../../layers/support/popupUtils.js\";const c=c=>{let u=class extends c{_validateFetchPopupFeatures(e){const{layer:s}=this,{popupEnabled:t}=s;if(!t)return new r(\"scenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{layer:s});return a(s,e)?void 0:new r(\"scenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:s})}async prepareFetchPopupFeatures(e){}async fetchPopupFeatures(e,r){const t=this._validateFetchPopupFeatures(r);if(t)return Promise.reject(t);const c=s(r)?r.clientGraphics:null;if(!c||0===c.length)return Promise.resolve([]);const u=[],n=[],l=\"scene\"===this.layer.type&&s(this.layer.associatedLayer)?this.layer.associatedLayer:this.layer,h=o(this.layer.fieldsIndex,await i(l,a(this.layer,r)));await this.prepareFetchPopupFeatures(h);const y=new Set;for(const s of c)p(h,s,y)?n.push(s):u.push(s);return 0===n.length?Promise.resolve(u):this.whenGraphicAttributes(n,[...y]).catch((()=>n)).then((e=>u.concat(e)))}};return u=e([t(\"esri.views.3d.layers.support.PopupSceneLayerView\")],u),u};export{c as PopupSceneLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import r from\"../../../Color.js\";import{JSONSupport as e}from\"../../../core/JSONSupport.js\";import{clone as t}from\"../../../core/lang.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import{Integer as i}from\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import{subclass as p}from\"../../../core/accessorSupport/decorators/subclass.js\";var a;let l=a=class extends e{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new a({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:t(this.color)})}};o([s({type:String,json:{write:!0}})],l.prototype,\"description\",void 0),o([s({type:String,json:{write:!0}})],l.prototype,\"label\",void 0),o([s({type:Number,json:{read:{source:\"classMinValue\"},write:{target:\"classMinValue\"}}})],l.prototype,\"minValue\",void 0),o([s({type:Number,json:{read:{source:\"classMaxValue\"},write:{target:\"classMaxValue\"}}})],l.prototype,\"maxValue\",void 0),o([s({type:r,json:{type:[i],write:!0}})],l.prototype,\"color\",void 0),l=a=o([p(\"esri.renderers.support.pointCloud.ColorClassBreakInfo\")],l);var c=l;export default c;export{l as ColorClassBreakInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{clone as o}from\"../core/lang.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/has.js\";import\"../core/Logger.js\";import{enumeration as s}from\"../core/accessorSupport/decorators/enumeration.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import i from\"./PointCloudRenderer.js\";import p from\"./support/LegendOptions.js\";import l from\"./support/pointCloud/ColorClassBreakInfo.js\";var n;let a=n=class extends i{constructor(e){super(e),this.type=\"point-cloud-class-breaks\",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new n({...this.cloneProperties(),field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:o(this.colorClassBreakInfos),legendOptions:o(this.legendOptions)})}};e([s({pointCloudClassBreaksRenderer:\"point-cloud-class-breaks\"})],a.prototype,\"type\",void 0),e([r({json:{write:!0},type:String})],a.prototype,\"field\",void 0),e([r({type:p,json:{write:!0}})],a.prototype,\"legendOptions\",void 0),e([r({type:i.fieldTransformTypeKebabDict.apiValues,json:{type:i.fieldTransformTypeKebabDict.jsonValues,read:i.fieldTransformTypeKebabDict.read,write:i.fieldTransformTypeKebabDict.write}})],a.prototype,\"fieldTransformType\",void 0),e([r({type:[l],json:{write:!0}})],a.prototype,\"colorClassBreakInfos\",void 0),a=n=e([t(\"esri.renderers.PointCloudClassBreaksRenderer\")],a);var d=a;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import r from\"../../../Color.js\";import{JSONSupport as e}from\"../../../core/JSONSupport.js\";import{clone as t}from\"../../../core/lang.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import{Integer as p}from\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";var l;let c=l=class extends e{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new l({description:this.description,label:this.label,values:t(this.values),color:t(this.color)})}};o([s({type:String,json:{write:!0}})],c.prototype,\"description\",void 0),o([s({type:String,json:{write:!0}})],c.prototype,\"label\",void 0),o([s({type:[String],json:{write:!0}})],c.prototype,\"values\",void 0),o([s({type:r,json:{type:[p],write:!0}})],c.prototype,\"color\",void 0),c=l=o([i(\"esri.renderers.support.pointCloud.ColorUniqueValueInfo\")],c);var n=c;export default n;export{c as ColorUniqueValueInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{clone as o}from\"../core/lang.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/has.js\";import\"../core/Logger.js\";import{enumeration as t}from\"../core/accessorSupport/decorators/enumeration.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import i from\"./PointCloudRenderer.js\";import p from\"./support/LegendOptions.js\";import n from\"./support/pointCloud/ColorUniqueValueInfo.js\";var l;let u=l=class extends i{constructor(e){super(e),this.type=\"point-cloud-unique-value\",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new l({...this.cloneProperties(),field:o(this.field),fieldTransformType:o(this.fieldTransformType),colorUniqueValueInfos:o(this.colorUniqueValueInfos),legendOptions:o(this.legendOptions)})}};e([t({pointCloudUniqueValueRenderer:\"point-cloud-unique-value\"})],u.prototype,\"type\",void 0),e([r({json:{write:!0},type:String})],u.prototype,\"field\",void 0),e([r({type:i.fieldTransformTypeKebabDict.apiValues,json:{type:i.fieldTransformTypeKebabDict.jsonValues,read:i.fieldTransformTypeKebabDict.read,write:i.fieldTransformTypeKebabDict.write}})],u.prototype,\"fieldTransformType\",void 0),e([r({type:[n],json:{write:!0}})],u.prototype,\"colorUniqueValueInfos\",void 0),e([r({type:p,json:{write:!0}})],u.prototype,\"legendOptions\",void 0),u=l=e([s(\"esri.renderers.PointCloudUniqueValueRenderer\")],u);var a=u;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as o}from\"../../../../core/maybe.js\";import r from\"../../../../renderers/PointCloudClassBreaksRenderer.js\";import t from\"../../../../renderers/PointCloudStretchRenderer.js\";import n from\"../../../../renderers/PointCloudUniqueValueRenderer.js\";import{createGeometryIndexFromSchema as l,createTypedView as i,readBinaryAttribute as s}from\"./I3SBinaryReader.js\";import{decodeXYZ as f}from\"./LEPCC.js\";function u(e,o,l,i){const{rendererJSON:s,isRGBRenderer:f}=e;let u=null,c=null;if(o&&f)u=o;else if(o&&\"pointCloudUniqueValueRenderer\"===s.type){c=n.fromJSON(s);const e=c.colorUniqueValueInfos;u=new Uint8Array(3*i);const r=p(c.fieldTransformType);for(let t=0;t<i;t++){const n=(r?r(o[t]):o[t])+\"\";for(let o=0;o<e.length;o++)if(e[o].values.indexOf(n)>=0){u[3*t]=e[o].color.r,u[3*t+1]=e[o].color.g,u[3*t+2]=e[o].color.b;break}}}else if(o&&\"pointCloudStretchRenderer\"===s.type){c=t.fromJSON(s);const e=c.stops;u=new Uint8Array(3*i);const r=p(c.fieldTransformType);for(let t=0;t<i;t++){const n=r?r(o[t]):o[t],l=e.length-1;if(n<e[0].value)u[3*t]=e[0].color.r,u[3*t+1]=e[0].color.g,u[3*t+2]=e[0].color.b;else if(n>=e[l].value)u[3*t]=e[l].color.r,u[3*t+1]=e[l].color.g,u[3*t+2]=e[l].color.b;else for(let o=1;o<e.length;o++)if(n<e[o].value){const r=(n-e[o-1].value)/(e[o].value-e[o-1].value);u[3*t]=e[o].color.r*r+e[o-1].color.r*(1-r),u[3*t+1]=e[o].color.g*r+e[o-1].color.g*(1-r),u[3*t+2]=e[o].color.b*r+e[o-1].color.b*(1-r);break}}}else if(o&&\"pointCloudClassBreaksRenderer\"===s.type){c=r.fromJSON(s);const e=c.colorClassBreakInfos;u=new Uint8Array(3*i);const t=p(c.fieldTransformType);for(let r=0;r<i;r++){const n=t?t(o[r]):o[r];for(let o=0;o<e.length;o++)if(n>=e[o].minValue&&n<=e[o].maxValue){u[3*r]=e[o].color.r,u[3*r+1]=e[o].color.g,u[3*r+2]=e[o].color.b;break}}}else{u=new Uint8Array(3*i);for(let e=0;e<u.length;e++)u[e]=255}if(l&&c&&c.colorModulation){const e=c.colorModulation.minValue,o=c.colorModulation.maxValue,r=.3;for(let t=0;t<i;t++){const n=l[t],i=n>=o?1:n<=e?r:r+(1-r)*(n-e)/(o-e);u[3*t]=i*u[3*t],u[3*t+1]=i*u[3*t+1],u[3*t+2]=i*u[3*t+2]}}return u}function c(o,r){if(null==o.encoding||\"\"===o.encoding){const t=l(r,o);if(e(t.vertexAttributes.position))return;const n=i(r,t.vertexAttributes.position),s=t.header.fields,f=[s.offsetX,s.offsetY,s.offsetZ],u=[s.scaleX,s.scaleY,s.scaleZ],c=n.length/3,a=new Float64Array(3*c);for(let e=0;e<c;e++)a[3*e]=n[3*e]*u[0]+f[0],a[3*e+1]=n[3*e+1]*u[1]+f[1],a[3*e+2]=n[3*e+2]*u[2]+f[2];return a}if(\"lepcc-xyz\"===o.encoding)return f(r).result}function a(e,r,t){return o(e)&&e.attributeInfo.useElevation?d(r,t):o(e)?s(e.attributeInfo.storageInfo,e.buffer,t):null}function d(e,o){const r=new Float64Array(o);for(let t=0;t<o;t++)r[t]=e[3*t+2];return r}function m(e,o,r,t,n){const l=e.length/3;let i=0;for(let s=0;s<l;s++){let l=!0;for(let e=0;e<t.length&&l;e++){const{filterJSON:o}=t[e],r=n[e].values[s];switch(o.type){case\"pointCloudValueFilter\":{const e=\"exclude\"===o.mode;-1!==o.values.indexOf(r)===e&&(l=!1);break}case\"pointCloudBitfieldFilter\":{const e=b(o.requiredSetBits),t=b(o.requiredClearBits);(r&e)===e&&0==(r&t)||(l=!1);break}case\"pointCloudReturnFilter\":{const e=15&r,t=r>>>4&15,n=t>1,i=1===e,s=e===t;let f=!1;for(const r of o.includedReturns)if(\"last\"===r&&s||\"firstOfMany\"===r&&i&&n||\"lastOfMany\"===r&&s&&n||\"single\"===r&&!n){f=!0;break}f||(l=!1);break}}}l&&(r[i]=s,e[3*i]=e[3*s],e[3*i+1]=e[3*s+1],e[3*i+2]=e[3*s+2],o[3*i]=o[3*s],o[3*i+1]=o[3*s+1],o[3*i+2]=o[3*s+2],i++)}return i}function p(e){return null==e||\"none\"===e?null:\"low-four-bit\"===e?e=>15&e:\"high-four-bit\"===e?e=>(240&e)>>4:\"absolute-value\"===e?e=>Math.abs(e):\"modulo-ten\"===e?e=>e%10:null}function b(e){let o=0;for(const r of e||[])o|=1<<r;return o}export{d as elevationFromPositions,u as evaluateRenderer,m as filterInPlace,a as getAttributeValues,c as readGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{Slice as e}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{OutputHighlight as i}from\"../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js\";import{RgbaFloatEncoding as o}from\"../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";import{glsl as t}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as a}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function r(r){const n=new a,d=0===r.output,c=1===r.output,s=4===r.output;return n.extensions.add(\"GL_OES_standard_derivatives\"),n.include(e,r),n.attributes.add(\"position\",\"vec3\"),n.attributes.add(\"color\",\"vec3\"),n.vertex.uniforms.add(\"uModelViewMatrix\",\"mat4\").add(\"uProjectionMatrix\",\"mat4\").add(\"uScreenMinMaxSize\",\"vec2\").add(\"uPointScale\",\"vec2\").add(\"uClipMin\",\"vec3\").add(\"uClipMax\",\"vec3\"),c?(n.vertex.uniforms.add(\"nearFar\",\"vec2\"),n.varyings.add(\"depth\",\"float\")):4!==r.output&&n.varyings.add(\"vColor\",\"vec3\"),n.vertex.code.add(t`\n    void main(void) {\n      // Move clipped points outside of clipspace\n      if (position.x < uClipMin.x || position.y < uClipMin.y || position.z < uClipMin.z ||\n        position.x > uClipMax.x || position.y > uClipMax.y || position.z > uClipMax.z) {\n        gl_Position = vec4(0.0,0.0,0.0,2.0);\n        gl_PointSize = 0.0;\n        return;\n      }\n\n      if (rejectBySlice(position)) {\n        gl_Position = vec4(0.0,0.0,0.0,2.0);\n        gl_PointSize = 0.0;\n        return;\n      }\n\n      // Position in camera space\n      vec4 camera = uModelViewMatrix * vec4(position, 1.0);\n\n      float pointSize = uPointScale.x;\n      vec4 position = uProjectionMatrix * camera;\n     ${r.drawScreenSize?t`\n      float clampedScreenSize = pointSize;`:t`\n      float pointRadius = 0.5 * pointSize;\n      vec4 cameraOffset = camera + vec4(0.0, pointRadius, 0.0, 0.0);\n      vec4 positionOffset = uProjectionMatrix * cameraOffset;\n      float radius = abs(positionOffset.y - position.y);\n      float viewHeight = uPointScale.y;\n      // screen diameter = (2 * r / w) * (h / 2)\n      float screenPointSize = (radius / position.w) * viewHeight;\n      float clampedScreenSize = clamp(screenPointSize, uScreenMinMaxSize.x, uScreenMinMaxSize.y);\n      // Shift towards camera, to move rendered point out of terrain i.e. to\n      // the camera-facing end of the virtual point when considering it as a\n      // 3D sphere.\n      camera.xyz -= normalize(camera.xyz) * pointRadius * clampedScreenSize / screenPointSize;\n      position = uProjectionMatrix * camera;`}\n\n     gl_PointSize = clampedScreenSize;\n     gl_Position = position;\n\n     ${c?t`depth = (-camera.z - nearFar[0]) / (nearFar[1] - nearFar[0]);`:\"\"}\n     ${d?t`vColor = color;`:\"\"}\n    }\n  `),n.fragment.include(o,r),s&&n.include(i),n.fragment.code.add(t`\n    void main(void) {\n      vec2 vOffset = gl_PointCoord - vec2(0.5, 0.5);\n      float r2 = dot(vOffset, vOffset);\n\n      if (r2 > 0.25) {\n        discard;\n      }\n      ${c?t`gl_FragColor = float2rgba(depth);`:\"\"}\n      ${s?t`outputHighlight();`:\"\"}\n      ${d?t`gl_FragColor = vec4(vColor, 1.0);`:\"\"}\n    }\n  `),n}var n=Object.freeze({__proto__:null,build:r});export{n as P,r as b};\n"],"sourceRoot":""}