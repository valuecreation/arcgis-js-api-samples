(this["webpackJsonpjsapi-create-react-app"]=this["webpackJsonpjsapi-create-react-app"]||[]).push([[79],{1163:function(e,t,s){"use strict";s.r(t),s.d(t,"LineOfSightLayerView3D",(function(){return M}));var i=s(0),r=s(2),n=s(1),o=(s(8),s(9),s(7),s(4)),a=s(564),c=(s(113),s(19)),l=s(42),h=s(180),d=s(12),b=s(289),u=s(3),O=s(5),p=s(64);let y=class extends c.a{constructor(e){super(e),this.inputPoints={isValid:!1,observer:Object(O.e)(),target:Object(O.e)(),observerAdjusted:Object(O.e)(),targetAdjusted:Object(O.e)()},this.computationResult={start:Object(O.e)(),end:Object(O.e)(),intersection:Object(O.e)(),isValid:!1,isTargetVisible:!1},this.result=null}updateComputationResults(){this.notifyChange("computationResult")}updateInputPoints(){this.notifyChange("inputPoints")}};Object(i.a)([Object(n.b)()],y.prototype,"target",void 0),Object(i.a)([Object(n.b)()],y.prototype,"inputPoints",void 0),Object(i.a)([Object(n.b)()],y.prototype,"computationResult",void 0),Object(i.a)([Object(n.b)()],y.prototype,"result",void 0),y=Object(i.a)([Object(o.a)("esri.views.3d.layers.analysis.LineOfSight.LineOfSightAnalysis")],y);let j=class extends c.a{constructor(e){super(e)}};Object(i.a)([Object(n.b)()],j.prototype,"target",void 0),Object(i.a)([Object(n.b)()],j.prototype,"intersectedGraphic",void 0),Object(i.a)([Object(n.b)()],j.prototype,"intersectedLocation",void 0),Object(i.a)([Object(n.b)()],j.prototype,"visible",void 0),j=Object(i.a)([Object(o.a)("esri.views.3d.layers.analysis.LineOfSight.LineOfSightResult")],j);var _=s(131),g=s(441),f=s(80),v=s(41);let m=class extends c.a{constructor(e){super(e),this._tasks=f.a,this._handles=new l.a,this._analysisHandles=new l.a}initialize(){var e;const t=null==(e=this.view.resourceController)?void 0:e.scheduler;t&&(this._tasks=t.registerTask(f.b.LINE_OF_SIGHT_TOOL)),this._handles.add([Object(b.d)((()=>this.layer.observer),(e=>this._onObserverChange(e))),this._connectAnalyses(),this._connectTargets()]),this._intersector=new _.a(this.view.state.viewingMode),this._intersector.options.hud=!1,this._intersector.options.store=0}destroy(){this._handles.destroy(),this._analysisHandles.destroy(),this._analyses.removeAll()}get updating(){return this._tasks.updating}get priority(){return this._tasks.priority}set priority(e){this._tasks.priority=e}get _analyses(){return this.layerViewData.analyses}get _observerEngineLocation(){return this.layerViewData.observerEngineLocation}set _observerEngineLocation(e){this.layerViewData.observerEngineLocation=e}get _screenPixelSize(){return this.view.state.camera.computeScreenPixelSizeAt(this._observerEngineLocation)}getLineOfSightComputationDependencies(e){const{inputPoints:t}=e;return{inputPoints:t}}computeAnalysis(e,t=!1){const{analysis:s}=e,{inputPoints:i,computationResult:r}=s,{observerAdjusted:n,targetAdjusted:o}=i,{start:a,end:c}=r;Object(u.m)(a,n),Object(u.m)(c,o),t||this._canComputeAnalysis(s)?this._computeAnalysisIntersection(e):this._interpolateAnalysisIntersection(e),s.updateComputationResults()}_adjustStartEndPositions(e){const t=this._screenPixelSize,s=this.view,{inputPoints:i}=e,{observer:r,target:n,observerAdjusted:o,targetAdjusted:a}=i,c=C;Object(u.l)(c,n,r);const l=t;Object(u.t)(c,c),Object(u.g)(c,c,Math.min(l,1)),Object(u.h)(o,r,c),Object(u.l)(c,r,n);const h=s.state.camera.computeScreenPixelSizeAt(n);Object(u.t)(c,c),Object(u.g)(c,c,Math.min(h,1)),Object(u.h)(a,n,c)}_computeAnalysisIntersection({analysis:e,interpolationInfo:t}){const{view:s}=this,{sceneIntersectionHelper:i,renderCoordsHelper:n}=s;if(Object(r.i)(i))return;const o=this._intersector,{computationResult:a,inputPoints:c}=e,{observer:l,target:h}=c,{start:d,end:b}=a,O=Object(p.e)(d,b,w);i.intersectToolIntersectorRay(O,o);const y=a.intersection,_=C,f=!!o.results.min&&o.results.min.getIntersectionPoint(y);let m=!0;if(f){Object(u.m)(t.originalIntersection,y),Object(u.m)(t.originalObserver,d),Object(u.m)(t.originalTarget,b),n.fromRenderCoords(y,_,s.spatialReference);const e=1-Object(u.p)(b,h)/Object(u.p)(d,h);m=Object(u.p)(l,y)>=e*Object(u.p)(l,h)}const E=new v.a(_,s.spatialReference);e.result=new j({target:e.target,intersectedGraphic:m?null:Object(g.a)(o.results.min,s),intersectedLocation:m?null:E,visible:!!f&&m}),a.isValid=c.isValid=!0,a.isTargetVisible=m}_interpolateAnalysisIntersection({analysis:e,interpolationInfo:t}){const{computationResult:s,inputPoints:i}=e,{start:r,end:n,intersection:o}=s,{originalIntersection:a,originalObserver:c,originalTarget:l}=t;if(Object(u.m)(o,a),i.isValid){const e=C,t=Object(u.p)(c,a)/Object(u.p)(c,l);Object(u.C)(e,r,c),Object(u.g)(e,e,1-t),Object(u.h)(o,o,e),Object(u.C)(e,n,l),Object(u.g)(e,e,t),Object(u.h)(o,o,e),s.isValid=!0}else e.result=null,s.isValid=!1,s.isTargetVisible=!1}_canComputeAnalysis(e){const t=this.layer.observer,s=this.view.frustum;if(Object(r.i)(t)||Object(r.i)(e.target)||Object(r.i)(s))return!1;const{observerAdjusted:i,targetAdjusted:n}=e.inputPoints,o=s.intersectsPoint(i),a=s.intersectsPoint(n);return o&&a}_onObserverChange(e){if(Object(r.i)(e))return void this.layer.targets.removeAll();const t=Object(O.e)();this.view.renderCoordsHelper.toRenderCoords(e,t),this._observerEngineLocation=t,this.priority=f.b.LINE_OF_SIGHT_TOOL_INTERACTIVE}_onObserverChangeForAnalysis(e){e.inputPoints.isValid=!1}_onObserverEngineForAnalysis(e,t){const{inputPoints:s}=e;Object(u.m)(s.observer,t),this._adjustStartEndPositions(e),e.updateInputPoints(),this.priority=f.b.LINE_OF_SIGHT_TOOL_INTERACTIVE}_onTargetLocationChange(e,t){const{inputPoints:s}=e;s.isValid=!1,this.view.renderCoordsHelper.toRenderCoords(t,s.target),this._adjustStartEndPositions(e),e.updateInputPoints(),this.priority=f.b.LINE_OF_SIGHT_TOOL_INTERACTIVE}_connectAnalysisToTarget(e){return Object(b.d)((()=>({analysis:e,target:e.target})),(({analysis:e,target:t})=>{Object(r.j)(t)&&this._onTargetLocationChange(e,t)}))}_connectAnalysisToObserver(e){return Object(b.d)((()=>({analysis:e,observer:this.layer.observer})),(({analysis:e})=>{this._onObserverChangeForAnalysis(e)}))}_connectAnalysisToObserverEngine(e){return Object(b.d)((()=>({analysis:e,observer:this._observerEngineLocation})),(({analysis:e,observer:t})=>{this._onObserverEngineForAnalysis(e,t)}))}_connectAnalysisForCompute(e){let t=r.o;const s={analysis:e,interpolationInfo:{originalIntersection:Object(O.e)(),originalObserver:Object(O.e)(),originalTarget:Object(O.e)()}};return Object(h.a)([Object(b.d)((()=>this.getLineOfSightComputationDependencies(e)),(()=>{t=Object(r.a)(t),t=Object(d.i)((async e=>{await Object(d.m)(this._tasks.schedule((()=>this.computeAnalysis(s)),e))}))})),Object(h.b)((()=>t=Object(r.a)(t)))])}_connectAnalysis(e){const t=this._analysisHandles;t.has(e)||t.add([this._connectAnalysisToTarget(e),this._connectAnalysisToObserver(e),this._connectAnalysisToObserverEngine(e),this._connectAnalysisForCompute(e)])}_disconnectAnalysis(e){this._analysisHandles.remove(e)}_onAnalysesCollectionChange(e){e.added.forEach((e=>this._connectAnalysis(e))),e.removed.forEach((e=>this._disconnectAnalysis(e)))}_onTargetsChange(e){return this._analyses.removeAll(),e.items.length>0&&e.forEach((e=>this._addTarget(e))),e.on("change",(e=>this._onTargetCollectionChange(e)))}_onTargetCollectionChange(e){e.added.forEach((e=>this._addTarget(e))),e.removed.forEach((e=>this._removeTarget(e)))}_addTarget(e){const t=this._analyses;t.some((t=>t.target===e))||t.add(new y({target:e}))}_removeTarget(e){const t=this._analyses,s=t.find((t=>t.target===e));t.remove(s)}_connectAnalyses(){let e=null;return Object(h.a)([Object(b.d)((()=>this._analyses),(t=>{e=Object(r.r)(e),e=t.on("change",(e=>this._onAnalysesCollectionChange(e))),t.forEach((e=>this._connectAnalysis(e)))})),Object(h.b)((()=>e=Object(r.r)(e)))])}_connectTargets(){let e=null;return Object(h.a)([Object(b.d)((()=>this.layer.targets),(t=>{e=Object(r.r)(e),e=this._onTargetsChange(t)})),Object(h.b)((()=>e=Object(r.r)(e)))])}};Object(i.a)([Object(n.b)({constructOnly:!0})],m.prototype,"layer",void 0),Object(i.a)([Object(n.b)({constructOnly:!0})],m.prototype,"layerViewData",void 0),Object(i.a)([Object(n.b)({constructOnly:!0})],m.prototype,"view",void 0),Object(i.a)([Object(n.b)()],m.prototype,"updating",null),Object(i.a)([Object(n.b)()],m.prototype,"priority",null),Object(i.a)([Object(n.b)()],m.prototype,"_analyses",null),Object(i.a)([Object(n.b)()],m.prototype,"_observerEngineLocation",null),Object(i.a)([Object(n.b)()],m.prototype,"_screenPixelSize",null),Object(i.a)([Object(n.b)()],m.prototype,"_tasks",void 0),m=Object(i.a)([Object(o.a)("esri.views.3d.layers.analysis.LineOfSight.LineOfSightController")],m);const C=Object(O.e)(),w=Object(p.c)();var E=s(38),V=s(35);let A=class extends c.a{constructor(e){super(e),this.innerWidth=2,this.outerWidth=8,this.visibleInnerColor=new V.a([3,252,111,1]),this.visibleOuterColor=new V.a([3,252,111,.15]),this.occludedInnerColor=new V.a([252,3,69,1]),this.occludedOuterColor=new V.a([252,3,69,.1]),this.undefinedInnerColor=new V.a([255,255,255,1]),this.undefinedOuterColor=new V.a([127,127,127,.2])}};Object(i.a)([Object(n.b)({type:Number})],A.prototype,"innerWidth",void 0),Object(i.a)([Object(n.b)({type:Number})],A.prototype,"outerWidth",void 0),Object(i.a)([Object(n.b)({type:V.a})],A.prototype,"visibleInnerColor",void 0),Object(i.a)([Object(n.b)({type:V.a})],A.prototype,"visibleOuterColor",void 0),Object(i.a)([Object(n.b)({type:V.a})],A.prototype,"occludedInnerColor",void 0),Object(i.a)([Object(n.b)({type:V.a})],A.prototype,"occludedOuterColor",void 0),Object(i.a)([Object(n.b)({type:V.a})],A.prototype,"undefinedInnerColor",void 0),Object(i.a)([Object(n.b)({type:V.a})],A.prototype,"undefinedOuterColor",void 0),A=Object(i.a)([Object(o.a)("esri.views.3d.layers.analysis.LineOfSight.LineOfSightConfiguration")],A);let R=class extends c.a{constructor(){super(...arguments),this.analyses=new E.a,this.configuration=new A,this.observerEngineLocation=Object(O.e)()}};Object(i.a)([Object(n.b)()],R.prototype,"analyses",void 0),Object(i.a)([Object(n.b)({type:A})],R.prototype,"configuration",void 0),Object(i.a)([Object(n.b)()],R.prototype,"observerEngineLocation",void 0),R=Object(i.a)([Object(o.a)("esri.views.3d.layers.analysis.LineOfSight.LineOfSightLayerViewData")],R);var L=s(20),I=s(784);let P=class extends c.a{constructor(e){super(e),this._handle=null,this._analysisHandles=new l.a}initialize(){this._handle=this._connectAnalyses()}destroy(){this._handle=Object(r.r)(this._handle),this._analysisHandles=Object(r.e)(this._analysisHandles)}get _analyses(){return this.layerViewData.analyses}get _configuration(){return this.layerViewData.configuration}createLineOfSightVisualization(){const e=this._configuration,t={view:this.view,attached:!0,width:e.outerWidth,innerWidth:e.innerWidth};return{visibleLineVisualElement:new I.a({...t,color:V.a.toUnitRGBA(e.visibleOuterColor),innerColor:V.a.toUnitRGBA(e.visibleInnerColor)}),occludedLineVisualElement:new I.a({...t,color:V.a.toUnitRGBA(e.occludedOuterColor),innerColor:V.a.toUnitRGBA(e.occludedInnerColor)}),undefinedLineVisualElement:new I.a({...t,color:V.a.toUnitRGBA(e.undefinedOuterColor),innerColor:V.a.toUnitRGBA(e.undefinedInnerColor)})}}destroyLineOfSightVisualization(e){e.visibleLineVisualElement=Object(r.e)(e.visibleLineVisualElement),e.occludedLineVisualElement=Object(r.e)(e.occludedLineVisualElement),e.undefinedLineVisualElement=Object(r.e)(e.undefinedLineVisualElement)}updateLineOfSightVisualization(e,t){const s=this._configuration,{computationResult:i,inputPoints:r}=e,{start:n,end:o,intersection:a,isValid:c,isTargetVisible:l}=i,{observer:h}=r,d=G;d[12]=h[0],d[13]=h[1],d[14]=h[2];const b=Object(u.l)(T,n,h),p=Object(u.l)(S,o,h),y=Object(u.l)(D,a,h),{visibleLineVisualElement:j,occludedLineVisualElement:_,undefinedLineVisualElement:g}=t;j.geometry=null,_.geometry=null,g.geometry=null,c?l?(j.geometry=[[Object(O.f)(b),Object(O.f)(p)]],j.transform=d,j.color=V.a.toUnitRGBA(s.visibleOuterColor)):(j.geometry=[[Object(O.f)(b),Object(O.f)(y)]],j.transform=d,j.color=V.a.toUnitRGBA(s.occludedOuterColor),_.geometry=[[Object(O.f)(y),Object(O.f)(p)]],_.transform=d):(g.geometry=[[Object(O.f)(b),Object(O.f)(p)]],g.transform=d)}getLineOfSightVisualizationDependencies(e){const{computationResult:t}=e,{occludedOuterColor:s,visibleOuterColor:i}=this._configuration;return{computationResult:t,occludedOuterColor:s,visibleOuterColor:i}}_connectAnalysis(e){const t=this._analysisHandles;if(t.has(e))return;const s=this.createLineOfSightVisualization();t.add([Object(b.d)((()=>this.getLineOfSightVisualizationDependencies(e)),(()=>this.updateLineOfSightVisualization(e,s))),Object(h.b)((()=>this.destroyLineOfSightVisualization(s)))])}_disconnectAnalysis(e){this._analysisHandles.remove(e)}_connectAnalyses(){let e=null;return Object(h.a)([Object(b.d)((()=>this._analyses),(t=>{e=Object(r.r)(e),e=t.on("change",(e=>this._onAnalysesCollectionChange(e))),this._onAnalysesCollectionChange({target:t,added:t.items,removed:[],moved:[]})})),Object(h.b)((()=>e=Object(r.r)(e)))])}_onAnalysesCollectionChange(e){e.added.forEach((e=>this._connectAnalysis(e))),e.removed.forEach((e=>this._disconnectAnalysis(e)))}};Object(i.a)([Object(n.b)({constructOnly:!0})],P.prototype,"layer",void 0),Object(i.a)([Object(n.b)({constructOnly:!0})],P.prototype,"view",void 0),Object(i.a)([Object(n.b)({constructOnly:!0})],P.prototype,"layerViewData",void 0),Object(i.a)([Object(n.b)()],P.prototype,"_analyses",null),Object(i.a)([Object(n.b)()],P.prototype,"_configuration",null),P=Object(i.a)([Object(o.a)("esri.views.3d.layers.analysis.LineOfSight.LineOfSightView")],P);const T=Object(O.e)(),S=Object(O.e)(),D=Object(O.e)(),G=Object(L.d)();var H=s(562);let M=class extends(Object(a.a)(H.a)){constructor(){super(...arguments),this.type="line-of-sight-3d",this._layerViewData=new R}initialize(){const e=this.view,t=this.layer,s=this._layerViewData;this._analysisController=new m({layer:t,layerViewData:s,view:e}),this._analysisView=new P({layer:t,layerViewData:s,view:e})}destroy(){this._analysisController=Object(r.e)(this._analysisController),this._analysisView=Object(r.e)(this._analysisView)}get results(){return this._layerViewData.analyses.map((e=>e.result))}get priority(){return this._analysisController.priority}set priority(e){this._analysisController.priority=e}getResultForTarget(e){const t=this._layerViewData.analyses.find((t=>t.target===e)),s=Object(r.c)(t,(e=>e.result));return Object(r.t)(s,null)}isUpdating(){return Object(r.m)(this._analysisController,!1,(e=>e.updating))}};Object(i.a)([Object(n.b)({readOnly:!0})],M.prototype,"type",void 0),Object(i.a)([Object(n.b)()],M.prototype,"layer",void 0),Object(i.a)([Object(n.b)({readOnly:!0})],M.prototype,"results",null),Object(i.a)([Object(n.b)()],M.prototype,"priority",null),Object(i.a)([Object(n.b)()],M.prototype,"_layerViewData",void 0),Object(i.a)([Object(n.b)()],M.prototype,"_analysisController",void 0),Object(i.a)([Object(n.b)()],M.prototype,"_analysisView",void 0),M=Object(i.a)([Object(o.a)("esri.views.3d.layers.LineOfSightLayerView3D")],M);var x=M;t.default=x},742:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var i=s(2),r=s(16),n=s(20),o=s(783),a=s(149),c=s(267);class l extends o.a{constructor(e){super(e.view),this._resources=null,this._transform=Object(n.d)()}get object(){return Object(i.j)(this._resources)?this._resources.object:null}get transform(){return this._transform}set transform(e){Object(r.d)(this._transform,e),Object(i.j)(this._resources)&&(this._resources.object.transformation=this._transform)}recreate(){this.attached&&this.createResources()}recreateGeometry(){if(Object(i.i)(this._resources))return;const e=this._resources.object,t=this.view._stage;t.removeMany(e.geometries),e.removeAllGeometries(),this.createGeometries(e),this.visible||e.setVisible(this.visible),t.addMany(e.geometries)}createResources(){this.destroyResources();const e=this.view._stage;if(!e)return;const t=new c.a({isPickable:!1,updatePolicy:1});e.add(t);const s=new a.a({castShadow:!1});s.transformation=this._transform,this.createExternalResources(),this.createGeometries(s),e.addMany(s.geometries),this.forEachExternalMaterial((t=>e.add(t))),e.add(s),t.add(s),this.visible||s.setVisible(!1),this._resources={layer:t,object:s}}destroyResources(){const e=this.view._stage;!Object(i.i)(this._resources)&&e&&(e.remove(this._resources.object),e.remove(this._resources.layer),this.forEachExternalMaterial((t=>{e.remove(t),t.dispose()})),e.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}updateVisibility(e){Object(i.i)(this._resources)||this._resources.object.setVisible(e)}}},783:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));class i{constructor(e){this._attached=!1,this._resourcesCreated=!1,this._visible=!0,this.view=e,this.view.watch("ready",(e=>{this._resourcesCreated&&(e?this._createResources():this._destroyResources())}))}applyProps(e){let t=!1;for(const s in e)s in this?"attached"===s?t=e[s]:this[s]=e[s]:console.error("Cannot set unknown property",s);this.attached=t}destroy(){this.attached=!1}get attached(){return this._attached}set attached(e){e!==this._attached&&this.view._stage&&(this._attached=e,this._attached&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources())}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this.attached&&this.updateVisibility(e))}_createResources(){this.createResources(),this._resourcesCreated=!0,this.visible||this.updateVisibility(!1)}_destroyResources(){this.destroyResources(),this._resourcesCreated=!1}}},784:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var i=s(2),r=s(16),n=s(20),o=s(3),a=s(5),c=s(40),l=s(192),h=s(742),d=s(344),b=s(341);class u extends h.a{constructor(e){super(e),this._renderOccluded=4,this._width=1,this._color=Object(l.c)(1,0,1,1),this._innerWidth=1,this._innerColor=null,this._stipplePattern=null,this._stippleOffColor=null,this._stippleIntegerRepeats=!1,this._writeDepthEnabled=!0,this._falloff=0,this._polygonOffset=!1,this.applyProps(e)}setGeometryFromExtent(e){const t=this.view.spatialReference,s=Object(a.e)(),i=Object(a.e)(),r=100,n=[];Object(o.y)(s,e[0],e[1],r),this.view.renderCoordsHelper.toRenderCoords(s,t,i),n.push([i[0],i[1],i[2]]),Object(o.y)(s,e[2],e[1],r),this.view.renderCoordsHelper.toRenderCoords(s,t,i),n.push([i[0],i[1],i[2]]),Object(o.y)(s,e[2],e[3],r),this.view.renderCoordsHelper.toRenderCoords(s,t,i),n.push([i[0],i[1],i[2]]),Object(o.y)(s,e[0],e[3],r),this.view.renderCoordsHelper.toRenderCoords(s,t,i),n.push([i[0],i[1],i[2]]),Object(o.y)(s,e[0],e[1],r),this.view.renderCoordsHelper.toRenderCoords(s,t,i),n.push([i[0],i[1],i[2]]),Object(o.y)(s,e[0],e[1],r),this.view.renderCoordsHelper.toRenderCoords(s,t,i),n.push([i[0],i[1],i[2]]),this.geometry=[n]}setGeometryFromFrustum(e){const t=[];e.lines.forEach((e=>{t.push([e.origin[0],e.origin[1],e.origin[2]]),t.push([e.endpoint[0],e.endpoint[1],e.endpoint[2]])})),this.geometry=[t]}setGeometryFromBoundedPlane(e){const t=[],s=e.origin,i=e.basis1,r=e.basis2,n=.5,o=Object(a.e)(),c=Object(a.e)(),l=Object(a.e)(),h=Object(a.e)();o[0]=s[0]-i[0]*n-r[0]*n,o[1]=s[1]-i[1]*n-r[1]*n,o[2]=s[2]-i[2]*n-r[2]*n,c[0]=s[0]-i[0]*n+r[0]*n,c[1]=s[1]-i[1]*n+r[1]*n,c[2]=s[2]-i[2]*n+r[2]*n,l[0]=s[0]+i[0]*n+r[0]*n,l[1]=s[1]+i[1]*n+r[1]*n,l[2]=s[2]+i[2]*n+r[2]*n,h[0]=s[0]+i[0]*n-r[0]*n,h[1]=s[1]+i[1]*n-r[1]*n,h[2]=s[2]+i[2]*n-r[2]*n,t.push([o[0],o[1],o[2]]),t.push([c[0],c[1],c[2]]),t.push([l[0],l[1],l[2]]),t.push([h[0],h[1],h[2]]),t.push([o[0],o[1],o[2]]),this.geometry=[t]}setGeometryFromSegment(e){const t=e.endRenderSpace;Object(r.i)(O),Object(r.t)(O,O,t),this.transform=O;const{points:s}=e.createRenderGeometry(t,this.view.renderCoordsHelper);this.geometry=[s]}setGeometryFromSegments(e,t=a.b){Object(r.i)(O),Object(r.t)(O,O,t),this.transform=O,this.geometry=e.map((e=>e.createRenderGeometry(t,this.view.renderCoordsHelper).points))}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get color(){return this._color}set color(e){Object(c.g)(e,this._color)||(Object(c.c)(this._color,e),this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(e){Object(i.j)(e)?!Object(i.i)(this._innerColor)&&Object(c.g)(e,this._innerColor)||(this._innerColor=Object(c.c)(Object(l.b)(),e),this._updateMaterial()):Object(i.j)(this._innerColor)&&(this._innerColor=null,this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(e){const t=Object(i.j)(e)!==Object(i.j)(this._stipplePattern);this._stipplePattern=e,t?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(e){(Object(i.i)(e)||Object(i.i)(this._stippleOffColor)||!Object(c.g)(e,this._stippleOffColor))&&(this._stippleOffColor=Object(i.j)(e)?Object(l.a)(e):null,this._updateMaterial())}get stippleIntegerRepeats(){return this._stippleIntegerRepeats}set stippleIntegerRepeats(e){this._stippleIntegerRepeats!==e&&(this._stippleIntegerRepeats=e,this._updateMaterial())}get writeDepthEnabled(){return this._writeDepthEnabled}set writeDepthEnabled(e){this._writeDepthEnabled!==e&&(this._writeDepthEnabled=e,this._updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){e!==this._polygonOffset&&(this._polygonOffset=e,this._updateMaterial())}createExternalResources(){this._material=new b.a(this.materialParameters)}destroyExternalResources(){this._material=null}createGeometries(e){const t=this._createLineGeometries();if(0!==t.length)for(let s=0;s<t.length;++s){const i=Object(d.a)(t[s]);e.addGeometry(i,this._material)}}forEachExternalMaterial(e){e(this._material)}get materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,isClosed:!1,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,stippleIntegerRepeats:this._stippleIntegerRepeats,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}_updateMaterial(){this.attached&&this._material.setParameterValues(this.materialParameters)}_createLineGeometries(){const e=this.geometry;if(Object(i.i)(e)||0===e.length)return[];const t=[];return e.forEach((e=>{const s=e.length,i=new Float64Array(3*s);e.forEach(((e,t)=>{i[3*t+0]=e[0],i[3*t+1]=e[1],i[3*t+2]=e[2]}));const r={attributeData:{position:i},removeDuplicateStartEnd:0};t.push(r)})),t}}const O=Object(n.d)()}}]);
//# sourceMappingURL=79.e7444b09.chunk.js.map