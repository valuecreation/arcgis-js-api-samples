{"version":3,"sources":["../node_modules/@arcgis/core/views/3d/layers/analysis/support/measurementUtils.js","../node_modules/@arcgis/core/views/3d/layers/analysis/AreaMeasurement/MeasurementData.js","../node_modules/@arcgis/core/views/3d/layers/analysis/AreaMeasurement/AreaMeasurementController.js","../node_modules/@arcgis/core/views/interactive/coordinateHelper.js","../node_modules/@arcgis/core/views/interactive/editGeometry/EditGeometry.js","../node_modules/@arcgis/core/views/interactive/editGeometry/operations/AppendVertex.js","../node_modules/@arcgis/core/views/interactive/editGeometry/operations/SetVertexPosition.js","../node_modules/@arcgis/core/views/interactive/editGeometry/operations/CloseComponent.js","../node_modules/@arcgis/core/views/3d/layers/analysis/AreaMeasurement/AreaMeasurementPathHelper.js","../node_modules/@arcgis/core/views/3d/layers/analysis/AreaMeasurement/AreaMeasurementLayerViewData.js","../node_modules/@arcgis/core/views/3d/interactive/measurementTools/support/measurementUtils.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/CheckerBoardTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/CheckerBoardMaterial.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/MeasurementAreaVisualElement.js","../node_modules/@arcgis/core/views/3d/layers/analysis/AreaMeasurement/AreaMeasurementView.js","../node_modules/@arcgis/core/views/3d/layers/AreaMeasurementLayerView3D.js","../node_modules/@arcgis/core/chunks/CheckerBoard.glsl.js"],"names":["z","t","e","n","r","distance","j","k","o","s","i","Math","abs","q","G","g","R","S","U","setPoint","c","a","l","rings","spatialReference","p","WGS84","W","constructor","this","positionsWorldCoords","positionsRenderCoords","positionsProjectedWorldCoords","positionsFittedRenderCoords","positionsGeographic","positionsSpherical","positionsStereographic","pathSegmentLengths","geodesicPathSegmentLengths","perimeterSegmentLengths","intersectingSegments","Set","geodesicIntersectingSegments","areaCentroidWorldCoords","_","areaCentroidRenderCoords","geodesicAreaCentroidRenderCoords","_length","_centroidRenderCoords","_planeWorldCoords","u","_worldUp","_worldTangent","_frame","_pathVersion","_validMeasurement","_tempU","_tempV","_tempVec3","_tempSphere","center","radius","_sceneView","unitNormalizer","update","h","renderSpatialReference","version","d","numVertices","_resize","P","f","C","m","forEachVertexPosition","L","_updatePathLengths","pathLength","normalizeDistance","_updateGeodesicPathLengths","geodesicPathLength","area","geodesicArea","perimeterLength","triangleIndices","geodesicTriangleIndices","clear","_updateArea","_updateGeodesicArea","getData","fittingMode","length","push","v","renderCoordsHelper","T","worldUpAtPosition","worldBasisAtPosition","Error","I","_selectFittingMode","forEach","getAltitude","A","F","w","_updatePerimeterLengths","_updateIntersectingSegments","size","normalizeArea","_computeArea","y","toRenderCoords","_updateGeodesicIntersectingSegments","_computeGeodesicArea","add","x","Uint32Array","map","M","reduce","max","sqrt","V","maxRelativeErrorCoplanar","maxRelativeErrorAlmostCoplanar","cos","verticalAngleThreshold","Float64Array","super","_handles","initialize","view","_measurementDataManager","layerViewData","path","on","_update","destroy","validMeasurement","_set","measurementData","constructOnly","prototype","readOnly","viewingMode","_unnormalizationInfo","B","tag","createNew","fromPoint","fromArray","toArray","clone","copy","toPoint","hasZ","hasM","createPoint","createPointFromArray","createDehydratedPoint","type","lerp","addDelta","scale","rotate","pointToArray","getZ","getM","unnormalize","fromXYZ","toXYZ","valueType","X","supported","upperBoundX","lowerBoundX","pos","min","Z","valid","left","right","index","component","_pos","unnormalizeVertexPositions","vertices","edges","data","coordinateHelper","updateVertexIndex","swapVertices","indexOf","getFirstVertex","getLastVertex","isClosed","iterateVertices","undoStack","redoStack","components","apply","lastOperation","accumulate","undo","pop","redo","toPolyline","find","paths","toPolygon","editGeometry","addedVertex","originalEdge","splice","addedVertices","operation","emit","removedVertices","vertex","originalPosition","_apply","updatedVertices","createdEdge","EventedAccessor","_version","_internalGeometryChange","_initialize","areaMeasurement","initialized","_editGeometry","removeAll","_updateEditGeometryFromModelGeometry","_makeDirty","notifyChange","remove","geometry","fromGeometry","forEachVertex","getVertex","getVertexPositionAsPoint","getVertexPositionAsPointFromIndex","close","ensureContains","setVertexPosition","equals","value","arguments","lastDraggedVertex","isValidPolygon","b","boundingSphere","bestFitPlane","planePointDistance","segmentLengthEuclidean","segmentLengthGeodesic","segmentLengthGeodesicVector","triangleAreaEuclidean","triangleAreaGeodesic","tangentFrame","fitHemisphere","E","compareSets","has","initializeProgram","shader","get","configuration","build","OITEnabled","transparencyPassType","multipassTerrainEnabled","cullAboveGround","rctx","bindPass","program","camera","projectionMatrix","setUniform2fv","setUniform4fv","color1","color2","nearFar","inverseViewport","bindDraw","setPipelineState","blending","transparent","depthTest","func","depthWrite","writeDepth","colorWrite","polygonOffset","factor","units","initializePipeline","count","techniqueConfig","dispose","getPassParameters","params","getTechniqueConfig","intersect","getGLMaterial","output","createBufferWriter","updateParameters","_technique","_techniqueRep","releaseAndAcquire","_material","beginSlot","ensureParameters","bind","_checkerBoardMaterial","_renderOccluded","_geometry","_size","_color1","_color2","applyProps","updateMaterial","geometryChanged","setParameterValues","renderOccluded","createExternalResources","destroyExternalResources","forEachExternalMaterial","createGeometries","transform","position","uv","exclusive","addGeometry","recreateGeometry","_params","_path","_intersectedPath","_perimeter","_intersectedPerimeter","_projectionLines","_measurementArea","_areaLabel","_pathLengthLabel","_cursorSegmentLengthLabel","_perimeterLengthLabel","_pathSegments","_perimeterSegments","_cursorSegment","_origin","_originTransform","_cursorPositionRenderSpace","messages","viewData","areaLabel","perimeterLengthLabel","mode","geodesicMeasurementDistanceThreshold","layerView","visible","suspended","labels","cursorSegmentLength","attached","width","pathLineWidth","color","pathLineColor","intersectingLineColor","perimeterLineWidth","perimeterLineColor","projectionLineWidth","projectionLineColor","stipplePattern","projectionLineStippleSize","stippleIntegerRepeats","areaColor1","areaColor2","fontSize","unit","cursorPoint","state","_updateLabels","async","_updateMessageBundle","set","destroyed","_updateViewData","_updateOrigin","_updatePathSegments","_updatePerimeterSegments","_updateProjectionLines","lastPoint","_toPreferredAreaUnit","pathVersion","positionsProjected","areaCentroid","pathLengthLabelSegmentIndex","perimeterLengthLabelSegmentIndex","checkerSize","geodesicCursorSegmentLength","_createSegments","D","all","nonIntersecting","intersecting","setGeometryFromSegments","_updateAreaEuclidean","_updateAreaGeodesic","_formatAreaLabel","point","text","_formatLengthLabel","O","labelDistance","segment","sampleLocation","anchor","overlaps","toUnit","_preferredAreaUnit","_preferredLengthUnit","_deriveLengthUnitFromAreaUnit","then","laserLineGlowColor","laserLineGlowWidth","laserLineGlowFalloff","laserLineInnerColor","laserLineInnerWidth","laserLineGlobalAlpha","laserLineEnabled","handleColor","handleOpacity","handleRadius","handleRadiusHovered","handleRadiusMouse","handleRadiusTouch","fillColor","lineSubdivisions","_userUnit","_defaultUnit","layer","analysisView","analysis","analysisController","controller","extensions","attributes","uniforms","varyings","code","fragment","include","Object","freeze","__proto__"],"mappings":"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","file":"static/js/90.46460c9d.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{s as t,b as e,a as n,h as r,d as o,i as s,c as i,n as f,g as u}from\"../../../../../chunks/vec3.js\";import{c as a}from\"../../../../../chunks/vec3f64.js\";import{geodesicArea as c}from\"../../../../../geometry/geometryEngine.js\";import l from\"../../../../../geometry/Polygon.js\";import{projectPointToVector as m,projectPointToWGS84ComparableLonLat as h,projectVectorToWGS84ComparableLonLat as g}from\"../../../../../geometry/projection.js\";import p from\"../../../../../geometry/SpatialReference.js\";import{inverseGeodeticSolver as j}from\"../../../../../geometry/support/geodesicUtils.js\";import{planeFromPoints as d}from\"../../../support/mathUtils.js\";function y(o,s){const i=s.center;t(i,0,0,0);for(let t=0;t<o.length;++t)e(i,i,o[t]);n(i,i,1/o.length);let f=0;for(let t=0;t<o.length;++t)f=Math.max(f,r(i,o[t]));s.radius=Math.sqrt(f)}function M(t,e){if(t.length<3)throw new Error(\"need at least 3 points to fit a plane\");d(t[0],t[1],t[2],e)}function b(t,e){return o(t,e)+t[3]}function P(t,e,n){return m(t,R,n)&&m(e,S,n)?s(R,S):0}function w(t,e){if(!h(t,R)||!h(e,S))return 0;const n={distance:null};return j(n,[R[0],R[1]],[S[0],S[1]]),n.distance}function z(t,e,n){const r={distance:null};return j(r,[t[0],t[1]],[e[0],e[1]],n),r.distance}function k(t,e,n){const r=e[0]-t[0],o=e[1]-t[1],s=n[0]-t[0],i=n[1]-t[1];return.5*Math.abs(r*i-o*s)}function q(t,e,n,r){const o=G;return g(t,r,R)&&g(e,r,S)&&g(n,r,U)?(o.setPoint(0,0,R),o.setPoint(0,1,S),o.setPoint(0,2,U),Math.abs(c(o,\"square-meters\"))):0}function v(e,n,r){Math.abs(e[0])>Math.abs(e[1])?t(n,0,1,0):t(n,1,0,0),i(r,e,n),f(n,n),i(n,r,e),f(r,r)}function x(n,r=null,s=!0){const a=1e-6,c=(t,e)=>{if(0===e[0]&&0===e[1]&&0===e[2])return!1;for(let n=0;n<t.length;++n)if(o(e,t[n])<-a)return!1;return!0};if(0===n.length)return!1;if(1===n.length)return r&&u(r,n[0]),!0;t(W,0,0,0);for(let t=0;t<n.length;++t)e(W,W,n[t]);if(f(W,W),c(n,W))return r&&u(r,W),!0;if(!s)return!1;for(let t=0;t<n.length;++t)for(let e=0;e<n.length;++e)if(t!==e&&(i(W,n[t],n[e]),f(W,W),c(n,W)))return r&&u(r,W),!0;return!1}function E(t,e){if(t===e)return!0;if(t.size!==e.size)return!1;for(let n=0;n<t.size;++n)if(!e.has(t[n]))return!1;return!0}const R=a(),S=a(),U=a(),G=new l({rings:[[R,S,U]],spatialReference:p.WGS84}),W=a();export{M as bestFitPlane,y as boundingSphere,E as compareSets,x as fitHemisphere,b as planePointDistance,P as segmentLengthEuclidean,w as segmentLengthGeodesic,z as segmentLengthGeodesicVector,v as tangentFrame,k as triangleAreaEuclidean,q as triangleAreaGeodesic};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{deg2rad as e}from\"../../../../../core/mathUtils.js\";import t from\"../../../../../core/Quantity.js\";import{e as s}from\"../../../../../chunks/earcut.js\";import{s as i,d as o}from\"../../../../../chunks/vec2.js\";import{a as r}from\"../../../../../chunks/vec2f64.js\";import{n,i as h,g as a,c as d,o as g,f as l,d as p,a as c,b as m}from\"../../../../../chunks/vec3.js\";import{c as _}from\"../../../../../chunks/vec3f64.js\";import{c as u}from\"../../../../../chunks/vec4f64.js\";import{canProjectWithoutEngine as f,canProjectToWGS84ComparableLonLat as C,projectPointToVector as S,projectPointToWGS84ComparableLonLat as L,projectDirection as R,projectVectorToVector as w}from\"../../../../../geometry/projection.js\";import{getSphericalPCPF as P,getReferenceEllipsoid as j}from\"../../../../../geometry/projectionEllipsoid.js\";import A from\"../../../../../geometry/SpatialReference.js\";import{segmentIntersects as W}from\"../../../../../geometry/support/intersectsBase.js\";import{segmentLengthGeodesicVector as v,bestFitPlane as I,fitHemisphere as U,triangleAreaEuclidean as G,triangleAreaGeodesic as z,planePointDistance as M,boundingSphere as V}from\"../support/measurementUtils.js\";import{midpoint as T}from\"../support/viewUtils.js\";import{makeOrthonormal as F,tangentFrame as y}from\"../../../support/mathUtils.js\";class k{constructor(e,t){this.positionsWorldCoords=[],this.positionsRenderCoords=[],this.positionsProjectedWorldCoords=[],this.positionsFittedRenderCoords=[],this.positionsGeographic=[],this.positionsSpherical=[],this.positionsStereographic=[],this.pathSegmentLengths=[],this.geodesicPathSegmentLengths=[],this.perimeterSegmentLengths=[],this.intersectingSegments=new Set,this.geodesicIntersectingSegments=new Set,this.areaCentroidWorldCoords=_(),this.areaCentroidRenderCoords=_(),this.geodesicAreaCentroidRenderCoords=_(),this._length=0,this._centroidRenderCoords=_(),this._planeWorldCoords=u(),this._worldUp=_(),this._worldTangent=_(),this._frame=[_(),_(),_()],this._pathVersion=-1,this._validMeasurement=!1,this._tempU=_(),this._tempV=_(),this._tempVec3=_(),this._tempSphere={center:_(),radius:0},this._sceneView=e,this.unitNormalizer=t}update(e,s,i,o){const r=this.unitNormalizer,h=this._sceneView.renderSpatialReference,a=this.unitNormalizer.spatialReference;if(this._pathVersion===e.version&&this._validMeasurement===i)return;this._pathVersion=e.version,this._validMeasurement=i;const d=e.numVertices;this._resize(d);const g=P(s.spatialReference),l=f(s.spatialReference,g)&&C(s.spatialReference),p=this.positionsGeographic,c=this.positionsWorldCoords,m=this.positionsRenderCoords,_=this.positionsSpherical;e.forEachVertexPosition(((e,t)=>{S(e,c[t],a),S(e,m[t],h),l&&(L(e,p[t]),S(e,_[t],g),n(_[t],_[t]))}));const u=this._updatePathLengths(i);if(this.pathLength=this._length>1?new t(r.normalizeDistance(u),\"meters\"):null,l){const e=this._updateGeodesicPathLengths(i,a);this.geodesicPathLength=this._length>1?new t(e,\"meters\"):null}else this.geodesicPathLength=null;if(!i)return this.area=null,this.geodesicArea=null,this.perimeterLength=null,this.triangleIndices=null,this.geodesicTriangleIndices=null,this.intersectingSegments.clear(),void this.geodesicIntersectingSegments.clear();this._updateArea(s,r,h,a,o),l&&this._updateGeodesicArea(s)}getData(){return{positionsWorldCoords:this.positionsWorldCoords,positionsRenderCoords:this.positionsRenderCoords,positionsProjectedWorldCoords:this.positionsProjectedWorldCoords,positionsFittedRenderCoords:this.positionsFittedRenderCoords,positionsGeographic:this.positionsGeographic,positionsSpherical:this.positionsSpherical,positionsStereographic:this.positionsStereographic,pathSegmentLengths:this.pathSegmentLengths,geodesicPathSegmentLengths:this.geodesicPathSegmentLengths,perimeterSegmentLengths:this.perimeterSegmentLengths,intersectingSegments:this.intersectingSegments,geodesicIntersectingSegments:this.geodesicIntersectingSegments,triangleIndices:this.triangleIndices,geodesicTriangleIndices:this.geodesicTriangleIndices,areaCentroidWorldCoords:this.areaCentroidWorldCoords,areaCentroidRenderCoords:this.areaCentroidRenderCoords,geodesicAreaCentroidRenderCoords:this.geodesicAreaCentroidRenderCoords,fittingMode:this.fittingMode,area:this.area,geodesicArea:this.geodesicArea,pathLength:this.pathLength,geodesicPathLength:this.geodesicPathLength,perimeterLength:this.perimeterLength,unitNormalizer:this.unitNormalizer}}_resize(e){for(e<this._length&&(this.positionsWorldCoords.length=e,this.positionsRenderCoords.length=e,this.positionsProjectedWorldCoords.length=e,this.positionsFittedRenderCoords.length=e,this.positionsGeographic.length=e,this.positionsSpherical.length=e,this.positionsStereographic.length=e,this.pathSegmentLengths.length=e,this.geodesicPathSegmentLengths.length=e,this.perimeterSegmentLengths.length=e,this._length=e);this._length<e;)this.positionsWorldCoords.push(_()),this.positionsRenderCoords.push(_()),this.positionsProjectedWorldCoords.push(r()),this.positionsFittedRenderCoords.push(_()),this.positionsGeographic.push(_()),this.positionsSpherical.push(_()),this.positionsStereographic.push(r()),this.pathSegmentLengths.push(0),this.geodesicPathSegmentLengths.push(0),this.perimeterSegmentLengths.push(0),++this._length}_updatePathLengths(e){const t=this.positionsWorldCoords,s=this.pathSegmentLengths;let i=0;for(let o=0;o<this._length;++o){const r=s[o]=h(t[o],t[(o+1)%this._length]);(o<this._length-1||e)&&(i+=r)}return i}_updateGeodesicPathLengths(e,t){const s=this.positionsGeographic,i=this.geodesicPathSegmentLengths;let o=0;for(let r=0;r<this._length;++r){const n=i[r]=v(s[r],s[(r+1)%this._length],t);(r<this._length-1||e)&&(o+=n)}return o}_updateArea(e,s,o,r,n){const h=e.renderCoordsHelper,_=this.positionsWorldCoords,u=this.positionsRenderCoords,f=this.positionsProjectedWorldCoords,C=this.positionsFittedRenderCoords,S=this._planeWorldCoords,L=this._centroidRenderCoords;T(u,L),h.worldUpAtPosition(L,this._worldUp),h.worldBasisAtPosition(L,0,this._worldTangent),R(L,this._worldUp,o,this._worldUp,r),R(L,this._worldTangent,o,this._worldTangent,r),_.length>2&&I(_,S),this.fittingMode=this._selectFittingMode(S,_,this._worldUp,n);let P=0;if(\"horizontal\"===this.fittingMode){let e=-1/0;u.forEach(((t,s)=>{const i=h.getAltitude(u[s]);i>e&&(e=i,P=s)}))}const j=_[P];let A=S,W=this._worldTangent;\"horizontal\"===this.fittingMode?A=this._worldUp:\"vertical\"===this.fittingMode&&(A=this._tempVec3,W=this._worldUp,F(S,this._worldUp,A)),a(this._frame[2],A),F(W,A,this._frame[0]),d(this._frame[1],this._frame[0],this._frame[2]),g(this._frame[1],this._frame[1]);const v=this._tempVec3,U=this._tempU,G=this._tempV;for(let t=0;t<this._length;++t){const e=f[t],s=C[t];l(v,_[t],j),i(e,p(this._frame[0],v),p(this._frame[1],v)),c(U,this._frame[0],e[0]),c(G,this._frame[1],e[1]),m(v,U,G),m(v,v,j),w(v,r,s,o)}this.perimeterLength=this._length>0?new t(s.normalizeDistance(this._updatePerimeterLengths()),\"meters\"):null,T(C,this.areaCentroidRenderCoords),w(this.areaCentroidRenderCoords,o,this.areaCentroidWorldCoords,r),this._updateIntersectingSegments(),this.area=0===this.intersectingSegments.size?new t(s.normalizeArea(this._computeArea()),\"square-meters\"):null}_updateGeodesicArea(e){const s=e.renderCoordsHelper,o=this.positionsSpherical,r=this.positionsStereographic,n=this._tempVec3,h=U(o,n);if(!h)return void(this.geodesicArea=null);const a=this._tempU,d=this._tempV;y(n,a,d);for(let t=0;t<this._length;++t){const e=p(o[t],a),s=p(o[t],d),h=p(o[t],n);i(r[t],e/h,s/h)}c(n,n,j(e.spatialReference).radius),s.toRenderCoords(n,P(e.spatialReference),this.geodesicAreaCentroidRenderCoords),this._updateGeodesicIntersectingSegments(),this.geodesicArea=h&&0===this.geodesicIntersectingSegments.size?new t(this._computeGeodesicArea(),\"square-meters\"):null}_updatePerimeterLengths(){const e=this.positionsProjectedWorldCoords,t=this.perimeterSegmentLengths;let s=0;for(let i=0;i<this._length;++i){s+=t[i]=o(e[i],e[(i+1)%this._length])}return s}_updateIntersectingSegments(){const e=this.positionsProjectedWorldCoords,t=this.intersectingSegments;t.clear();for(let s=0;s<this._length;++s)for(let i=s+2;i<this._length;++i){if((i+1)%this._length===s)continue;const o=e[s],r=e[(s+1)%this._length],n=e[i],h=e[(i+1)%this._length];W(o,r,n,h)&&(t.add(s),t.add(i))}}_computeArea(){const e=this.positionsProjectedWorldCoords,t=x(e,2),i=this.triangleIndices=new Uint32Array(s(t,[],2));let o=0;for(let s=0;s<i.length;s+=3)o+=G(e[i[s]],e[i[s+1]],e[i[s+2]]);return o}_updateGeodesicIntersectingSegments(){const e=this.positionsStereographic,t=this.geodesicIntersectingSegments;t.clear();for(let s=0;s<this._length;++s)for(let i=s+2;i<this._length;++i){if((i+1)%this._length===s)continue;const o=e[s],r=e[(s+1)%this._length],n=e[i],h=e[(i+1)%this._length];W(o,r,n,h)&&(t.add(s),t.add(i))}}_computeGeodesicArea(){const e=this.positionsGeographic,t=x(this.positionsStereographic,2),i=this.geodesicTriangleIndices=new Uint32Array(s(t,[],2));let o=0;for(let s=0;s<i.length;s+=3)o+=z(e[i[s]],e[i[s+1]],e[i[s+2]],A.WGS84);return o}_selectFittingMode(t,s,i,o){const r=s.map((e=>Math.abs(M(t,e)))).reduce(((e,t)=>Math.max(e,t)),0);V(s,this._tempSphere);const n=r/(2*this._tempSphere.radius),h=n<o.maxRelativeErrorCoplanar,a=n<o.maxRelativeErrorAlmostCoplanar;let d=\"horizontal\";if(h)d=\"oblique\";else if(a){d=Math.abs(p(i,t))>Math.cos(e(o.verticalAngleThreshold))?\"horizontal\":\"vertical\"}return d}}function x(e,t){const s=new Float64Array(e.length*t);for(let i=0;i<e.length;++i){const o=e[i];for(let e=0;e<t;++e)s[i*t+e]=o[e]}return s}export{k as MeasurementDataManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Accessor.js\";import r from\"../../../../../core/Handles.js\";import{destroyMaybe as s}from\"../../../../../core/maybe.js\";import{property as a}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{canProjectWithoutEngine as i}from\"../../../../../geometry/projection.js\";import{getSphericalPCPF as n,WGS84ECEFSpatialReference as m,SphericalECEFSpatialReference as p}from\"../../../../../geometry/projectionEllipsoid.js\";import{MeasurementDataManager as c}from\"./MeasurementData.js\";import{UnitNormalizer as l}from\"../support/UnitNormalizer.js\";let h=class extends t{constructor(e){super(e),this._handles=new r}initialize(){const e=this.view.spatialReference,t=n(e),r=t===p?m:t,s=!e||i(e,r)?r:e,a=new l(s);this._measurementDataManager=new c(this.view,a),this._handles.add(this.layerViewData.path.on(\"change\",(()=>this._update()))),this._update()}destroy(){this._handles=s(this._handles)}_update(){const e=this.layerViewData,t={maxRelativeErrorCoplanar:.005,maxRelativeErrorAlmostCoplanar:.01,verticalAngleThreshold:80};this._measurementDataManager.update(e.path,this.view,e.validMeasurement,t);const r=this._measurementDataManager.getData();this._set(\"measurementData\",r),e.measurementData=r}};e([a({constructOnly:!0})],h.prototype,\"view\",void 0),e([a({constructOnly:!0})],h.prototype,\"analysis\",void 0),e([a({readOnly:!0})],h.prototype,\"measurementData\",void 0),e([a({constructOnly:!0})],h.prototype,\"layerViewData\",void 0),h=e([o(\"esri.views.3d.layers.analysis.AreaMeasurement.AreaMeasurementController\")],h);export{h as AreaMeasurementController};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{c as e,m as t,a as r,b as a,h as n,p as s,r as i,d as o}from\"../../chunks/vec2.js\";import{a as u,f as h,d as p}from\"../../chunks/vec2f64.js\";import{i as c,g as l,e as f}from\"../../chunks/vec3.js\";import{f as y,c as m,d}from\"../../chunks/vec3f64.js\";import{c as v,l as g}from\"../../chunks/vec4.js\";import{c as R,f as z,b as x}from\"../../chunks/vec4f64.js\";import T from\"../../geometry/Point.js\";import{getInfo as Z}from\"../../geometry/support/spatialReferenceUtils.js\";const w=u();class M{constructor(e,t){this.spatialReference=e,this.viewingMode=t,this._unnormalizationInfo=B(e,t)}tag(e){return e}createNew(){return this.tag(u())}fromPoint(e){return this.tag(h(e.x,e.y))}fromArray(e){return this.tag(h(e[0],e[1]))}toArray(e){return[e[0],e[1]]}clone(e){return this.tag(p(e))}copy(t,r){return e(r,t)}toPoint(e,t){return t.x=e[0],t.y=e[1],t.hasZ=!1,t.hasM=!1,t.spatialReference=this.spatialReference,t}createPoint(e){return new T({x:e[0],y:e[1],z:void 0,m:void 0,spatialReference:this.spatialReference})}createPointFromArray(e){return new T({x:e[0],y:e[1],z:void 0,m:void 0,spatialReference:this.spatialReference})}createDehydratedPoint(e){return{x:e[0],y:e[1],z:void 0,m:void 0,hasZ:!1,hasM:!1,spatialReference:this.spatialReference,type:\"point\"}}lerp(e,r,a,n){return t(n,e,r,a)}addDelta(e,t,r){e[0]+=t,e[1]+=r}scale(e,t,i,o){const u=r(w,e,t),h=a(w,i,n(i,u));s(e,e,h,o-1)}rotate(e,t,r){i(e,e,t,r)}pointToArray(e){return[e.x,e.y]}getZ(e,t){return t}hasZ(){return!1}getM(e,t){return t}hasM(){return!1}unnormalize(e){j(e,this._unnormalizationInfo)}fromXYZ(e){return this.tag(h(e[0],e[1]))}toXYZ(e,t=0){return y(e[0],e[1],t)}distance(e,t){return o(e,t)}}class P{constructor(e,t,r){this.valueType=e,this.spatialReference=t,this._unnormalizationInfo=B(t,r)}distance(e,t){return 0===this.valueType?c(e,t):o(e,t)}tag(e){return e}createNew(){return this.tag(m())}fromPoint(e){return this.tag(y(e.x,e.y,0===this.valueType?e.z:e.m))}fromArray(e){return this.tag(y(e[0],e[1],e[2]||0))}toArray(e){return[e[0],e[1],e[2]]}clone(e){return this.tag(d(e))}copy(e,t){return l(t,e)}toPoint(e,t){return t.x=e[0],t.y=e[1],0===this.valueType?(t.z=e[2],t.hasZ=!0,t.hasM=!1):(t.m=e[2],t.hasZ=!1,t.hasM=!0),t.spatialReference=this.spatialReference,t}createPoint(e){return new T({x:e[0],y:e[1],z:0===this.valueType?e[2]:void 0,m:1===this.valueType?e[2]:void 0,spatialReference:this.spatialReference})}createPointFromArray(e){return new T({x:e[0],y:e[1],z:0===this.valueType?e[2]:void 0,m:1===this.valueType?e[2]:void 0,spatialReference:this.spatialReference})}createDehydratedPoint(e){const t=0===this.valueType,r=1===this.valueType;return{x:e[0],y:e[1],z:t?e[2]:void 0,m:r?e[2]:void 0,hasZ:t,hasM:r,spatialReference:this.spatialReference,type:\"point\"}}lerp(e,t,r,a){return f(a,e,t,r)}addDelta(e,t,r,a){e[0]+=t,e[1]+=r,0===this.valueType&&(e[2]+=a)}scale(e,t,i,o){const u=r(w,e,t),h=a(w,i,n(i,u));s(e,e,h,o-1)}rotate(e,t,r){i(e,e,t,r)}pointToArray(e){return 0===this.valueType?[e.x,e.y,e.z]:[e.x,e.y,e.m]}getZ(e,t){return 0===this.valueType?e[2]:t}hasZ(){return 0===this.valueType}getM(e,t){return 1===this.valueType?e[2]:t}hasM(){return 1===this.valueType}unnormalize(e){j(e,this._unnormalizationInfo)}fromXYZ(e,t=0,r=0){return this.tag(y(e[0],e[1],0===this.valueType?e.length>2?e[2]:t:r))}toXYZ(e,t=0){return this.tag(y(e[0],e[1],0===this.valueType?e[2]:t))}}class X{constructor(e,t){this.spatialReference=e,this._unnormalizationInfo=B(e,t)}distance(e,t){return c(e,t)}tag(e){return e}createNew(){return this.tag(R())}fromPoint(e){return this.tag(z(e.x,e.y,e.z,e.m))}fromArray(e){return this.tag(z(e[0],e[1],e[2]||0,e[3]||0))}toArray(e){return[e[0],e[1],e[2],e[3]]}clone(e){return this.tag(x(e))}copy(e,t){return v(t,e)}toPoint(e,t){return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.hasZ=!0,t.hasM=!0,t.spatialReference=this.spatialReference,t}createPoint(e){return new T({x:e[0],y:e[1],z:e[2],m:e[3],spatialReference:this.spatialReference})}createPointFromArray(e){return new T({x:e[0],y:e[1],z:e[2],m:e[3],spatialReference:this.spatialReference})}createDehydratedPoint(e){return{x:e[0],y:e[1],z:e[2],m:e[3],hasZ:!0,hasM:!0,spatialReference:this.spatialReference,type:\"point\"}}lerp(e,t,r,a){return g(a,e,t,r)}addDelta(e,t,r,a){e[0]+=t,e[1]+=r,e[2]+=a}scale(e,t,i,o){const u=r(w,e,t),h=a(w,i,n(i,u));s(e,e,h,o-1)}rotate(e,t,r){i(e,e,t,r)}pointToArray(e){return[e.x,e.y,e.z,e.m]}getZ(e){return e[2]}hasZ(){return!0}getM(e){return e[3]}hasM(){return!0}unnormalize(e){j(e,this._unnormalizationInfo)}fromXYZ(e,t=0,r=0){return this.tag(z(e[0],e[1],e.length>2?e[2]:t,r))}toXYZ(e){return y(e[0],e[1],e[2])}}function A(e,t,r,a){return e&&t?new X(r,a):t?new P(1,r,a):e?new P(0,r,a):new M(r,a)}function j(e,t){if(!t.supported)return;let r=1/0,a=-1/0;const n=t.upperBoundX-t.lowerBoundX;e.forEach((e=>{let s=e.pos[0];for(;s<t.lowerBoundX;)s+=n;for(;s>t.upperBoundX;)s-=n;r=Math.min(r,s),a=Math.max(a,s),e.pos[0]=s}));const s=a-r;n-s<s&&e.forEach((e=>{e.pos[0]<0&&(e.pos[0]+=n)}))}function B(e,t){const r=Z(e);return\"global\"===t&&r?{supported:!0,lowerBoundX:r.valid[0],upperBoundX:r.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}export{M as CoordinateHelper2D,P as CoordinateHelper3D,X as CoordinateHelper4D,A as createCoordinateHelper};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{equals as t}from\"../../../core/arrayUtils.js\";import e from\"../../../core/Evented.js\";import{isSome as s,isNone as r}from\"../../../core/maybe.js\";import i from\"../../../geometry/Polygon.js\";import n from\"../../../geometry/Polyline.js\";import{createCoordinateHelper as o}from\"../coordinateHelper.js\";class h{constructor(t){this.left=null,this.right=null,this.type=\"vertex\",this.index=null,this.component=t}get pos(){return this._pos}set pos(t){this._pos=t,this.component.unnormalizeVertexPositions()}}class c{constructor(t,e,s){this.type=\"edge\",this.component=t,this.left=e,this.right=s,e.right=this,s.left=this}}class l{constructor(t){this.vertices=[],this.edges=[],this.data=t}unnormalizeVertexPositions(){this.vertices.length<=1||this.data.coordinateHelper.unnormalize(this.vertices)}updateVertexIndex(t,e){if(0===this.vertices.length)return;const s=this.vertices[0];let r=null,i=t,n=e;do{r=i,r.index=n++,i=r.right?r.right.right:null}while(null!=i&&i!==s);r.left&&r!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(r),this.vertices.length-1)}getFirstVertex(){return 0===this.vertices.length?null:this.vertices[0]}getLastVertex(){return 0===this.vertices.length?null:this.vertices[this.vertices.length-1]}isClosed(){return this.vertices.length>2&&null!==this.vertices[0].left}swapVertices(t,e){const s=this.vertices[t];this.vertices[t]=this.vertices[e],this.vertices[e]=s}iterateVertices(t){if(0===this.vertices.length)return;const e=this.vertices[0];let r=e;do{t(r,r.index),r=s(r.right)?r.right.right:null}while(r!==e&&null!=r)}}class a extends e{constructor(t){super(),this.coordinateHelper=t,this.undoStack=[],this.redoStack=[],this.components=[]}apply(t,e=1){return 0!==e&&!r(this.lastOperation)&&this.lastOperation.accumulate(t)||(t.apply(),this.undoStack.push(t),this.redoStack=[]),t}undo(){if(this.undoStack.length>0){const t=this.undoStack.pop();return t.undo(),this.redoStack.push(t),t}return null}get canUndo(){return this.undoStack.length>0}get lastOperation(){return this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:null}redo(){if(this.redoStack.length>0){const t=this.redoStack.pop();return t.apply(),this.undoStack.push(t),t}return null}get canRedo(){return this.redoStack.length>0}toPoint(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.createPoint(this.components[0].vertices[0].pos)}toPolyline(){const t=[],e=this.coordinateHelper.toArray;return this.components.forEach(((s,r)=>{const i=[];let n=s.vertices.find((t=>null==t.left));const o=n;do{i.push(e(n.pos)),n=n.right?n.right.right:null}while(n&&n!==o);t.push(i)})),new n({paths:t,spatialReference:this.coordinateHelper.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}toPolygon(){const t=[],e=this.coordinateHelper.toArray;return this.components.forEach(((r,i)=>{const n=[],o=r.vertices[0];let h=o;const c=h;do{n.push(e(h.pos)),h=s(h.right)?h.right.right:null}while(h&&h!==c);r.isClosed()&&n.push(e(o.pos)),t.push(n)})),new i({rings:t,spatialReference:this.coordinateHelper.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}static fromGeometry(e,s){const r=o(e.hasZ,e.hasM,e.spatialReference,s),i=new a(r);switch(e.type){case\"polygon\":{const s=e.rings;for(let e=0;e<s.length;++e){const n=s[e],o=new l(i),a=n.length>2&&t(n[0],n[n.length-1]),p=a?n.length-1:n.length;for(let t=0;t<p;++t){const e=r.fromArray(n[t]),s=new h(o);o.vertices.push(s),s.pos=e,s.index=t}const u=o.vertices.length-1;for(let t=0;t<u;++t){const e=o.vertices[t],s=o.vertices[t+1],r=new c(o,e,s);o.edges.push(r)}if(a){const t=new c(o,o.vertices[o.vertices.length-1],o.vertices[0]);o.edges.push(t)}i.components.push(o)}}break;case\"polyline\":for(const t of e.paths){const e=new l(i),s=t.length;for(let i=0;i<s;++i){const s=r.fromArray(t[i]),n=new h(e);e.vertices.push(n),n.pos=s,n.index=i}const n=e.vertices.length-1;for(let t=0;t<n;++t){const s=e.vertices[t],r=e.vertices[t+1],i=new c(e,s,r);e.edges.push(i)}i.components.push(e)}break;case\"point\":{const t=new l(i),s=new h(t);s.index=0,s.pos=i.coordinateHelper.fromPoint(e),t.vertices.push(s),i.components.push(t)}}return i}}export{l as Component,c as Edge,a as EditGeometry,h as Vertex};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as t}from\"../../../../core/maybe.js\";import{Vertex as i,Edge as s}from\"../EditGeometry.js\";class h{constructor(e,t,i){this.editGeometry=e,this.component=t,this.pos=i,this.addedVertex=null,this.originalEdge=null,this.left=null,this.right=null}apply(){let h=\"redo\";e(this.addedVertex)&&(h=\"apply\",this.addedVertex=new i(this.component));const d=this.component.getLastVertex();if(e(d))this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,this.addedVertex.index=0;else{let i=null;d.right&&(this.originalEdge=d.right,i=this.originalEdge.right,this.component.edges.splice(this.component.edges.indexOf(this.originalEdge),1)),this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,e(this.left)&&(this.left=new s(this.component,d,this.addedVertex)),this.component.edges.push(this.left),d.right=this.left,t(this.originalEdge)&&t(i)&&(e(this.right)&&(this.right=new s(this.component,this.addedVertex,i)),this.component.edges.push(this.right),i.left=this.right),this.component.updateVertexIndex(this.addedVertex,d.index+1)}const n={addedVertices:[this.addedVertex],operation:h};this.editGeometry.emit(\"change\",n)}undo(){if(e(this.addedVertex))return null;this.component.vertices.splice(this.component.vertices.indexOf(this.addedVertex),1),t(this.left)&&(this.component.edges.splice(this.component.edges.indexOf(this.left),1),this.left.left.right=null),t(this.right)&&(this.component.edges.splice(this.component.edges.indexOf(this.right),1),this.right.right.left=null),t(this.originalEdge)&&(this.component.edges.push(this.originalEdge),this.originalEdge.left.right=this.originalEdge,this.originalEdge.right.left=this.originalEdge),t(this.left)?this.component.updateVertexIndex(this.left.left,this.left.left.index):this.component.updateVertexIndex(this.addedVertex,0);const i={removedVertices:[this.addedVertex],operation:\"undo\"};this.editGeometry.emit(\"change\",i)}accumulate(){return!1}}export{h as AppendVertex};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isNone as t,unwrap as e}from\"../../../../core/maybe.js\";class i{constructor(t,e,i){this.editGeometry=t,this.vertex=e,this.pos=i}apply(){const e=t(this.originalPosition);e&&(this.originalPosition=this.vertex.pos),this._apply(e?\"apply\":\"redo\")}undo(){this.vertex.pos=e(this.originalPosition);const t={updatedVertices:[this.vertex],operation:\"undo\"};this.editGeometry.emit(\"change\",t)}accumulate(t){return t instanceof i&&t.vertex===this.vertex&&(this.pos=t.pos,this._apply(\"apply\"),!0)}_apply(t){this.vertex.pos=this.pos,this.editGeometry.components.forEach((t=>t.unnormalizeVertexPositions()));const e={updatedVertices:[this.vertex],operation:t};this.editGeometry.emit(\"change\",e)}}export{i as SetVertexPosition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../../../core/maybe.js\";import{Edge as t}from\"../EditGeometry.js\";class i{constructor(e,t){this.editGeometry=e,this.component=t,this.createdEdge=null}apply(){let i=\"redo\";if(e(this.createdEdge)){i=\"apply\";const s=this.component.getFirstVertex(),o=this.component.getLastVertex();if(this.component.isClosed()||this.component.vertices.length<3||e(s)||e(o))return;this.createdEdge=new t(this.component,o,s)}this.createdEdge.left.right=this.createdEdge,this.createdEdge.right.left=this.createdEdge,this.component.edges.push(this.createdEdge);const s={operation:i};this.editGeometry.emit(\"change\",s)}undo(){if(e(this.createdEdge))return;this.component.edges.splice(this.component.edges.indexOf(this.createdEdge),1),this.createdEdge.left.right=null,this.createdEdge.right.left=null;const t={operation:\"undo\"};this.editGeometry.emit(\"change\",t)}accumulate(){return!1}}export{i as CloseComponent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../geometry.js\";import t from\"../../../../../core/Evented.js\";import i from\"../../../../../core/Handles.js\";import{isSome as r}from\"../../../../../core/maybe.js\";import{init as o}from\"../../../../../core/watchUtils.js\";import{property as s}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as n}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{createCoordinateHelper as m}from\"../../../../interactive/coordinateHelper.js\";import{EditGeometry as a,Component as h}from\"../../../../interactive/editGeometry/EditGeometry.js\";export{Component,Edge,EditGeometry,Vertex}from\"../../../../interactive/editGeometry/EditGeometry.js\";import{AppendVertex as l}from\"../../../../interactive/editGeometry/operations/AppendVertex.js\";import{SetVertexPosition as c}from\"../../../../interactive/editGeometry/operations/SetVertexPosition.js\";import{CloseComponent as d}from\"../../../../interactive/editGeometry/operations/CloseComponent.js\";import p from\"../../../../../geometry/Point.js\";let y=class extends t.EventedAccessor{constructor(e={}){super(e),this._handles=new i,this._version=0,this._internalGeometryChange=!1}set areaMeasurement(e){this._set(\"areaMeasurement\",e),r(e)&&r(this.view)&&this._initialize(e,this.view)}set view(e){this._set(\"view\",e),r(e)&&r(this.areaMeasurement)&&this._initialize(this.areaMeasurement,e)}get initialized(){return r(this.areaMeasurement)&&r(this.view)}get version(){return this._version}get isValidPolygon(){return this.initialized&&this._editGeometry.components.length>0&&this._editGeometry.components[0].isClosed()}_initialize(e,t){this._handles.removeAll(),this._handles.add(o(e,\"geometry\",(()=>this._updateEditGeometryFromModelGeometry(e,t)),!0)),this._makeDirty(!0)}_makeDirty(e=!1){this.notifyChange(\"isValidPolygon\"),this.notifyChange(\"initialized\"),e&&this.notifyChange(\"numVertices\")}_updateEditGeometryFromModelGeometry(e,t){this._version++,this._internalGeometryChange||(this._handles.remove(\"EditGeometry\"),this._editGeometry=r(e.geometry)?a.fromGeometry(e.geometry,t.viewingMode):new a(m(!0,!1,t.spatialReference,t.viewingMode)),this._makeDirty(!0),this.emit(\"change\",{type:\"change\"}),this._handles.add(this._editGeometry.on(\"change\",(t=>{this._makeDirty(null!=t.addedVertices||null!=t.removedVertices),this._internalGeometryChange=!0,e.geometry=this.numVertices>0?this._editGeometry.toPolygon():null,this._internalGeometryChange=!1})),\"EditGeometry\"))}get vertices(){const e=[];return this.forEachVertex((t=>{e.push(t)})),e}get numVertices(){return this.initialized&&this._editGeometry.components.length>0?this._editGeometry.components[0].vertices.length:0}get lastPoint(){if(this.initialized&&this._editGeometry.components.length>0){const e=this._editGeometry.components[0].getLastVertex();if(r(e))return this._editGeometry.coordinateHelper.createPoint(e.pos)}return null}getVertex(e){if(!this.initialized||0===this._editGeometry.components.length||0===this._editGeometry.components[0].vertices.length)return null;const t=this._editGeometry.components[0].vertices[0];let i=t;do{if(i.index===e)return i;i=i.right.right}while(i!==t&&null!=i);return null}getVertexPositionAsPoint(e){return this._editGeometry.coordinateHelper.createPoint(e.pos)}getVertexPositionAsPointFromIndex(e){return this._editGeometry.coordinateHelper.createPoint(this.getVertex(e).pos)}forEachVertex(e){this.initialized&&this._editGeometry.components.length>0&&this._editGeometry.components[0].iterateVertices(e)}forEachVertexPosition(e){const t=this._editGeometry.coordinateHelper;this.forEachVertex(((i,r)=>{t.toPoint(i.pos,u),e(u,r)}))}clear(){r(this.areaMeasurement)&&(this.areaMeasurement.geometry=null)}add(e){if(!this.initialized)return null;0===this._editGeometry.components.length&&this._editGeometry.components.push(new h(this._editGeometry));const t=new l(this._editGeometry,this._editGeometry.components[0],this._editGeometry.coordinateHelper.fromPoint(e));return this._editGeometry.apply(t),this.emit(\"change\",{type:\"change\"}),t}close(){if(!this.initialized)return null;if(0===this._editGeometry.components.length)return null;const e=this._editGeometry.components[0],t=new d(this._editGeometry,e);return this._editGeometry.apply(t),this.emit(\"change\",{type:\"change\"}),t}ensureContains(e,t=\"\"){let i=!1;if(this._editGeometry.components.forEach((t=>{t.iterateVertices((t=>{t===e&&(i=!0)}))})),!i)throw new Error(`vertex doesnt exist ${t}`);return i}setVertexPosition(e,t){if(!this.initialized)return null;const i=new c(this._editGeometry,e,this._editGeometry.coordinateHelper.fromPoint(t));return this._editGeometry.apply(i),this.emit(\"change\",{type:\"change\"}),i}equals(e){if(this.numVertices!==e.numVertices)return!1;let t=!0;return this.forEachVertexPosition(((i,r)=>{const o=e.getVertexPositionAsPointFromIndex(r);i.equals(o)||(t=!1)})),!!t}};e([s({value:null})],y.prototype,\"areaMeasurement\",null),e([s({value:null})],y.prototype,\"view\",null),e([s()],y.prototype,\"isValidPolygon\",null),e([s()],y.prototype,\"numVertices\",null),y=e([n(\"esri.views.3d.interactive.graphics.AreaMeasurement3D.AreaMeasurement3DPathHelper\")],y);const u=new p;export{y as AreaMeasurement3DPathHelper};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../../chunks/tslib.es6.js\";import e from\"../../../../../core/Accessor.js\";import{destroyMaybe as t}from\"../../../../../core/maybe.js\";import{property as o}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as s}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{AreaMeasurement3DPathHelper as a}from\"./AreaMeasurementPathHelper.js\";import{UnitNormalizer as p}from\"../support/UnitNormalizer.js\";let i=class extends e{constructor(){super(...arguments),this.measurementData=null,this.unitNormalizer=new p,this.path=new a,this.lastDraggedVertex=null}destroy(){this.measurementData=null,this.path=t(this.path)}get validMeasurement(){return this.path.isValidPolygon}};r([o()],i.prototype,\"measurementData\",void 0),r([o()],i.prototype,\"validMeasurement\",null),r([o()],i.prototype,\"unitNormalizer\",void 0),r([o()],i.prototype,\"path\",void 0),r([o()],i.prototype,\"lastDraggedVertex\",void 0),r([o()],i.prototype,\"cursorPoint\",void 0),i=r([s(\"esri.views.3d.layers.analysis.AreaMeasurement3D.AreaMeasurementLayerViewData\")],i);export{i as AreaMeasurementLayerViewData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{s as e,b as t,a as n,h as r,d as o,i,c as s,n as a,g as f}from\"../../../../../chunks/vec3.js\";import{c as u}from\"../../../../../chunks/vec3f64.js\";import{geodesicArea as c}from\"../../../../../geometry/geometryEngine.js\";import l from\"../../../../../geometry/Polygon.js\";import{projectPointToVector as g,projectPointToWGS84ComparableLonLat as m,projectVectorToWGS84ComparableLonLat as h}from\"../../../../../geometry/projection.js\";import p from\"../../../../../geometry/SpatialReference.js\";import{inverseGeodeticSolver as d}from\"../../../../../geometry/support/geodesicUtils.js\";import{planeFromPoints as j}from\"../../../support/mathUtils.js\";var b;!function(u){function l(o,i){const s=i.center;e(s,0,0,0);for(let e=0;e<o.length;++e)t(s,s,o[e]);n(s,s,1/o.length);let a=0;for(let e=0;e<o.length;++e)a=Math.max(a,r(s,o[e]));i.radius=Math.sqrt(a)}function p(e,t){if(e.length<3)throw new Error(\"need at least 3 points to fit a plane\");j(e[0],e[1],e[2],t)}function b(e,t){return o(e,t)+e[3]}function G(e,t,n){return g(e,y,n)&&g(t,M,n)?i(y,M):0}function S(e,t){if(!m(e,y)||!m(t,M))return 0;const n={distance:null};return d(n,[y[0],y[1]],[M[0],M[1]]),n.distance}function w(e,t,n){const r={distance:null};return d(r,[e[0],e[1]],[t[0],t[1]],n),r.distance}function z(e,t,n){const r=t[0]-e[0],o=t[1]-e[1],i=n[0]-e[0],s=n[1]-e[1];return.5*Math.abs(r*s-o*i)}function L(e,t,n,r){const o=v;return h(e,r,y)&&h(t,r,M)&&h(n,r,P)?(o.setPoint(0,0,y),o.setPoint(0,1,M),o.setPoint(0,2,P),Math.abs(c(o,\"square-meters\"))):0}function k(t,n,r){Math.abs(t[0])>Math.abs(t[1])?e(n,0,1,0):e(n,1,0,0),s(r,t,n),a(n,n),s(n,r,t),a(r,r)}function q(n,r=null,i=!0){const u=1e-6,c=(e,t)=>{if(0===t[0]&&0===t[1]&&0===t[2])return!1;for(let n=0;n<e.length;++n)if(o(t,e[n])<-u)return!1;return!0};if(0===n.length)return!1;if(1===n.length)return r&&f(r,n[0]),!0;e(E,0,0,0);for(let e=0;e<n.length;++e)t(E,E,n[e]);if(a(E,E),c(n,E))return r&&f(r,E),!0;if(!i)return!1;for(let e=0;e<n.length;++e)for(let t=0;t<n.length;++t)if(e!==t&&(s(E,n[e],n[t]),a(E,E),c(n,E)))return r&&f(r,E),!0;return!1}function x(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(let n=0;n<e.size;++n)if(!t.has(e[n]))return!1;return!0}u.boundingSphere=l,u.bestFitPlane=p,u.planePointDistance=b,u.segmentLengthEuclidean=G,u.segmentLengthGeodesic=S,u.segmentLengthGeodesicVector=w,u.triangleAreaEuclidean=z,u.triangleAreaGeodesic=L,u.tangentFrame=k,u.fitHemisphere=q,u.compareSets=x}(b||(b={}));const y=u(),M=u(),P=u(),v=new l({rings:[[y,M,P]],spatialReference:p.WGS84}),E=u();var G=b;export default G;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import{bindMultipassTerrainTexture as e}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{bindProjectionMatrix as t,bindView as o}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as i}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as s}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as a,parameter as n}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as p}from\"../lib/DefaultVertexAttributeLocations.js\";import{OITBlending as l,OITDepthTest as c,OITDepthWrite as m}from\"../lib/OrderIndependentTransparency.js\";import{Program as d}from\"../lib/Program.js\";import{C as h}from\"../../../../chunks/CheckerBoard.glsl.js\";import{makePipelineState as u,defaultDepthWriteParams as f,defaultColorWriteParams as g,separateBlendingParams as b}from\"../../../webgl/renderState.js\";class y extends s{initializeProgram(r){const e=y.shader.get(),t=this.configuration,o=e.build({OITEnabled:0===t.transparencyPassType,multipassTerrainEnabled:t.multipassTerrainEnabled,cullAboveGround:t.cullAboveGround});return new d(r.rctx,o,p)}bindPass(r,o){t(this.program,o.camera.projectionMatrix),this.program.setUniform2fv(\"size\",r.size),this.program.setUniform4fv(\"color1\",r.color1),this.program.setUniform4fv(\"color2\",r.color2),o.multipassTerrainEnabled&&(this.program.setUniform2fv(\"cameraNearFar\",o.camera.nearFar),this.program.setUniform2fv(\"inverseViewport\",o.inverseViewport),e(this.program,o))}bindDraw(r){o(this.program,r)}setPipelineState(r){const e=this.configuration,t=3===r,o=2===r;return u({blending:e.transparent?t?v:l(r):null,depthTest:{func:c(r)},depthWrite:t?e.writeDepth&&f:m(r),colorWrite:g,polygonOffset:t||o?e.polygonOffset&&T:{factor:-1,units:-25}})}initializePipeline(){return this.setPipelineState(this.configuration.transparencyPassType)}}y.shader=new i(h,(()=>import(\"./CheckerBoard.glsl.js\")));const T={factor:0,units:-25},v=b(770,1,771,771);class j extends a{constructor(){super(...arguments),this.transparent=!1,this.writeDepth=!0,this.polygonOffset=!1,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!1}}r([n()],j.prototype,\"transparent\",void 0),r([n()],j.prototype,\"writeDepth\",void 0),r([n()],j.prototype,\"polygonOffset\",void 0),r([n({count:4})],j.prototype,\"transparencyPassType\",void 0),r([n()],j.prototype,\"multipassTerrainEnabled\",void 0),r([n()],j.prototype,\"cullAboveGround\",void 0);export{y as CheckerBoardTechnique,j as CheckerBoardTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../lib/GLMaterial.js\";import{Material as t,materialParametersDefaults as r}from\"../lib/Material.js\";import{DefaultBufferWriter as i,PositionUVLayout as s}from\"./internal/DefaultBufferWriter.js\";import{intersectTriangleGeometry as n}from\"./internal/MaterialUtil.js\";import{CheckerBoardTechniqueConfiguration as a,CheckerBoardTechnique as o}from\"../shaders/CheckerBoardTechnique.js\";class u extends t{constructor(e){super(e,c),this.techniqueConfig=new a}dispose(){}getPassParameters(){return this.params}getTechniqueConfig(e){return this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig.transparencyPassType=e?e.transparencyPassType:3,this.techniqueConfig.multipassTerrainEnabled=!!e&&e.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!!e&&e.cullAboveGround,this.techniqueConfig}intersect(e,t,r,i,s,a,o){return n(e,t,i,s,a,void 0,o)}getGLMaterial(e){return 0===e.output||7===e.output?new h(e):void 0}createBufferWriter(){return new i(s)}}class h extends e{constructor(e){super(e),this.updateParameters()}updateParameters(e){this._technique=this._techniqueRep.releaseAndAcquire(o,this._material.getTechniqueConfig(e),this._technique)}beginSlot(e){let t=3;return this._technique.configuration.transparent&&(t=this._technique.configuration.writeDepth?5:8),e===t}ensureParameters(e){this.updateParameters(e)}bind(e){this._technique.bindPass(this._material.getPassParameters(),e)}}const c={size:[1,1],color1:[.75,.75,.75,1],color2:[.5,.5,.5,1],transparent:!1,writeDepth:!0,polygonOffset:!1,...r};export{u as CheckerBoardMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as r}from\"../../../../core/maybe.js\";import{u as t}from\"../../../../chunks/mat4.js\";import{f as s}from\"../../../../chunks/vec3.js\";import{c as o}from\"../../../../chunks/vec3f64.js\";import{Object3DVisualElement as i}from\"./Object3DVisualElement.js\";import{Geometry as c}from\"../../webgl-engine/lib/Geometry.js\";import{CheckerBoardMaterial as a}from\"../../webgl-engine/materials/CheckerBoardMaterial.js\";class l extends i{constructor(e){super(e),this._checkerBoardMaterial=null,this._renderOccluded=4,this._geometry=null,this._size=[1,1],this._color1=[1,.5,0,.5],this._color2=[1,1,1,.5],this.applyProps(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this.updateMaterial())}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.geometryChanged()}get size(){return this._size}set size(e){this._size=e,this.updateMaterial()}get color1(){return this._color1}set color1(e){this._color1=e,this.updateMaterial()}get color2(){return this._color2}set color2(e){this._color2=e,this.updateMaterial()}updateMaterial(){e(this._checkerBoardMaterial)&&this._checkerBoardMaterial.setParameterValues({size:this._size,color1:this._color1,color2:this._color2,renderOccluded:this._renderOccluded})}createExternalResources(){this._checkerBoardMaterial=new a({size:this._size,color1:this._color1,color2:this._color2,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:4})}destroyExternalResources(){this._checkerBoardMaterial=null}forEachExternalMaterial(r){e(this._checkerBoardMaterial)&&r(this._checkerBoardMaterial)}createGeometries(e){if(r(this._geometry)||r(this._checkerBoardMaterial))return;const i=h;t(i,this.transform);const a=this._geometry,l=[],d=o();a.position.forEach((e=>{s(d,e,i),l.push(d[0],d[1],d[2])}));const n=[];a.uv.forEach((e=>{n.push(e[0],e[1])}));const u=new c([[\"position\",{size:3,data:l,exclusive:!0}],[\"uv0\",{size:2,data:n,exclusive:!0}]],[[\"position\",a.triangleIndices],[\"uv0\",a.triangleIndices]]);e.addGeometry(u,this._checkerBoardMaterial)}geometryChanged(){this.recreateGeometry()}}const h=o();export{l as MeasurementAreaVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../intl.js\";import t from\"../../../../../core/Accessor.js\";import\"../../../../../core/has.js\";import i from\"../../../../../core/Handles.js\";import{nextHighestPowerOfTen as s}from\"../../../../../core/mathUtils.js\";import{isNone as r,isSome as n,unwrap as a}from\"../../../../../core/maybe.js\";import o from\"../../../../../core/Quantity.js\";import{formatDecimal as l}from\"../../../../../core/quantityFormatUtils.js\";import{convertUnit as h,preferredImperialAreaUnit as m,preferredMetricAreaUnit as c,preferredImperialLengthUnit as d,preferredMetricLengthUnit as u}from\"../../../../../core/unitUtils.js\";import{whenOnce as p}from\"../../../../../core/watchUtils.js\";import{property as g}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as _}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{reactionInit as L}from\"../../../../../core/accessorSupport/trackingUtils.js\";import{i as b,t as v}from\"../../../../../chunks/mat4.js\";import{c as f}from\"../../../../../chunks/mat4f64.js\";import{f as w}from\"../../../../../chunks/vec3.js\";import{c as S}from\"../../../../../chunks/vec3f64.js\";import y from\"../../../interactive/measurementTools/support/measurementUtils.js\";import{midpoint as j}from\"../../../interactive/measurementTools/support/viewUtils.js\";import{LabelVisualElement as C}from\"../../../interactive/visualElements/LabelVisualElement.js\";import{LineVisualElement as P}from\"../../../interactive/visualElements/LineVisualElement.js\";import{MeasurementAreaVisualElement as V}from\"../../../interactive/visualElements/MeasurementAreaVisualElement.js\";import{GeodesicSegment as A,EuclideanSegment as D}from\"../../../interactive/visualElements/support/Segment.js\";import{createStipplePatternSimple as R}from\"../../../webgl-engine/materials/lineStippleUtils.js\";import{onLocaleChange as M}from\"../../../../../intl/locale.js\";import{fetchMessageBundle as I}from\"../../../../../intl/messages.js\";let U=class extends t{constructor(e){super(e),this._handles=new i,this._params={...z},this._path=null,this._intersectedPath=null,this._perimeter=null,this._intersectedPerimeter=null,this._projectionLines=null,this._measurementArea=null,this._areaLabel=null,this._pathLengthLabel=null,this._cursorSegmentLengthLabel=null,this._perimeterLengthLabel=null,this._pathSegments=[],this._perimeterSegments=[],this._cursorSegment=null,this._origin=S(),this._originTransform=f(),this._cursorPositionRenderSpace=S(),this.messages=null,this.viewData=k,this.areaLabel=null,this.perimeterLengthLabel=null,this.mode=\"auto\",this.geodesicMeasurementDistanceThreshold=1e5}get visible(){return this.layerView.visible&&!this.layerView.suspended}get testData(){return{labels:{area:this._areaLabel,pathLength:this._pathLengthLabel,cursorSegmentLength:this._cursorSegmentLengthLabel,perimeterLength:this._perimeterLengthLabel}}}initialize(){const e=this.view;this._path=new P({view:e,attached:!0,width:this._params.pathLineWidth,color:this._params.pathLineColor,polygonOffset:!0,renderOccluded:4}),this._intersectedPath=new P({view:e,attached:!0,width:this._params.pathLineWidth,color:this._params.intersectingLineColor,polygonOffset:!0,renderOccluded:4}),this._perimeter=new P({view:e,attached:!0,width:this._params.perimeterLineWidth,color:this._params.perimeterLineColor,polygonOffset:!0,renderOccluded:4}),this._intersectedPerimeter=new P({view:e,attached:!0,width:this._params.perimeterLineWidth,color:this._params.intersectingLineColor,polygonOffset:!0,renderOccluded:4}),this._projectionLines=new P({view:e,attached:!0,width:this._params.projectionLineWidth,color:this._params.projectionLineColor,stipplePattern:R(this._params.projectionLineStippleSize),stippleIntegerRepeats:!1,polygonOffset:!0,renderOccluded:4}),this._measurementArea=new V({view:e,attached:!0,color1:this._params.areaColor1,color2:this._params.areaColor2}),this._areaLabel=new C({view:this.view,attached:!0,fontSize:16}),this._pathLengthLabel=new C({view:e,attached:!0,fontSize:12}),this._cursorSegmentLengthLabel=new C({view:e,attached:!0,fontSize:12}),this._perimeterLengthLabel=new C({view:e,attached:!0,fontSize:12});const t=this.layerView,i=t.layerViewData;this._handles.add([L((()=>[this.mode,this.visible,t.unit,i.measurementData,i.cursorPoint]),(()=>this._update())),L((()=>{var t;return null==(t=e.state)?void 0:t.camera}),(()=>this._updateLabels())),M((async()=>this._updateMessageBundle()))]),this._updateMessageBundle()}destroy(){this._measurementArea.destroy(),this._measurementArea=null,this._path.destroy(),this._path=null,this._intersectedPath.destroy(),this._intersectedPath=null,this._perimeter.destroy(),this._perimeter=null,this._intersectedPerimeter.destroy(),this._intersectedPerimeter=null,this._areaLabel.destroy(),this._areaLabel=null,this._pathLengthLabel.destroy(),this._pathLengthLabel=null,this._cursorSegmentLengthLabel.destroy(),this._cursorSegmentLengthLabel=null,this._perimeterLengthLabel.destroy(),this._perimeterLengthLabel=null,this.set(\"view\",null)}async whenMessages(){await p(this,\"messages\")}_update(){if(this.destroyed)return;const e=this.layerView.layerViewData.measurementData;r(e)||(this._updateViewData(e,this.layerView.layerViewData.path,this.layerView.layerViewData.cursorPoint),this._updateOrigin(),this._updatePathSegments(),this._updatePerimeterSegments(),this._updateArea(),this._updateProjectionLines(),this._updateLabels())}_updateViewData(e,t,i){const r=t.isValidPolygon,a=t.lastPoint,l=n(a)&&n(i)?new o(y.segmentLengthGeodesic(a,i),\"meters\"):null,m=n(a)&&n(i)?new o(e.unitNormalizer.normalizeDistance(y.segmentLengthEuclidean(a,i,e.unitNormalizer.spatialReference)),\"meters\"):null;let c;if(\"auto\"===this.mode){c=\"euclidean\";(e.geodesicPathLength?e.geodesicPathLength.value:0)+(!r&&n(l)?l.value:0)>this.geodesicMeasurementDistanceThreshold&&(c=\"geodesic\")}else c=this.mode;null==e.geodesicPathLength&&(c=\"euclidean\");const d=\"geodesic\"===c,u=d?e.geodesicArea:e.area;let p=1;if(u){const t=this._toPreferredAreaUnit(u,this.layerView.unit);p=s(Math.sqrt(t.value)/Math.sqrt(300)),p*=Math.sqrt(h(1,t.unit,\"square-meters\")),p/=e.unitNormalizer.normalizeDistance(1)}const g={validMeasurement:r,path:t,pathVersion:t.version,cursorPoint:i,measurementData:e,mode:c,positionsGeographic:e.positionsGeographic,positionsRenderCoords:e.positionsRenderCoords,positionsProjected:e.positionsProjectedWorldCoords,positionsFittedRenderCoords:e.positionsFittedRenderCoords,intersectingSegments:d?e.geodesicIntersectingSegments:e.intersectingSegments,triangleIndices:d?e.geodesicTriangleIndices:e.triangleIndices,fittingMode:e.fittingMode,areaCentroid:d?e.geodesicAreaCentroidRenderCoords:e.areaCentroidRenderCoords,pathLengthLabelSegmentIndex:r?0:t.numVertices-2,perimeterLengthLabelSegmentIndex:0,checkerSize:p,geodesicCursorSegmentLength:l,cursorSegmentLength:m};this._set(\"viewData\",g)}_updateOrigin(){const e=this.viewData;j(e.positionsRenderCoords,this._origin),b(this._originTransform),v(this._originTransform,this._originTransform,this._origin),this._measurementArea.transform=this._originTransform,this._projectionLines.transform=this._originTransform}_createSegments(e){const t=this.viewData,i=t.path,s=this.view.renderCoordsHelper.spatialReference,r=t.mode,n=[],a=[],o=[],l=t.validMeasurement?i.numVertices:i.numVertices-1;for(let h=0;h<l;++h){const l=t[e][h],m=t[e][(h+1)%i.numVertices];let c=null;switch(r){case\"euclidean\":c=new D(l,m);break;case\"geodesic\":c=new A(l,m,s)}t.intersectingSegments.has(h)?o.push(c):a.push(c),n.push(c)}return{all:n,nonIntersecting:a,intersecting:o}}_updatePathSegments(){const e=this.visible,t=this.viewData,i=this._createSegments(\"positionsRenderCoords\"),s=t.path,r=!s.isValidPolygon,a=t.cursorPoint,o=this.view.renderCoordsHelper,l=o.spatialReference,h=t.mode;if(this._cursorSegment=null,s.numVertices>0&&r&&n(a)){if(o.toRenderCoords(a,this._cursorPositionRenderSpace)){const e=t.positionsRenderCoords[s.numVertices-1],r=this._cursorPositionRenderSpace;let n=null;switch(h){case\"euclidean\":n=new D(e,r);break;case\"geodesic\":n=new A(e,r,l)}i.nonIntersecting.push(n),this._cursorSegment=n}}this._path.setGeometryFromSegments(i.nonIntersecting,this._origin),this._path.visible=e,this._intersectedPath.setGeometryFromSegments(i.intersecting,this._origin),this._intersectedPath.visible=e,this._pathSegments=i.all}_updatePerimeterSegments(){const e=this.visible&&\"euclidean\"===this.viewData.mode,t=this._createSegments(\"positionsFittedRenderCoords\");this._perimeter.setGeometryFromSegments(t.nonIntersecting,this._origin),this._perimeter.visible=e,this._intersectedPerimeter.setGeometryFromSegments(t.intersecting,this._origin),this._intersectedPerimeter.visible=e,this._perimeterSegments=t.all}_updateArea(){const e=this.viewData;switch(e.mode){case\"euclidean\":this._updateAreaEuclidean(e);break;case\"geodesic\":this._updateAreaGeodesic()}}_updateAreaEuclidean(e){const t=this.visible;e.validMeasurement&&0===e.intersectingSegments.size&&e.triangleIndices?(this._measurementArea.geometry={uv:e.positionsProjected,position:e.positionsFittedRenderCoords,triangleIndices:e.triangleIndices},this._measurementArea.size=[e.checkerSize,e.checkerSize],this._measurementArea.visible=t):this._measurementArea.visible=!1}_updateAreaGeodesic(){this._measurementArea.visible=!1}_updateProjectionLines(){const e=this.viewData,t=this.visible,i=e.path,s=e.mode;if(i.numVertices>0&&e.validMeasurement&&\"euclidean\"===s){const s=[];for(let t=0;t<i.numVertices;++t){const i=S();w(i,e.positionsRenderCoords[t],this._origin);const r=S();w(r,e.positionsFittedRenderCoords[t],this._origin),s.push([i,r])}this._projectionLines.geometry=s,this._projectionLines.visible=t}else this._projectionLines.geometry=null,this._projectionLines.visible=!1}_updateLabels(){if(this.destroyed)return;const e=this.viewData,t=e.path;if(!t)return;const i=e.measurementData,s=e.mode,r=!t.isValidPolygon,o=this.visible,l=this._formatAreaLabel(this.messages,\"geodesic\"===s?i.geodesicArea:i.area,this.layerView.unit);n(l)?(this._areaLabel.geometry={type:\"point\",point:e.areaCentroid},this._areaLabel.text=l,this._areaLabel.visible=e.validMeasurement&&0===e.intersectingSegments.size&&o):this._areaLabel.visible=!1,this._set(\"areaLabel\",a(l));const h=this._formatLengthLabel(this.messages,\"geodesic\"===s?i.geodesicPathLength:i.pathLength,this.layerView.unit);if(n(h)&&e.pathLengthLabelSegmentIndex>=0&&e.pathLengthLabelSegmentIndex<this._pathSegments.length){const i=this._pathSegments[e.pathLengthLabelSegmentIndex],s=n(this._cursorSegment)?this._cursorSegment:O;this._pathLengthLabel.distance=this._params.labelDistance,this._pathLengthLabel.geometry={type:\"corner\",left:i,right:s},this._pathLengthLabel.text=h,this._pathLengthLabel.visible=r&&t.numVertices>0&&o}else this._pathLengthLabel.visible=!1;const m=\"geodesic\"===s?e.geodesicCursorSegmentLength:e.cursorSegmentLength;if(n(m)){const e=this._formatLengthLabel(this.messages,m,this.layerView.unit);this._cursorSegmentLengthLabel.distance=this._params.labelDistance,this._cursorSegmentLengthLabel.geometry=n(this._cursorSegment)?{type:\"segment\",segment:this._cursorSegment,sampleLocation:\"end\"}:null,this._cursorSegmentLengthLabel.anchor=\"bottom\",this._cursorSegmentLengthLabel.text=a(e),this._cursorSegmentLengthLabel.visible=r&&0!==m.value&&o}else this._cursorSegmentLengthLabel.visible=!1;this._cursorSegmentLengthLabel.overlaps(this._pathLengthLabel)&&(this._cursorSegmentLengthLabel.visible=!1),this._pathLengthLabel.overlaps(this._areaLabel)&&(this._pathLengthLabel.visible=!1);const c=\"geodesic\"===e.mode,d=c?i.geodesicPathLength:i.perimeterLength,u=a(null!=d?this._formatLengthLabel(this.messages,d,this.layerView.unit):null);if(this._set(\"perimeterLengthLabel\",a(u)),e.validMeasurement&&0===e.intersectingSegments.size){this._perimeterLengthLabel.distance=this._params.labelDistance,this._perimeterLengthLabel.anchor=\"top\",this._perimeterLengthLabel.text=u,this._perimeterLengthLabel.visible=!0;let t=!0;for(let i=0;i<e.path.numVertices;++i){const s=(e.perimeterLengthLabelSegmentIndex+i)%e.path.numVertices,r=c?this._pathSegments[s]:this._perimeterSegments[s];if(t=!0,this._perimeterLengthLabel.geometry={type:\"segment\",segment:r,sampleLocation:\"center\"},!this._perimeterLengthLabel.overlaps(this._areaLabel))break;t=!1}this._perimeterLengthLabel.visible=t&&o}else this._perimeterLengthLabel.visible=!1}_toPreferredAreaUnit(e,t){return e.toUnit(this._preferredAreaUnit(e,t))}_preferredAreaUnit(e,t){switch(t){case\"metric\":return c(e.value,e.unit);case\"imperial\":return m(e.value,e.unit);default:return t}}_preferredLengthUnit(e,t){const i=this._deriveLengthUnitFromAreaUnit(t);switch(i){case\"metric\":return u(e.value,e.unit);case\"imperial\":return d(e.value,e.unit);default:return i}}_deriveLengthUnitFromAreaUnit(e){switch(e){case\"metric\":return\"metric\";case\"imperial\":return\"imperial\";case\"square-inches\":return\"inches\";case\"square-feet\":return\"feet\";case\"square-yards\":return\"yards\";case\"square-miles\":return\"miles\";case\"square-us-feet\":return\"us-feet\";case\"square-millimeters\":return\"millimeters\";case\"square-centimeters\":return\"centimeters\";case\"square-decimeters\":return\"decimeters\";case\"square-meters\":return\"meters\";case\"square-kilometers\":return\"kilometers\";case\"acres\":return\"imperial\";case\"ares\":case\"hectares\":return\"metric\"}throw new Error(\"unhandled area unit\")}_formatAreaLabel(e,t,i){return e&&t&&l(e,t,this._preferredAreaUnit(t,i))}_formatLengthLabel(e,t,i){return e&&t&&l(e,t,this._preferredLengthUnit(t,i))}_updateMessageBundle(){I(\"esri/core/t9n/Units\").then((e=>{this.messages=e,this.view&&this._update()}))}};e([g()],U.prototype,\"view\",void 0),e([g()],U.prototype,\"messages\",void 0),e([g()],U.prototype,\"analysis\",void 0),e([g()],U.prototype,\"viewData\",void 0),e([g()],U.prototype,\"layerView\",void 0),e([g({readOnly:!0})],U.prototype,\"areaLabel\",void 0),e([g({readOnly:!0})],U.prototype,\"perimeterLengthLabel\",void 0),e([g()],U.prototype,\"mode\",void 0),e([g({readOnly:!0})],U.prototype,\"visible\",null),e([g()],U.prototype,\"geodesicMeasurementDistanceThreshold\",void 0),U=e([_(\"esri.views.3d.layers.analysis.AreaMeasurement.AreaMeasurementView\")],U);const z={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:1,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5,handleRadiusHovered:10,handleRadiusMouse:10,handleRadiusTouch:25,pathLineColor:[1,.5,0,1],pathLineWidth:3,intersectingLineColor:[1,.2,0,1],perimeterLineColor:[1,.5,0,1],perimeterLineWidth:2,projectionLineColor:[1,.5,0,1],projectionLineWidth:2,projectionLineStippleSize:5,areaColor1:[1,.5,0,.5],areaColor2:[1,1,1,.5],fillColor:[1,.5,0,.5],lineSubdivisions:64,labelDistance:25},k={validMeasurement:!1,path:null,pathVersion:-1,cursorPoint:null,measurementData:null,mode:null,positionsGeographic:null,positionsRenderCoords:null,positionsProjected:null,positionsFittedRenderCoords:null,intersectingSegments:null,triangleIndices:null,fittingMode:null,areaCentroid:null,pathLengthLabelSegmentIndex:null,perimeterLengthLabelSegmentIndex:null,checkerSize:null,geodesicCursorSegmentLength:null,cursorSegmentLength:null},O=new D(S(),S());export{U as AreaMeasurementView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{unwrapOr as t,isSome as r,destroyMaybe as a}from\"../../../core/maybe.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{defaultUnitPropertyMetadata as o}from\"../../../properties/defaultUnit.js\";import{LayerView3D as n}from\"./LayerView3D.js\";import{AreaMeasurementController as l}from\"./analysis/AreaMeasurement/AreaMeasurementController.js\";import{AreaMeasurementLayerViewData as p}from\"./analysis/AreaMeasurement/AreaMeasurementLayerViewData.js\";import{AreaMeasurementView as y}from\"./analysis/AreaMeasurement/AreaMeasurementView.js\";import h from\"../../layers/LayerView.js\";let u=class extends(n(h)){constructor(e){super(e),this.type=\"area-measurement-3d\",this.layerViewData=new p,this._userUnit=null}set unit(e){this._userUnit=e}get unit(){return t(this._userUnit,this._defaultUnit)}get result(){if(r(this.layerViewData.measurementData)){const e=this.layerViewData.measurementData;return{area:e.area,geodesicArea:e.geodesicArea,pathLength:e.pathLength,geodesicPathLength:e.geodesicPathLength,perimeterLength:e.perimeterLength}}return{area:null,geodesicArea:null,pathLength:null,geodesicPathLength:null,perimeterLength:null}}initialize(){this.layerViewData.path.view=this.view,this.layerViewData.path.areaMeasurement=this.layer,this.analysisView=new y({view:this.view,analysis:this.layer,layerView:this}),this.analysisController=new l({view:this.view,analysis:this.layer,layerViewData:this.layerViewData})}destroy(){this.analysisController=a(this.analysisController),this.analysisView=a(this.analysisView)}get testData(){return{view:this.analysisView,controller:this.analysisController}}};e([s()],u.prototype,\"type\",void 0),e([s()],u.prototype,\"analysisView\",void 0),e([s()],u.prototype,\"analysisController\",void 0),e([s()],u.prototype,\"unit\",null),e([s()],u.prototype,\"layer\",void 0),e([s()],u.prototype,\"result\",null),e([s()],u.prototype,\"layerViewData\",void 0),e([s(o)],u.prototype,\"_defaultUnit\",void 0),e([s()],u.prototype,\"_userUnit\",void 0),u=e([i(\"esri.views.3d.layers.AreaMeasurementLayerView3D\")],u);var m=u;export default m;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{ReadLinearDepth as e}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{multipassTerrainTest as a}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{ColorConversion as r}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{glsl as i}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as d}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function o(o){const t=new d;return t.extensions.add(\"GL_OES_standard_derivatives\"),t.attributes.add(\"position\",\"vec3\"),t.attributes.add(\"uv0\",\"vec2\"),t.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),t.varyings.add(\"vUV\",\"vec2\"),o.multipassTerrainEnabled&&t.varyings.add(\"depth\",\"float\"),t.vertex.code.add(i`\n    void main(void) {\n      vUV = uv0;\n      ${o.multipassTerrainEnabled?\"depth = (view * vec4(position, 1.0)).z;\":\"\"}\n      gl_Position = proj * view * vec4(position, 1.0);\n    }\n  `),o.multipassTerrainEnabled&&(t.fragment.include(e),t.include(a,o)),t.fragment.uniforms.add(\"size\",\"vec2\").add(\"color1\",\"vec4\").add(\"color2\",\"vec4\"),t.fragment.include(r),t.fragment.code.add(i`\n    void main() {\n      ${o.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n      vec2 uvScaled = vUV / (2.0 * size);\n\n      vec2 uv = fract(uvScaled - 0.25);\n      vec2 ab = clamp((abs(uv - 0.5) - 0.25) / fwidth(uvScaled), -0.5, 0.5);\n      float fade = smoothstep(0.25, 0.5, max(fwidth(uvScaled.x), fwidth(uvScaled.y)));\n      float t = mix(abs(ab.x + ab.y), 0.5, fade);\n\n      gl_FragColor = mix(color2, color1, t);\n      ${o.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n    }\n  `),t}var t=Object.freeze({__proto__:null,build:o});export{t as C,o as b};\n"],"sourceRoot":""}