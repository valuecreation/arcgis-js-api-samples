{"version":3,"sources":["../node_modules/@arcgis/core/views/layers/TileLayerView.js","../node_modules/@arcgis/core/views/3d/layers/TileLayerView3D.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/support/drapedUtils.js"],"names":["i","c","e","s","layer","a","this","Promise","reject","r","type","get","allSublayers","toArray","filter","minScale","t","maxScale","popupTemplate","popupEnabled","visible","o","map","async","createQuery","event","p","renderer","geometry","createFetchPopupFeaturesQueryGeometry","outFields","getRequiredFields","queryFeatures","features","then","concat","value","Boolean","prototype","l","m","n","constructor","super","arguments","tileInfo","format","lods","scale","length","levelRangeFromScaleRange","minLevel","maxLevel","initialize","originOf","fullExtent","addResolvingPromise","_addTilingSchemeMatchPromise","f","view","suspended","emit","readOnly","aliasOf","y","xoffset","Math","max","abs","yoffset","stops","size","maxSize","minSize","floor","pointerType","visualVariables","symbol","uniqueValueInfos","forEach","classBreakInfos","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","spatialReference","x","xmin","min","ymin","xmax","ymax"],"mappings":"uQAI4gB,MAAMA,EAAEA,IAAI,IAAIC,EAAE,cAAcD,EAA0B,yBAACE,EAAEC,GAAG,MAAMC,MAAMC,GAAGC,KAAK,IAAIJ,EAAE,OAAOK,QAAQC,OAAO,IAAIC,IAAE,mCAAmC,gCAAgC,CAACL,MAAMC,KAAK,GAAG,SAASA,EAAEK,KAAK,OAAOH,QAAQC,OAAO,IAAIC,IAAE,mCAAmC,8BAA8B,CAACC,KAAKL,EAAEK,QAAQ,MAAMV,EAAEM,KAAKK,IAAI,cAAcV,EAAEI,EAAEO,aAAaC,UAAUC,QAAQZ,IAAI,MAAMO,EAAE,IAAIP,EAAEa,UAAUf,GAAGE,EAAEa,SAASC,EAAE,IAAId,EAAEe,UAAUjB,GAAGE,EAAEe,SAAS,OAAOf,EAAEgB,eAAehB,EAAEiB,cAAcjB,EAAEkB,SAASX,GAAGO,KAAK,OAAOK,YAAEpB,EAAEqB,KAAKC,UAAU,MAAMF,EAAEZ,EAAEe,cAAcnB,EAAEW,YAAEb,GAAGA,EAAEsB,MAAM,KAAKzB,EAAE0B,YAAE,CAACC,SAASlB,EAAEkB,SAASF,MAAMpB,IAAqH,OAAjHgB,EAAEO,SAAStB,KAAKuB,sCAAsC3B,EAAEF,GAAGqB,EAAES,gBAAgBrB,EAAES,cAAca,2BAAiCtB,EAAEuB,cAAcX,IAAIY,aAAaC,MAAMhC,GAAG,GAAGiC,UAAUjC,EAAEoB,KAAKpB,GAAGA,EAAEkC,QAAQtB,OAAOuB,cAAc,OAAOnC,YAAE,CAACC,eAAKF,EAAEqC,UAAU,aAAQ,GAAQrC,EAAEC,YAAE,CAACG,YAAE,qCAAqCJ,GAAGA,GAAkBD,I,SCA3oB,IAAIC,EAAE,cAAcyB,YAAEa,YAAEC,EAAEnC,YAAEoC,SAAOC,cAAcC,SAASC,WAAWtC,KAAKI,KAAK,UAAiC,0BAAG,MAAM,QAAQJ,KAAKF,MAAMyC,SAASC,OAA+B,2BAAG,MAAM,UAAUxC,KAAKF,MAAMyC,SAASC,OAAyB,qBAAG,GAAGxC,KAAKuC,SAAS,CAAC,MAAM3C,EAAEI,KAAKuC,SAASE,KAAKtC,EAAEP,EAAE,GAAG8C,MAAMhC,EAAEd,EAAEA,EAAE+C,OAAO,GAAGD,MAAM,OAAO1C,KAAK4C,yBAAyBzC,EAAEO,GAAG,MAAM,CAACmC,SAAS,EAAEC,SAAS,GAAGC,aAAa,GAAG,aAAa/C,KAAKF,MAAMM,KAAK,CAAC,MAAMR,EAAEI,KAAKF,MAAMO,IAAI,+BAA+BU,EAAEf,KAAKF,MAAMO,IAAI,6BAA6B,GAAGK,YAAEd,IAAIc,YAAEK,KAAKlB,YAAED,EAAEmB,GAAG,CAAC,MAAMnB,EAAE,aAAaI,KAAKF,MAAMkD,SAAS,eAAetC,YAAEV,KAAKF,MAAMmD,YAAY,4EAA4E,0GAA0GjD,KAAKkD,oBAAoBjD,QAAQC,OAAO,IAAIC,IAAE,oCAAoCP,MAAMI,KAAKmD,+BAA+B5B,sCAAsC3B,EAAEO,GAAG,OAAOiD,YAAExD,EAAEO,EAAEH,KAAKqD,MAAqB,gBAACzD,GAAGI,KAAKsD,WAAWtD,KAAKuD,KAAK,kBAAkB3D,YAAE,CAACmB,YAAE,CAACyC,UAAS,KAAM7D,EAAEqC,UAAU,sBAAsB,MAAMpC,YAAE,CAACmB,YAAE,CAACyC,UAAS,KAAM7D,EAAEqC,UAAU,uBAAuB,MAAMpC,YAAE,CAACmB,YAAE,CAAC0C,QAAQ,sBAAsB9D,EAAEqC,UAAU,kBAAa,GAAQpC,YAAE,CAACmB,eAAKpB,EAAEqC,UAAU,aAAQ,GAAQpC,YAAE,CAACmB,YAAE,CAAC0C,QAAQ,oBAAoB9D,EAAEqC,UAAU,gBAAW,GAAQpC,YAAE,CAACmB,YAAE,CAACyC,UAAS,KAAM7D,EAAEqC,UAAU,iBAAiB,MAAMrC,EAAEC,YAAE,CAACF,YAAE,yCAAyCC,GAAG,IAAI+D,EAAE/D,EAAiB+D,a,iCCAryE,SAAShD,EAAEA,EAAEd,GAAG,OAAOA,EAAE,YAAYA,GAAGA,EAAE+D,QAAQC,KAAKC,IAAInD,EAAEkD,KAAKE,IAAIlE,EAAE+D,UAAU,YAAY/D,GAAGA,EAAEmE,QAAQH,KAAKC,IAAInD,EAAEkD,KAAKE,IAAIlE,EAAEmE,SAAS,IAAIrD,EAAEA,EAAoH,SAASyB,EAAEzB,EAAEyB,GAAG,MAAM,iBAAiBzB,EAAEA,EAAEA,GAAGA,EAAEsD,OAAOtD,EAAEsD,MAAMrB,OAAjL,SAAWjC,GAAG,IAAId,EAAE,EAAEuC,EAAE,EAAE,IAAI,IAAIhC,EAAE,EAAEA,EAAEO,EAAEiC,OAAOxC,IAAI,CAAC,MAAMN,EAAEa,EAAEP,GAAG8D,KAAK,iBAAiBpE,IAAID,GAAGC,EAAEsC,KAAK,OAAOvC,EAAEuC,EAAwEvC,CAAEc,EAAEsD,OAAO7B,EAAE,SAAShC,EAAEO,EAAEd,GAAG,IAAIA,EAAE,OAAOc,EAAE,MAAMP,EAAEP,EAAEY,QAAQE,GAAG,SAASA,EAAEN,OAAOY,KAAKpB,IAAI,MAAMsE,QAAQ/D,EAAEgE,QAAQtE,GAAGD,EAAE,OAAOuC,EAAEhC,EAAEO,GAAGyB,EAAEtC,EAAEa,IAAI,KAAK,IAAIb,EAAE,EAAE,MAAMkB,EAAEZ,EAAEwC,OAAO,GAAG,IAAI5B,EAAE,OAAOL,EAAE,IAAI,IAAIyB,EAAE,EAAEA,EAAEpB,EAAEoB,IAAItC,GAAGM,EAAEgC,GAAG,MAAMiB,EAAEQ,KAAKQ,MAAMvE,EAAEkB,GAAG,OAAO6C,KAAKC,IAAIT,EAAE1C,GAAG,SAASb,EAAED,GAAG,MAAMuC,EAAEvC,GAAGA,EAAEyB,SAASxB,EAAE,WAAWD,GAAGA,EAAEuB,OAAOvB,EAAEuB,MAAMkD,aAAa,EAAE,EAAE,IAAIlC,EAAE,OAAOtC,EAAE,MAAMkB,EAAE,oBAAoBoB,EAAEhC,EAAEN,EAAEsC,EAAEmC,iBAAiBzE,EAAE,GAAG,WAAWsC,EAAE/B,KAAK,OAAOM,EAAEK,EAAEoB,EAAEoC,QAAQ,GAAG,iBAAiBpC,EAAE/B,KAAK,CAAC,IAAIR,EAAEmB,EAAE,OAAOoB,EAAEqC,iBAAiBC,SAAStC,IAAIvC,EAAEc,EAAEd,EAAEuC,EAAEoC,WAAW3E,EAAE,GAAG,iBAAiBuC,EAAE/B,KAAK,CAAC,IAAIR,EAAEmB,EAAE,OAAOoB,EAAEuC,gBAAgBD,SAAStC,IAAIvC,EAAEc,EAAEd,EAAEuC,EAAEoC,WAAW3E,EAAE,OAAOuC,EAAE/B,KAAKW,EAJr+B,mC,iCCAA,6EAI+Q,SAAShB,EAAEW,EAAEyB,EAAEpC,EAAEgB,EAAE,IAAIrB,KAAG,IAAIG,EAAE,GAAG,OAAOE,EAAEK,KAAKP,EAAEsC,EAAEpC,EAAE4E,gBAAgB,GAAG,OAAO5E,EAAEK,KAAK,CAAC,MAAMV,EAAEK,EAAE6E,2BAA2BlE,GAAGK,EAAEhB,EAAE8E,wBAAwBhF,EAAED,YAAEmB,KAAKA,EAAE+D,OAAO/E,EAAEgF,kBAAkB5E,YAAEY,GAAGZ,YAAEJ,EAAEgF,kBAAkB5C,EAAEzC,EAAE,MAAMwC,EAAExB,EAAEsE,EAAEnF,EAAEuB,EAAEV,EAAEgD,EAAE7D,EAAEF,EAAEe,EAAEsE,EAAEnF,EAAEoC,EAAEvB,EAAEgD,EAAE7D,GAAGkF,iBAAiB3B,GAAGrD,EAAE,OAAOgB,EAAEkE,KAAKrB,KAAKsB,IAAIhD,EAAEvC,GAAGoB,EAAEoE,KAAKvB,KAAKsB,IAAI9D,EAAEa,GAAGlB,EAAEqE,KAAKxB,KAAKC,IAAI3B,EAAEvC,GAAGoB,EAAEsE,KAAKzB,KAAKC,IAAIzC,EAAEa,GAAGlB,EAAEgE,iBAAiB3B,EAAErC,EAAkG,IAAIrB","file":"static/js/87.1820ebdb.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import{eachAlways as o}from\"../../core/promiseUtils.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{calculateTolerance as p}from\"../../renderers/support/clickToleranceUtils.js\";const i=i=>{let c=class extends i{async fetchPopupFeatures(e,s){const{layer:a}=this;if(!e)return Promise.reject(new r(\"tilelayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:a}));if(\"tile\"!==a.type)return Promise.reject(new r(\"tilelayerview:fetchPopupFeatures\",\"Layer type should be 'tile'\",{type:a.type}));const i=this.get(\"view.scale\"),c=a.allSublayers.toArray().filter((e=>{const r=0===e.minScale||i<=e.minScale,t=0===e.maxScale||i>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&r&&t}));return o(c.map((async r=>{const o=r.createQuery(),a=t(s)?s.event:null,i=p({renderer:r.renderer,event:a});o.geometry=this.createFetchPopupFeaturesQueryGeometry(e,i),o.outFields=await r.popupTemplate.getRequiredFields();return(await r.queryFeatures(o)).features}))).then((e=>[].concat(...e.map((e=>e.value)).filter(Boolean))))}};return e([s()],c.prototype,\"layer\",void 0),c=e([a(\"esri.layers.mixins.TileLayerView\")],c),c};export default i;export{i as TileLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Error.js\";import{isNone as t}from\"../../../core/maybe.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{canProjectWithoutEngine as s}from\"../../../geometry/projection.js\";import{LayerView3D as a}from\"./LayerView3D.js\";import{TiledLayerView3D as l}from\"./TiledLayerView3D.js\";import n from\"../../layers/LayerView.js\";import{RefreshableLayerView as p}from\"../../layers/RefreshableLayerView.js\";import{TileLayerView as m}from\"../../layers/TileLayerView.js\";import{createQueryGeometry as f}from\"../../support/drapedUtils.js\";let c=class extends(p(l(m(a(n))))){constructor(){super(...arguments),this.type=\"tile-3d\"}get imageFormatIsOpaque(){return\"jpg\"===this.layer.tileInfo.format}get hasMixedImageFormats(){return\"mixed\"===this.layer.tileInfo.format}get dataLevelRange(){if(this.tileInfo){const e=this.tileInfo.lods,r=e[0].scale,t=e[e.length-1].scale;return this.levelRangeFromScaleRange(r,t)}return{minLevel:0,maxLevel:0}}initialize(){if(\"web-tile\"===this.layer.type){const e=this.layer.get(\"fullExtent.spatialReference\"),o=this.layer.get(\"tileInfo.spatialReference\");if(t(e)||t(o)||!s(e,o)){const e=\"defaults\"===this.layer.originOf(\"fullExtent\")||t(this.layer.fullExtent)?\"SceneView requires fullExtent to be specified by the user on WebTileLayer\":\"SceneView requires fullExtent to be specified in the same spatial reference as tileInfo on WebTileLayer\";this.addResolvingPromise(Promise.reject(new r(\"layerview:incompatible-fullextent\",e)))}}this._addTilingSchemeMatchPromise()}createFetchPopupFeaturesQueryGeometry(e,r){return f(e,r,this.view)}async doRefresh(e){this.suspended||this.emit(\"data-changed\")}};e([o({readOnly:!0})],c.prototype,\"imageFormatIsOpaque\",null),e([o({readOnly:!0})],c.prototype,\"hasMixedImageFormats\",null),e([o({aliasOf:\"layer.fullExtent\"})],c.prototype,\"fullExtent\",void 0),e([o()],c.prototype,\"layer\",void 0),e([o({aliasOf:\"layer.tileInfo\"})],c.prototype,\"tileInfo\",void 0),e([o({readOnly:!0})],c.prototype,\"dataLevelRange\",null),c=e([i(\"esri.views.3d.layers.TileLayerView3D\")],c);var y=c;export default y;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n"],"sourceRoot":""}