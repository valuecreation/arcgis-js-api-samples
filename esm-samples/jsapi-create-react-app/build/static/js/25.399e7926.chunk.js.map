{"version":3,"sources":["../node_modules/@arcgis/core/symbols/cim/cimAnalyzer.js","../node_modules/@arcgis/core/symbols/cim/SDFHelper.js","../node_modules/@arcgis/core/symbols/cim/Rasterizer.js","../node_modules/@arcgis/core/symbols/cim/TextRasterizer.js","../node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js"],"names":["u","t","getLogger","y","e","h","g","d","N","i","o","r","b","markerPlacement","angleToLine","async","k","n","a","l","s","type","error","symbol","primitiveOverrides","valueExpressionInfo","expression","spatialReference","fields","then","primitiveName","propertyName","push","value","Promise","all","symbolLayers","c","f","getSize","angleAlignment","m","length","enable","p","findApplicableOverrides","C","P","L","M","X","I","x","w","z","J","O","color","D","JSON","stringify","toString","templateHash","materialHash","cim","materialOverrides","colorLocked","F","j","height","angle","offsetX","offsetY","scaleX","effects","tintColor","url","colorSubstitutions","rotation","filter","indexOf","separation","lineSymbol","W","width","capStyle","joinStyle","miterLimit","S","v","isOutline","cap","join","referenceWidth","zOrder","A","name","isDashed","stepY","gridAngle","size","scaleSymbolsProportionally","alignment","anchorPoint","isAbsoluteAnchorPoint","anchorPointUnits","outlineColor","outlineWidth","frameHeight","rotateClockwise","referenceSize","sizeRatio","markerGraphics","frame","ymax","ymin","Y","H","geometry","underline","strikethrough","toLowerCase","style","weight","fontStyleName","font","family","fontFamilyName","decoration","xmin","xmax","getFillColor","getStrokeColor","getStrokeWidth","haloSymbol","haloSize","R","Number","$","fontName","horizontalAlignment","verticalAlignment","text","textString","textCase","outlineSize","geom","asFill","billboardMode3D","depth3D","respectFrame","clippingPath","getTextureAnchor","parseInt","substr","NaN","toRgba","Array","call","$view","geometryType","fn","buildOverrideKey","T","parse","applyOverrides","rings","paths","Math","floor","max","round","sqrt","Uint8Array","dispose","this","_rasterizationCanvas","rasterizeJSONResource","document","createElement","rasterizeSimpleFill","image","Uint32Array","buffer","sdf","simplePattern","anchorX","anchorY","rasterizeSimpleLine","fromSimpleMarker","fromCIMHatchFill","fromCIMInsidePolygon","rasterize","rasterizeImageResource","getContext","ImageData","putImageData","setAttribute","drawImage","getImageData","data","oldColor","newColor","Uint8ClampedArray","constructor","rasterizeText","_textRasterizationCanvas","setFontProperties","parameters","textLines","split","lineHeight","computeLineHeight","computeTextWidth","renderedLineHeight","pixelRatio","renderedHaloSize","halo","renderedWidth","renderedHeight","fillStyle","slice","haloStyle","textAlign","renderHalo","globalCompositeOperation","fillText","premultiplyColors","_haloRasterizationCanvas","clearRect","strokeStyle","lineJoin","renderHaloEmulated","renderHaloNative","globalAlpha","lineWidth","strokeText","textBaseline","measureText","cos","PI","sin","Legend","Preview","targetSize","scaleFactor","fill","legend","canvasPaths","preview","stroke","_spatialReference","_avoidSDF","_resourceCache","Map","_rasterizer","_textRasterizer","_pictureMarkerCache","centroid","analyzeCIMSymbol","Object","keys","map","alias","attributes","rasterizeCIMSymbol","fetchPictureMarkerResource","get","responseType","signal","set","_getRasterizedResource","rotateClockWise","rasterizedResource","getSymbolImage","min","createImageData","rasterizedImage","_imageDataToCanvas","save","translate","rotate","restore","imageData","anchorPosition","_imageDataCanvas","_imageTo32Array","_getPictureResource","_rasterizePictureResource","analyzedCIM","hash","_embedCIMLayerInVectorMarker","_rasterizeTextResource","preserveOutlineWidth","has","window","devicePixelRatio","abs","createPattern","setTransform","m11","m12","m21","m22","m41","m42","beginPath","moveTo","lineTo","closePath","apply"],"mappings":"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","file":"static/js/25.399e7926.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../Color.js\";import t from\"../../core/Logger.js\";import{pt2px as i}from\"../../core/screenUtils.js\";import{numericHash as o}from\"../../core/string.js\";import{createRendererExpression as r,ArcadeExpression as n}from\"../../support/arcadeOnDemand.js\";import{CIMSymbolHelper as a,OverrideHelper as l}from\"./CIMSymbolHelper.js\";import{getExtent as s,getSDFMetrics as c}from\"./SDFHelper.js\";import{fromCIMColor as f,_adjustTextCase as m}from\"./utils.js\";import p from\"../../views/2d/arcade/callExpressionWithFeature.js\";const u=t.getLogger(\"esri.symbols.cim.cimAnalyzer\");function y(e){switch(e){case\"Butt\":return 0;case\"Square\":return 2;case\"Round\":default:return 1}}function h(e){switch(e){case\"Bevel\":return 0;case\"Miter\":return 2;case\"Round\":default:return 1}}function g(e){switch(e){case\"Left\":default:return\"left\";case\"Right\":return\"right\";case\"Center\":return\"center\";case\"Justify\":return\"justify\"}}function d(e){switch(e){case\"Top\":default:return\"top\";case\"Center\":return\"middle\";case\"Baseline\":return\"baseline\";case\"Bottom\":return\"bottom\"}}function S(e){let t=\"normal\",i=\"normal\";if(e){const o=e.toLowerCase();-1!==o.indexOf(\"italic\")?t=\"italic\":-1!==o.indexOf(\"oblique\")&&(t=\"oblique\"),-1!==o.indexOf(\"bold\")?i=\"bold\":-1!==o.indexOf(\"light\")&&(i=\"lighter\")}return{style:t,weight:i}}function v(e){return e.underline?\"underline\":e.strikethrough?\"line-through\":\"none\"}function N(e,t,i,o){let r;e[t]?r=e[t]:(r={},e[t]=r),r[i]=o}function b(e){const t=e.markerPlacement;return t&&t.angleToLine?1:0}async function k(e,t,i,o){const n=null!=i?i:[];if(!e)return n;let a,l;const s={};if(\"CIMSymbolReference\"!==e.type)return u.error(\"Expect cim type to be 'CIMSymbolReference'\"),n;if(a=e.symbol,l=e.primitiveOverrides,l){const e=[];for(const i of l){const o=i.valueExpressionInfo;if(o&&t){const n=o.expression,a=r(n,t.spatialReference,t.fields).then((e=>{e&&N(s,i.primitiveName,i.propertyName,e)}));e.push(a)}else null!=i.value&&N(s,i.primitiveName,i.propertyName,i.value)}await Promise.all(e)}switch(a.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":O(a,l,s,t,n,o)}return n}function O(e,t,i,o,r,n){if(!e)return;const s=e.symbolLayers;if(!s)return;let c;const f=a.getSize(e);\"CIMPointSymbol\"===e.type&&\"Map\"===e.angleAlignment&&(c=1);let m=s.length;for(;m--;){const a=s[m];if(!a||!1===a.enable)continue;const p=[];switch(l.findApplicableOverrides(a,t,p),a.type){case\"CIMSolidFill\":C(a,i,p,o,r);break;case\"CIMPictureFill\":P(a,i,p,o,r);break;case\"CIMHatchFill\":L(a,i,p,o,r);break;case\"CIMGradientFill\":M(a,i,p,o,r);break;case\"CIMSolidStroke\":X(a,i,p,o,r,\"CIMPolygonSymbol\"===e.type,f);break;case\"CIMPictureStroke\":I(a,i,p,o,r,\"CIMPolygonSymbol\"===e.type,f);break;case\"CIMGradientStroke\":x(a,i,p,o,r,\"CIMPolygonSymbol\"===e.type,f);break;case\"CIMCharacterMarker\":if(w(a,i,p,o,r))break;break;case\"CIMPictureMarker\":if(w(a,i,p,o,r))break;\"CIMLineSymbol\"===e.type&&(c=b(a)),z(a,i,p,o,r,c,f);break;case\"CIMVectorMarker\":if(w(a,i,p,o,r))break;\"CIMLineSymbol\"===e.type&&(c=b(a)),J(a,i,p,o,r,c,f,n);break;default:u.error(\"Cannot analyze CIM layer\",a.type)}}}function C(e,t,i,r,n){const a=e.primitiveName,l=f(e.color),[s,c]=D(i,a),m=o(JSON.stringify(e)+c).toString();n.push({type:\"fill\",templateHash:m,materialHash:s?()=>m:m,cim:e,materialOverrides:null,colorLocked:e.colorLocked,color:F(a,t,\"Color\",r,l,j),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:e.effects})}function P(e,t,i,r,n){const a=e.primitiveName,l=e.tintColor?f(e.tintColor):{r:255,g:255,b:255,a:1},[s,c]=D(i,a),m=o(JSON.stringify(e)+c).toString(),p=o(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString();n.push({type:\"fill\",templateHash:m,materialHash:s?()=>p:p,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:F(a,t,\"TintColor\",r,l,j),height:F(a,t,\"Height\",r,e.height),scaleX:F(a,t,\"ScaleX\",r,e.scaleX),angle:F(a,t,\"Rotation\",r,e.rotation),offsetX:F(a,t,\"OffsetX\",r,e.offsetX),offsetY:F(a,t,\"OffsetY\",r,e.offsetY)})}function L(e,t,i,r,n){const a=[\"Rotation\",\"OffsetX\",\"OffsetY\"],l=i.filter((t=>t.primitiveName!==e.primitiveName&&-1===a.indexOf(t.propertyName))),s=e.primitiveName,[c,f]=D(i,s),m=o(JSON.stringify(e)+f).toString(),p=o(`${e.separation}${JSON.stringify(e.lineSymbol)}`).toString();n.push({type:\"fill\",templateHash:m,materialHash:c?W(p,t,l,r):p,cim:e,materialOverrides:l,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:F(s,t,\"Separation\",r,e.separation),scaleX:1,angle:F(s,t,\"Rotation\",r,e.rotation),offsetX:F(s,t,\"OffsetX\",r,e.offsetX),offsetY:F(s,t,\"OffsetY\",r,e.offsetY)})}function M(e,t,i,r,n){const a=e.primitiveName,[l,s]=D(i,a),c=o(JSON.stringify(e)+s).toString();n.push({type:\"fill\",templateHash:c,materialHash:l?W(c,t,i,r):c,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function X(e,t,i,r,n,a,l){const s=e.primitiveName,c=f(e.color),m=void 0!==e.width?e.width:4,p=y(e.capStyle),u=h(e.joinStyle),g=e.miterLimit,[d,S]=D(i,s),v=o(JSON.stringify(e)+S).toString();n.push({type:\"line\",templateHash:v,materialHash:d?()=>v:v,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:e.effects,color:F(s,t,\"Color\",r,c,j),width:F(s,t,\"Width\",r,m),cap:F(s,t,\"CapStyle\",r,p),join:F(s,t,\"JoinStyle\",r,u),miterLimit:F(s,t,\"MiterLimit\",r,g),referenceWidth:l,zOrder:A(e.name),isDashed:!1})}function I(e,t,i,r,n,a,l){const s=o(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),c=e.primitiveName,m=f(e.tintColor),p=void 0!==e.width?e.width:4,u=y(e.capStyle),g=h(e.joinStyle),d=e.miterLimit,[S,v]=D(i,c),N=o(JSON.stringify(e)+v).toString();n.push({type:\"line\",templateHash:N,materialHash:S?()=>s:s,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:e.effects,color:F(c,t,\"TintColor\",r,m,j),width:F(c,t,\"Width\",r,p),cap:F(c,t,\"CapStyle\",r,u),join:F(c,t,\"JoinStyle\",r,g),miterLimit:F(c,t,\"MiterLimit\",r,d),referenceWidth:l,zOrder:A(e.name),isDashed:!1})}function x(e,t,i,r,n,a,l){const s=e.primitiveName,c=void 0!==e.width?e.width:4,f=y(e.capStyle),m=h(e.joinStyle),p=e.miterLimit,[u,g]=D(i,s),d=o(JSON.stringify(e)+g).toString();n.push({type:\"line\",templateHash:d,materialHash:u?W(d,t,i,r):d,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},width:F(s,t,\"Width\",r,c),cap:F(s,t,\"CapStyle\",r,f),join:F(s,t,\"JoinStyle\",r,m),miterLimit:F(s,t,\"MiterLimit\",r,p),referenceWidth:l,zOrder:A(e.name),isDashed:!1})}function w(e,t,i,r,n){const a=e.markerPlacement;if(!a||\"CIMMarkerPlacementInsidePolygon\"!==a.type)return!1;const l=a,s=[\"Rotation\",\"OffsetX\",\"OffsetY\"],c=i.filter((t=>t.primitiveName!==e.primitiveName&&-1===s.indexOf(t.propertyName))),[f,m]=D(i,l.primitiveName),p=o(JSON.stringify(e)+m).toString();return n.push({type:\"fill\",templateHash:p,materialHash:f?W(p,t,c,r):p,cim:e,materialOverrides:c,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:F(l.primitiveName,t,\"StepY\",r,l.stepY),scaleX:1,angle:F(l.primitiveName,t,\"GridAngle\",r,l.gridAngle),offsetX:F(l.primitiveName,t,\"OffsetX\",r,l.offsetX),offsetY:F(l.primitiveName,t,\"OffsetY\",r,l.offsetY)}),!0}function z(e,t,i,r,n,a,l){const s=e.primitiveName,c=e.size,m=e.scaleX,p=e.rotation,u=e.offsetX,y=e.offsetY,h=f(e.tintColor),g=o(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),[d,S]=D(i,s),v=o(JSON.stringify(e)+S).toString();n.push({type:\"marker\",templateHash:v,materialHash:d?()=>g:g,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:!1,alignment:a,size:F(s,t,\"Size\",r,c),scaleX:F(s,t,\"ScaleX\",r,m),rotation:F(s,t,\"Rotation\",r,p),offsetX:F(s,t,\"OffsetX\",r,u),offsetY:F(s,t,\"OffsetY\",r,y),color:F(s,t,\"TintColor\",r,h,j),anchorPoint:e.anchorPoint,isAbsoluteAnchorPoint:\"Relative\"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:e.rotateClockwise,referenceSize:l,sizeRatio:1,markerPlacement:e.markerPlacement})}function J(e,t,i,o,r,n,a,l){const s=e.markerGraphics;if(!s)return;let c=0;if(e.scaleSymbolsProportionally){const t=e.frame;t&&(c=t.ymax-t.ymin)}for(const f of s)if(f){const s=f.symbol;if(!s)continue;switch(s.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":Y(e,f,i,t,o,r,n,a,c,l);break;case\"CIMTextSymbol\":H(e,f,t,i,o,r,n,a,c)}}}function H(e,t,i,r,n,s,c,p,u){const y=[];l.findApplicableOverrides(t,r,y);const h=t.geometry;if(!(\"x\"in h)||!(\"y\"in h))return;const N=t.symbol,b=v(N),k=S(N.fontStyleName);N.font={family:N.fontFamilyName,decoration:b,...k};const O=e.frame,C=h.x-.5*(O.xmin+O.xmax),P=h.y-.5*(O.ymin+O.ymax),L=e.size/u,M=e.primitiveName,X=(N.height||0)*L,I=N.angle||0,x=((N.offsetX||0)+C)*L,w=((N.offsetY||0)+P)*L,z=f(a.getFillColor(N));let J=f(a.getStrokeColor(N)),H=a.getStrokeWidth(N);H||(J=f(a.getFillColor(N.haloSymbol)),H=N.haloSize*L);let Y=\"\";for(const o of r)o.primitiveName===M&&void 0!==o.value&&(Y+=`-${o.primitiveName}-${o.propertyName}-${JSON.stringify(o.value)}`);const R=JSON.stringify(e.effects)+Number(e.colorLocked)+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement),$=o(JSON.stringify(t)+R+Y).toString();s.push({type:\"text\",templateHash:$,materialHash:()=>o(JSON.stringify(N.font)).toString(),cim:N,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,alignment:c,anchorPoint:{x:e.anchorPoint?e.anchorPoint.x:0,y:e.anchorPoint?e.anchorPoint.y:0},isAbsoluteAnchorPoint:\"Relative\"!==e.anchorPointUnits,fontName:N.fontFamilyName,decoration:\"none\",weight:\"normal\",style:\"normal\",size:F(M,i,\"Size\",n,X),angle:F(M,i,\"Rotation\",n,I),offsetX:F(M,i,\"OffsetX\",n,x),offsetY:F(M,i,\"OffsetY\",n,w),horizontalAlignment:g(N.horizontalAlignment),verticalAlignment:d(N.verticalAlignment),text:F(t.primitiveName,i,\"TextString\",n,t.textString,m,N.textCase),color:z,outlineColor:J,outlineSize:H,referenceSize:p,sizeRatio:1,markerPlacement:e.markerPlacement})}function Y(e,t,i,r,n,l,m,p,u,y){const h=t.symbol,g=t.geometry;if(!g)return;const d=h.symbolLayers;if(!d)return;if(y)return void R(e,t,r,i,n,l,m,p,u);let S=d.length;for(;S--;){const y=d[S];if(y&&!1!==y.enable)switch(y.type){case\"CIMSolidFill\":case\"CIMSolidStroke\":{const h=s(g);if(!h)continue;const[d,S,v]=c(h,e.frame,e.size,e.anchorPoint,\"Relative\"!==e.anchorPointUnits),N=\"CIMSolidFill\"===y.type,b={type:\"sdf\",geom:g,asFill:N},k=e.primitiveName,O=e.size,C=e.rotation||0,P=e.offsetX,L=e.offsetY,M=y.primitiveName,X=f(N?a.getFillColor(y):a.getStrokeColor(y)),I=N?{r:0,g:0,b:0,a:0}:f(a.getStrokeColor(y)),x=a.getStrokeWidth(y);if(!N&&!x)break;let w=!1,z=\"\";for(const e of i)e.primitiveName!==M&&e.primitiveName!==k||(void 0!==e.value?z+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`:e.valueExpressionInfo&&(w=!0));const J=JSON.stringify({...e,markerGraphics:null}),H=o(JSON.stringify(b)).toString(),Y={type:\"marker\",templateHash:o(JSON.stringify(t)+JSON.stringify(y)+J+z).toString(),materialHash:w?()=>H:H,cim:b,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:m,anchorPoint:{x:S,y:v},isAbsoluteAnchorPoint:!1,size:F(e.primitiveName,r,\"Size\",n,O),rotation:F(e.primitiveName,r,\"Rotation\",n,C),offsetX:F(e.primitiveName,r,\"OffsetX\",n,P),offsetY:F(e.primitiveName,r,\"OffsetY\",n,L),scaleX:1,frameHeight:u,rotateClockwise:e.rotateClockwise,referenceSize:p,sizeRatio:d,color:F(M,r,\"Color\",n,X,j),outlineColor:F(M,r,\"Color\",n,I,j),outlineWidth:F(M,r,\"Width\",n,x),markerPlacement:e.markerPlacement};l.push(Y);break}default:R(e,t,r,i,n,l,m,p,u)}}}function R(e,t,r,n,l,s,c,f,m){const p=$(e,t);let u=[];const y=[\"Rotation\",\"OffsetX\",\"OffsetY\"];u=n.filter((t=>t.primitiveName!==e.primitiveName||-1===y.indexOf(t.propertyName)));let h=\"\";for(const i of n)void 0!==i.value&&(h+=`-${i.primitiveName}-${i.propertyName}-${JSON.stringify(i.value)}`);const[g,d,S]=a.getTextureAnchor(p),v=e.primitiveName,N=e.rotation||0,b=e.offsetX||0,k=e.offsetY||0,O=o(JSON.stringify(p)+h).toString(),C={type:\"marker\",templateHash:O,materialHash:0===u.length?O:W(O,r,u,l),cim:p,materialOverrides:u,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:c,anchorPoint:{x:g,y:d},isAbsoluteAnchorPoint:!1,size:e.size,rotation:F(v,r,\"Rotation\",l,N),offsetX:F(v,r,\"OffsetX\",l,b),offsetY:F(v,r,\"OffsetY\",l,k),color:{r:0,g:0,b:0,a:0},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:m,rotateClockwise:e.rotateClockwise,referenceSize:f,sizeRatio:S/i(e.size),markerPlacement:e.markerPlacement};s.push(C)}function $(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath,effects:e.effects}}function A(e){if(e&&0===e.indexOf(\"Level_\")){const t=parseInt(e.substr(6),10);if(NaN!==t)return t}return 0}function j(t){if(!t||0===t.length)return null;const i=new e(t).toRgba();return{r:i[0],g:i[1],b:i[2],a:i[3]}}function F(e,t,i,o,r,a,l){const s=t[e];if(s){const e=s[i];if(\"string\"==typeof e||\"number\"==typeof e||e instanceof Array)return a?a.call(null,e,l):e;if(null!=e&&e instanceof n)return(t,i,n)=>{let s=p(e,t,{$view:n},o.geometryType,i);return null!==s&&a&&(s=a.call(null,s,l)),null!==s?s:r}}return r}function W(e,t,i,r){for(const o of i){if(o.valueExpressionInfo){const e=t[o.primitiveName]&&t[o.primitiveName][o.propertyName];e instanceof n&&(o.fn=(t,i,o)=>p(e,t,{$view:o},r.geometryType,i))}}return(t,r,n)=>{for(const e of i)e.fn&&(e.value=e.fn(t,r,n));return o(e+l.buildOverrideKey(i)).toString()}}function T(e,t){if(!t||0===t.length)return e;const i=JSON.parse(JSON.stringify(e));return l.applyOverrides(i,t),i}function D(e,t){let i=!1,o=\"\";for(const r of e)r.primitiveName===t&&(void 0!==r.value?o+=`-${r.primitiveName}-${r.propertyName}-${JSON.stringify(r.value)}`:r.valueExpressionInfo&&(i=!0));return[i,o]}export{T as analyzeCIMResource,k as analyzeCIMSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isExtent as t}from\"../../geometry/support/jsonUtils.js\";import{packFloatRGBA as n}from\"./packingUtils.js\";import o from\"./Rect.js\";function r(t){if(!t)return null;switch(t.type){case\"CIMPointSymbol\":{const n=t.symbolLayers;return n&&1===n.length?r(n[0]):null}case\"CIMVectorMarker\":{const n=t.markerGraphics;if(!n||1!==n.length)return null;const o=n[0];if(!o)return null;const r=o.geometry;if(!r)return null;const l=o.symbol;return!l||\"CIMPolygonSymbol\"!==l.type&&\"CIMLineSymbol\"!==l.type?null:{geom:r,asFill:\"CIMPolygonSymbol\"===l.type}}case\"sdf\":return{geom:t.geom,asFill:t.asFill}}return null}function l(t){const n=t.markerGraphics;if(!n||1!==n.length)return null;const o=n[0];if(!o)return null;const r=o.symbol;return!r||\"CIMPolygonSymbol\"!==r.type&&\"CIMLineSymbol\"!==r.type?null:r}function e(t){return t?t.rings?t.rings:t.paths?t.paths:void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:null:null}function i(t){let n=1/0,r=-1/0,l=1/0,e=-1/0;for(const o of t)for(const t of o)t[0]<n&&(n=t[0]),t[0]>r&&(r=t[0]),t[1]<l&&(l=t[1]),t[1]>e&&(e=t[1]);return new o(n,l,r-n,e-l)}function s(t){let n=1/0,o=-1/0,r=1/0,l=-1/0;for(const e of t)for(const t of e)t[0]<n&&(n=t[0]),t[0]>o&&(o=t[0]),t[1]<r&&(r=t[1]),t[1]>l&&(l=t[1]);return[n,r,o,l]}function f(n){return n?n.rings?s(n.rings):n.paths?s(n.paths):t(n)?[n.xmin,n.ymin,n.xmax,n.ymax]:null:null}function m(t,n,o,r,l){const[e,i,s,f]=t;if(s<e||f<i)return[0,0,0];const m=s-e,a=f-i,c=128,u=1,y=Math.floor(.5*(.5*c-u)),h=(c-2*(y+u))/Math.max(m,a),x=Math.round(m*h)+2*y,M=Math.round(a*h)+2*y;let g=1;if(n){g=M/h/(n.ymax-n.ymin)}let p=0,d=0;if(r)if(l){if(n&&o&&n.ymax-n.ymin>0){const t=(n.xmax-n.xmin)/(n.ymax-n.ymin);p=r.x/(o*t),d=r.y/o}}else p=r.x,d=r.y;p=.5*(n.xmax+n.xmin)+p*(n.xmax-n.xmin),d=.5*(n.ymax+n.ymin)+d*(n.ymax-n.ymin),p-=e,d-=i,p*=h,d*=h,p+=y,d+=y;return[g,p/x-.5,-(d/M-.5)]}function a(t){const n=e(t.geom),o=i(n),r=128,l=1,s=Math.floor(.5*(.5*r-l)),f=(r-2*(s+l))/Math.max(o.width,o.height),m=Math.round(o.width*f)+2*s,a=Math.round(o.height*f)+2*s,h=[];for(const e of n)if(e&&e.length>1){const n=[];for(const t of e){let[r,l]=t;r-=o.x,l-=o.y,r*=f,l*=f,r+=s-.5,l+=s-.5,n.push([r,l])}if(t.asFill){const t=n.length-1;n[0][0]===n[t][0]&&n[0][1]===n[t][1]||n.push(n[0])}h.push(n)}const x=c(h,m,a,s);return t.asFill&&u(h,m,a,s,x),[y(x,s),m,a]}function c(t,n,o,r){const l=n*o,e=new Array(l),i=r*r+1;for(let s=0;s<l;++s)e[s]=i;for(const s of t){const t=s.length;for(let l=1;l<t;++l){const t=s[l-1],i=s[l];let f,m,a,c;t[0]<i[0]?(f=t[0],m=i[0]):(f=i[0],m=t[0]),t[1]<i[1]?(a=t[1],c=i[1]):(a=i[1],c=t[1]);let u=Math.floor(f)-r,y=Math.floor(m)+r,h=Math.floor(a)-r,x=Math.floor(c)+r;u<0&&(u=0),y>n&&(y=n),h<0&&(h=0),x>o&&(x=o);const M=i[0]-t[0],g=i[1]-t[1],p=M*M+g*g;for(let r=u;r<y;r++)for(let l=h;l<x;l++){let s,f,m=(r-t[0])*M+(l-t[1])*g;m<0?(s=t[0],f=t[1]):m>p?(s=i[0],f=i[1]):(m/=p,s=t[0]+m*M,f=t[1]+m*g);const a=(r-s)*(r-s)+(l-f)*(l-f),c=(o-l-1)*n+r;a<e[c]&&(e[c]=a)}}}for(let s=0;s<l;++s)e[s]=Math.sqrt(e[s]);return e}function u(t,n,o,r,l){for(const e of t){const t=e.length;for(let i=1;i<t;++i){const t=e[i-1],s=e[i];let f,m,a,c;t[0]<s[0]?(f=t[0],m=s[0]):(f=s[0],m=t[0]),t[1]<s[1]?(a=t[1],c=s[1]):(a=s[1],c=t[1]);let u=Math.floor(f),y=Math.floor(m)+1,h=Math.floor(a),x=Math.floor(c)+1;u<r&&(u=r),y>n-r&&(y=n-r),h<r&&(h=r),x>o-r&&(x=o-r);for(let e=h;e<x;++e){if(t[1]>e==s[1]>e)continue;const i=(o-e-1)*n;for(let n=u;n<y;++n)n<(s[0]-t[0])*(e-t[1])/(s[1]-t[1])+t[0]&&(l[i+n]=-l[i+n]);for(let t=r;t<u;++t)l[i+t]=-l[i+t]}}}}function y(t,o){const r=2*o,l=t.length,e=new Uint8Array(4*l);for(let i=0;i<l;++i){const o=.5-t[i]/r;n(o,e,4*i)}return e}export{a as buildSDF,f as getExtent,r as getSDFInfo,m as getSDFMetrics,l as getSDFSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{SymbolHelper as e,CIMSymbolHelper as r}from\"./CIMSymbolHelper.js\";import t from\"./Rect.js\";import{getSDFInfo as a,buildSDF as n}from\"./SDFHelper.js\";import{resampleHermite as i}from\"./utils.js\";const s=512;class o{dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(i,s,o){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),\"simple-fill\"===i.type||\"esriSFS\"===i.type){const[r,t,a]=e.rasterizeSimpleFill(this._rasterizationCanvas,i.style,s);return{size:[t,a],image:new Uint32Array(r.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if(\"simple-line\"===i.type||\"esriSLS\"===i.type){const[r,t,a]=e.rasterizeSimpleLine(i.style,i.cap);return{size:[t,a],image:new Uint32Array(r.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let m,l,f;if(\"simple-marker\"===i.type||\"esriSMS\"===i.type||\"line-marker\"===i.type?(m=r.fromSimpleMarker(i),f=a(m)):\"CIMHatchFill\"===i.type?(m=r.fromCIMHatchFill(i),l=new t(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):i.markerPlacement&&\"CIMMarkerPlacementInsidePolygon\"===i.markerPlacement.type?(m=r.fromCIMInsidePolygon(i),l=new t(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):(m=i,f=a(m)),f&&!o){const[e,r,t]=n(f);return e?{size:[r,t],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[c,h,p,y,u]=r.rasterize(this._rasterizationCanvas,m,l,!o);return c?{size:[h,p],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:y,anchorY:u}:null}rasterizeImageResource(e,r,t,a){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=r;const n=this._rasterizationCanvas.getContext(\"2d\");t instanceof ImageData?n.putImageData(t,0,0):(t.setAttribute(\"width\",`${e}px`),t.setAttribute(\"height\",`${r}px`),n.drawImage(t,0,0,e,r));const o=n.getImageData(0,0,e,r),m=new Uint8Array(o.data);if(a)for(const i of a)if(i&&i.oldColor&&4===i.oldColor.length&&i.newColor&&4===i.newColor.length){const[e,r,t,a]=i.oldColor,[n,s,o,l]=i.newColor;if(e===n&&r===s&&t===o&&a===l)continue;for(let i=0;i<m.length;i+=4)e===m[i]&&r===m[i+1]&&t===m[i+2]&&a===m[i+3]&&(m[i]=n,m[i+1]=s,m[i+2]=o,m[i+3]=l)}let l;for(let i=0;i<m.length;i+=4)l=m[i+3]/255,m[i]=m[i]*l,m[i+1]=m[i+1]*l,m[i+2]=m[i+2]*l;let f=m,c=e,h=r;const p=s;if(c>=p||h>=p){const t=c/h;t>1?(c=p,h=Math.round(p/t)):(h=p,c=Math.round(p*t)),f=new Uint8Array(4*c*h);const a=new Uint8ClampedArray(f.buffer);i(m,e,r,a,c,h,!1)}return{size:[c,h],image:new Uint32Array(f.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}export default o;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{pt2px as t}from\"../../core/screenUtils.js\";function e(t){return`rgb(${t.slice(0,3).toString()})`}function i(t){return`rgba(${t.slice(0,3).toString()},${t[3]})`}class r{constructor(){}rasterizeText(t,r){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement(\"canvas\"));const o=this._textRasterizationCanvas,n=o.getContext(\"2d\");this.setFontProperties(n,r),this.parameters=r,this.textLines=t.split(/\\r?\\n/),this.lineHeight=this.computeLineHeight();const a=this.computeTextWidth(n,r),h=this.lineHeight*this.textLines.length;o.width=a,o.height=h,this.renderedLineHeight=Math.round(this.lineHeight*r.pixelRatio),this.renderedHaloSize=r.halo.size*r.pixelRatio,this.renderedWidth=a*r.pixelRatio,this.renderedHeight=h*r.pixelRatio,this.fillStyle=i(r.color),this.haloStyle=e(r.halo.color);const l=this.renderedLineHeight,d=this.renderedHaloSize;this.setFontProperties(n,r);const c=s(n.textAlign,this.renderedWidth)+d,g=d;let f=0,p=0;d>0&&this.renderHalo(n,c,g,f,p,r),p+=g,f+=c;for(const e of this.textLines)n.globalCompositeOperation=\"destination-out\",n.fillStyle=\"rgb(0, 0, 0)\",n.fillText(e,f,p),n.globalCompositeOperation=\"source-over\",n.fillStyle=this.fillStyle,n.fillText(e,f,p),p+=l;const u=n.getImageData(0,0,this.renderedWidth,this.renderedHeight),x=new Uint8Array(u.data);if(r.premultiplyColors){let t;for(let e=0;e<x.length;e+=4)t=x[e+3]/255,x[e]=x[e]*t,x[e+1]=x[e+1]*t,x[e+2]=x[e+2]*t}return{size:[this.renderedWidth,this.renderedHeight],image:new Uint32Array(x.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}renderHalo(t,e,i,r,s,o){const n=this.renderedWidth,a=this.renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement(\"canvas\")),this._haloRasterizationCanvas.width=n,this._haloRasterizationCanvas.height=a;const h=this._haloRasterizationCanvas,l=h.getContext(\"2d\");l.clearRect(0,0,n,a),this.setFontProperties(l,o),l.fillStyle=this.haloStyle,l.strokeStyle=this.haloStyle;const d=this.renderedHaloSize<3;l.lineJoin=d?\"miter\":\"round\",d?this.renderHaloEmulated(l,e,i):this.renderHaloNative(l,e,i),t.globalAlpha=this.parameters.halo.color[3],t.drawImage(h,0,0,n,a,r,s,n,a),t.globalAlpha=1}renderHaloEmulated(t,e,i){const r=this.renderedLineHeight,s=this.renderedHaloSize;for(const n of this.textLines){for(const[r,a]of o)t.fillText(n,e+s*r,i+s*a);i+=r}}renderHaloNative(t,e,i){const r=this.renderedLineHeight,s=this.renderedHaloSize;for(const o of this.textLines){const n=2*s,a=5,h=.1;for(let r=0;r<a;r++){const s=1-(a-1)*h+r*h;t.lineWidth=s*n,t.strokeText(o,e,i)}i+=r}}setFontProperties(e,i){const r=i.font,s=`${r.style} ${r.weight} ${t(i.size*i.pixelRatio)}px ${r.family}, sans-serif`;let o;switch(e.font=s,e.textBaseline=\"top\",i.horizontalAlignment){case\"left\":o=\"left\";break;case\"right\":o=\"right\";break;case\"center\":o=\"center\";break;default:o=\"left\"}e.textAlign=o}computeTextWidth(t,e){let i=0;for(const s of this.textLines)i=Math.max(i,t.measureText(s).width);const r=e.font;return(\"italic\"===r.style||\"oblique\"===r.style||\"string\"==typeof r.weight&&(\"bold\"===r.weight||\"bolder\"===r.weight)||\"number\"==typeof r.weight&&r.weight>600)&&(i+=.3*t.measureText(\"A\").width),i+=2*this.parameters.halo.size,Math.round(i)}computeLineHeight(){const t=1.275*this.parameters.size;return Math.round(t+2*this.parameters.halo.size)}}function s(t,e){return\"center\"===t?.5*e:\"right\"===t?e:0}const o=[];{const t=16;for(let e=0;e<360;e+=360/t)o.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}export default r;export{r as TextRasterizer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import{throwIfAborted as t}from\"../../core/promiseUtils.js\";import{pt2px as r}from\"../../core/screenUtils.js\";import{numericHash as a}from\"../../core/string.js\";import{getJsonType as i,isPolygon as s,isPolyline as o}from\"../../geometry/support/jsonUtils.js\";import{analyzeCIMSymbol as n,analyzeCIMResource as c}from\"./cimAnalyzer.js\";import l from\"./Rasterizer.js\";import{TextRasterizer as m}from\"./TextRasterizer.js\";import{createLabelOverrideFunction as h,evaluateValueOrFunction as f,colorToArray as g}from\"./utils.js\";import{scaleCIMMarker as y}from\"../support/cimSymbolUtils.js\";import u from\"../support/Symbol3DAnchorPosition2D.js\";var p;!function(e){e.Legend=\"legend\",e.Preview=\"preview\"}(p||(p={}));const d=(e,t,a)=>{if(e&&e.targetSize){let i;if(a){const t=Math.max(a.frame.xmax-a.frame.xmin,a.frame.ymax-a.frame.ymin);i=e.targetSize/r(t)}else i=e.targetSize/t.referenceSize;return i}return e&&e.scaleFactor?e.scaleFactor:1},M={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};class C{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._rasterizer=new l,this._textRasterizer=new m,this._pictureMarkerCache=new Map}async rasterizeCIMSymbolAsync(e,t,r,a,s,o,n,c){a=a||(t?null!=t.centroid?\"esriGeometryPolygon\":i(t.geometry):null)||z(e);const l=await this.analyzeCIMSymbol(e,t?I(t.attributes):null,r,a,c);return this.rasterizeCIMSymbol(l,t,a,s,o,n)}async analyzeCIMSymbol(e,r,a,i,s){const o=[],c=r?{geometryType:i,spatialReference:this._spatialReference,fields:r}:null;let l;await n(e.data,c,o,this._avoidSDF),t(s);for(const t of o)\"CIMPictureMarker\"!==t.cim.type&&\"CIMPictureFill\"!==t.cim.type&&\"CIMPictureStroke\"!==t.cim.type||(l||(l=[]),l.push(this.fetchPictureMarkerResource(t,s))),a&&\"text\"===t.type&&\"string\"==typeof t.text&&t.text.indexOf(\"[\")>-1&&(t.text=h(a,t.text,t.cim.textCase));return l&&await Promise.all(l),o}async fetchPictureMarkerResource(t,r){const a=t.materialHash;if(!this._pictureMarkerCache.get(a)){const i=(await e(t.cim.url,{responseType:\"image\",signal:r&&r.signal})).data;this._pictureMarkerCache.set(a,i)}}rasterizeCIMSymbol(e,t,r,a,i,s){const o=[];for(const n of e){a&&\"function\"==typeof a.scaleFactor&&(a.scaleFactor=a.scaleFactor(t,i,s));const e=this._getRasterizedResource(n,t,r,a,i,s);if(!e)continue;let c=0,l=e.anchorX||0,m=e.anchorY||0,h=!1,g=0,y=0;if(\"esriGeometryPoint\"===r){const e=d(a,n,null);if(g=f(n.offsetX,t,i,s)*e||0,y=f(n.offsetY,t,i,s)*e||0,\"marker\"===n.type)c=f(n.rotation,t,i,s)||0,h=!!n.rotateClockwise&&n.rotateClockwise;else if(\"text\"===n.type){if(c=f(n.angle,t,i,s)||0,void 0!==n.horizontalAlignment)switch(n.horizontalAlignment){case\"left\":l=-.5;break;case\"right\":l=.5;break;default:l=0}if(void 0!==n.verticalAlignment)switch(n.verticalAlignment){case\"top\":m=.5;break;case\"bottom\":m=-.5;break;case\"baseline\":m=-.25;break;default:m=0}}}null!=e&&o.push({angle:c,rotateClockWise:h,anchorX:l,anchorY:m,offsetX:g,offsetY:y,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement(\"canvas\"),a=t.getContext(\"2d\");let i=0,s=0,o=0,n=0;const c=[];for(let f=0;f<e.length;f++){const t=e[f],l=t.rasterizedResource;if(!l)continue;const m=l.size,h=t.offsetX,g=t.offsetY,y=t.anchorX,u=t.anchorY,p=t.rotateClockWise||!1;let d=t.angle,M=r(h)-m[0]*(.5+y),C=r(g)-m[1]*(.5+u),I=M+m[0],z=C+m[1];if(d){p&&(d=-d);const e=Math.sin(d*Math.PI/180),t=Math.cos(d*Math.PI/180),r=M*t-C*e,a=M*e+C*t,i=M*t-z*e,s=M*e+z*t,o=I*t-z*e,n=I*e+z*t,c=I*t-C*e,l=I*e+C*t;M=Math.min(r,i,o,c),C=Math.min(a,s,n,l),I=Math.max(r,i,o,c),z=Math.max(a,s,n,l)}i=M<i?M:i,s=C<s?C:s,o=I>o?I:o,n=z>n?z:n;const P=a.createImageData(l.size[0],l.size[1]);P.data.set(new Uint8ClampedArray(l.image.buffer));const x={offsetX:h,offsetY:g,rotateClockwise:p,angle:d,rasterizedImage:P,anchorX:y,anchorY:u};c.push(x)}t.width=o-i,t.height=n-s;const l=-i,m=n;for(let f=0;f<c.length;f++){const e=c[f],t=this._imageDataToCanvas(e.rasterizedImage),i=e.rasterizedImage.width,s=e.rasterizedImage.height,o=l-i*(.5+e.anchorX),n=m-s*(.5-e.anchorY);if(e.angle){const i=(360-e.angle)*Math.PI/180;a.save(),a.translate(r(e.offsetX),-r(e.offsetY)),a.translate(l,m),a.rotate(i),a.translate(-l,-m),a.drawImage(t,o,n),a.restore()}else a.drawImage(t,o+r(e.offsetX),n-r(e.offsetY))}const h=new u({x:l/t.width-.5,y:m/t.height-.5});return{imageData:0!==t.width&&0!==t.height?a.getImageData(0,0,t.width,t.height):a.createImageData(1,1),anchorPosition:h}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const t=this._imageDataCanvas,r=t.getContext(\"2d\");return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}_imageTo32Array(e,t,r){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const a=this._imageDataCanvas,i=a.getContext(\"2d\");return a.width=t,a.height=r,i.drawImage(e,0,0,t,r),new Uint32Array(i.getImageData(0,0,t,r).data.buffer)}_getRasterizedResource(e,t,r,i,s,o){let n,c,l,m;if(\"esriGeometryPolyline\"===r||\"esriGeometryPolygon\"===r){const m=i&&i.style?i.style:p.Legend,h=\"esriGeometryPolyline\"===r?M.stroke[m]:M.fill[m];if(\"line\"===e.type){if(\"CIMSolidStroke\"!==e.cim.type){if(\"CIMPictureStroke\"===e.cim.type){const r=f(e.width,t,s,o),{image:a,width:i,height:n}=this._getPictureResource(e,r);return this._rasterizePictureResource(e,a,i,n,h,r)}return null}({analyzedCIM:n,hash:l}=P(e,t,s,o)),c=this._embedCIMLayerInVectorMarker(n,h)}else if(\"marker\"===e.type){if(\"CIMPictureMarker\"===e.cim.type)return null;if(\"CIMVectorMarker\"!==e.cim.type)return null;e.cim.offsetX=f(e.offsetX,t,s,o),e.cim.offsetY=f(e.offsetY,t,s,o),e.cim.rotation=f(e.rotation,t,s,o),e.cim.markerPlacement=e.markerPlacement,({analyzedCIM:n}=P(e,t,s,o)),l=a(JSON.stringify(n)).toString(),c=this._embedCIMLayerInVectorMarker(n,h)}else{if(\"text\"===e.type)return null;if(\"fill\"===e.type){if(\"CIMHatchFill\"===e.cim.type||\"CIMVectorMarker\"===e.cim.type||\"CIMPictureMarker\"===e.cim.type||\"CIMPictureFill\"===e.cim.type){const r=e.cim.size||e.cim.height;let a,i,c;if(\"CIMPictureMarker\"===e.cim.type||\"CIMPictureFill\"===e.cim.type)({image:a,width:i,height:c}=this._getPictureResource(e,r));else{({analyzedCIM:n,hash:l}=P(e,t,s,o));const r=this._rasterizer.rasterizeJSONResource(n,1,this._avoidSDF);a=r.image,i=r.size[0],c=r.size[1]}return this._rasterizePictureResource(e,a,i,c,h,null)}if(\"CIMSolidFill\"!==e.cim.type)return null;({analyzedCIM:n,hash:l}=P(e,t,s,o)),c=this._embedCIMLayerInVectorMarker(n,h)}}}else{if(\"text\"===e.type)return m=this._rasterizeTextResource(e,t,i,s,o),m;({analyzedCIM:n,hash:l}=P(e,t,s,o));const r=d(i,e,null);if(\"CIMPictureMarker\"===e.cim.type){const a=f(e.size,t,s,o)*r,{image:i,width:n,height:c}=this._getPictureResource(e,a);return m={image:i,size:[n,c],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0},m}y(n,r,{preserveOutlineWidth:!1}),c=n}l+=r,i&&(l+=JSON.stringify(i));const h=this._resourceCache;return h.has(l)?h.get(l):(m=this._rasterizer.rasterizeJSONResource(c,window.devicePixelRatio||1,this._avoidSDF),h.set(l,m),m)}_rasterizeTextResource(e,t,r,a,i){const s=d(r,e,null),o=f(e.text,t,a,i);if(!o||0===o.length)return null;const n=f(e.fontName,t,a,i),c=f(e.style,t,a,i),l=f(e.weight,t,a,i),m=f(e.decoration,t,a,i),h=f(e.size,t,a,i)*s,y=f(e.horizontalAlignment,t,a,i),u=f(e.verticalAlignment,t,a,i),p=g(f(e.color,t,a,i)),M=g(f(e.outlineColor,t,a,i)),C={color:p,size:h,horizontalAlignment:y,verticalAlignment:u,font:{family:n,style:c,weight:l,decoration:m},halo:{size:f(e.outlineSize,t,a,i)||0,color:M,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,C)}_rasterizePictureResource(e,t,a,i,n,c){const l=document.createElement(\"canvas\"),m=l.getContext(\"2d\");l.height=r(Math.max(Math.abs(n.frame.ymax-n.frame.ymin),c)),l.width=r(Math.abs(n.frame.xmax-n.frame.xmin));const h=m.createImageData(a,i);h.data.set(new Uint8ClampedArray(t.buffer));const f=this._imageDataToCanvas(h),g=m.createPattern(f,\"repeat\"),y=Math.cos((-e.cim.rotation||0)*Math.PI/180),u=Math.sin((-e.cim.rotation||0)*Math.PI/180);g.setTransform({m11:y,m12:u,m21:-u,m22:y,m41:r(e.cim.offsetX)||0,m42:r(e.cim.offsetY)||0});const p=n.canvasPaths;let d,M,C;s(p)?(d=p.rings,m.fillStyle=g,M=m.fill,C=[\"evenodd\"]):o(p)&&(d=p.paths,m.strokeStyle=g,m.lineWidth=c,M=m.stroke,d[0][0][1]=l.height/2,d[0][1][1]=l.height/2),m.beginPath();for(const s of d){const e=s?s.length:0;if(e>1){let t=s[0];m.moveTo(r(t[0]),r(t[1]));for(let a=1;a<e;++a)t=s[a],m.lineTo(r(t[0]),r(t[1]));m.closePath()}}M.apply(m,C);const I=m.getImageData(0,0,l.width,l.height),z=new Uint8Array(I.data);return{size:[l.width,l.height],image:new Uint32Array(z.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}_getPictureResource(e,t){const a=this._pictureMarkerCache.get(e.materialHash);if(!a)return null;const i=a.height/a.width,s=t?i>1?r(t):r(t)/i:a.width,o=t?i>1?r(t)*i:r(t):a.height;return{image:this._imageTo32Array(a,s,o),width:s,height:o}}_embedCIMLayerInVectorMarker(e,t){const r=s(t.geometry)?\"CIMPolygonSymbol\":\"CIMLineSymbol\";return{type:\"CIMVectorMarker\",frame:t.frame,markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:t.geometry,symbol:{type:r,symbolLayers:[e]}}]}}}function I(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:\"string\"==typeof e[t]?\"esriFieldTypeString\":\"esriFieldTypeDouble\"})))}function z(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case\"CIMPointSymbol\":case\"CIMTextSymbol\":return\"esriGeometryPoint\";case\"CIMLineSymbol\":return\"esriGeometryPolyline\";case\"CIMPolygonSymbol\":return\"esriGeometryPolygon\";default:return null}}function P(e,t,r,a){let i,s;if(\"function\"==typeof e.materialHash){i=(0,e.materialHash)(t,r,a),s=c(e.cim,e.materialOverrides)}else i=e.materialHash,s=e.cim;return{analyzedCIM:s,hash:i}}export{C as CIMSymbolRasterizer,p as GeometryStyle};\n"],"sourceRoot":""}