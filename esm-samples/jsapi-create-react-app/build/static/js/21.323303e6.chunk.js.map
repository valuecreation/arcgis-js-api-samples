{"version":3,"sources":["../node_modules/@arcgis/core/views/layers/ImageryTileLayerView.js","../node_modules/@arcgis/core/views/3d/layers/ImageryTileLayerView3D.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/support/drapedUtils.js","../node_modules/@arcgis/core/layers/support/rasterFunctions/rasterProjectionHelper.js"],"names":["p","u","constructor","super","arguments","this","_rasterFieldPrefix","layer","view","fullExtent","tileInfo","datumTransformation","renderer","dynamicRangeAdjustment","e","o","s","Promise","reject","r","popupEnabled","a","n","l","i","popupTemplate","value","identify","f","length","m","c","type","hasStandardTime","map","getStandardTimeValue","join","ObjectId","_formatAttributeValue","rasterInfo","attributeTable","features","t","filter","attributes","Value","VALUE","String","hasOwnProperty","clone","sourceLayer","push","updateFullExtent","spatialReference","_set","resolve","fieldInfos","_getFieldInfo","format","trim","indexOf","_formatDelimitedString","_formatNumberFromString","toLowerCase","some","fieldName","replace","split","Number","isNaN","prototype","readOnly","y","d","isAlignedMapTile","initialize","increaseRasterJobHandlerUsage","addResolvingPromise","then","basemapTerrain","tilingScheme","compatibleWith","toTileInfo","updatingHandles","add","refresh","destroy","decreaseRasterJobHandlerUsage","document","createElement","getContext","size","width","height","clearRect","getImageData","lods","scale","levelRangeFromScaleRange","_canSymbolizeInWebGL","requestRawData","signal","requestAsImageElement","fetchTile","HTMLImageElement","pixelBlock","_blankTile","applyRenderer","h","symbolizerRenderer","symbolizer","rendererJSON","symbolizerParameters","generateWebGLParameters","_getSymbolizerOptions","transformGrid","isRendereredSource","interpolation","bandIds","lodAt","resolution","isGCS","isGeographic","x","ensureSymbolizerParameters","JSON","stringify","lij","createFetchPopupFeaturesQueryGeometry","emit","suspended","supportsTextureFloat","canRenderInWebGL","async","getRequiredFields","fieldsIndex","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","includes","has","forEach","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate","xoffset","Math","max","abs","yoffset","stops","maxSize","minSize","floor","event","pointerType","visualVariables","symbol","uniqueValueInfos","classBreakInfos","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","xmin","min","ymin","xmax","ymax","isWGS84","isWebMercator","M","g","center","w","v","R","S","j","W","normalize","b","apply","wkid","N","z","storageInfo","origin","originX","halfWorldWidth","pyramidsInfo","nativePixelSize","extent","maximumPyramidLevel","blockWidth","pyramidScalingFactor","transform","ceil","round","resolutionX","datsetColumnCount","worldColumnCountFromOrigin","leftMargin","rightPadding","originColumnOffset","hasGCSSShiftTransform","G","cols","rows","inverseTransform","NaN","P","C","Float32Array","L","k","offsets","error","coefficients","spacing","pixelSize","pyramidResolutions","pyramidLevel","pyramidResolution","excessiveReading","log","LN2"],"mappings":"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","file":"static/js/21.323303e6.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../Graphic.js\";import r from\"../../core/Error.js\";import{isSome as i}from\"../../core/maybe.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import{getDefaultDatumTransformationForDataset as a,projectExtent as n}from\"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{getFetchPopupTemplate as l}from\"./support/popupUtils.js\";const p=p=>{let u=class extends p{constructor(){super(...arguments),this._rasterFieldPrefix=\"Raster.\",this.layer=null,this.view=null,this.fullExtent=null,this.tileInfo=null,this.datumTransformation=null}get hasTilingEffects(){return this.layer.renderer&&\"dynamicRangeAdjustment\"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment}async fetchPopupFeatures(e,o){const{layer:s}=this;if(!e)return Promise.reject(new r(\"imageryTileLayerView:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:s}));const{popupEnabled:a}=s,n=l(s,o);if(!a||!i(n))throw new r(\"imageryTileLayerView:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:a,popupTemplate:n});const p=[],{value:u}=await s.identify(e);let f=\"\";if(u&&u.length){var m,c;f=\"imagery-tile\"===s.type&&s.hasStandardTime()&&null!=u[0]?u.map((e=>s.getStandardTimeValue(e))).join(\", \"):u.join(\", \");const e={ObjectId:0},r=\"Raster.ServicePixelValue\";e[r]=this._formatAttributeValue(f,r);const i=null==(m=s.rasterInfo)||null==(c=m.attributeTable)?void 0:c.features;if(i&&i.length>0){const t=i.filter((e=>{const t=e.attributes.value||e.attributes.Value||e.attributes.VALUE;return String(t)===f}));if(t.length>0){const r=t[0];if(r)for(const t in r.attributes)if(r.attributes.hasOwnProperty(t)){const i=this._rasterFieldPrefix+t;e[i]=this._formatAttributeValue(r.attributes[t],i)}}}const o=new t(this.fullExtent.clone(),null,e);o.layer=s,o.sourceLayer=o.layer,p.push(o)}return p}updateFullExtent(){const e=this.layer.tileInfo;let t;e&&e.spatialReference||(t=new r(\"layerview:tiling-information-missing\",\"The layer doesn't provide tiling information\",{layer:this.layer}));const i=a(this.layer.fullExtent,this.view.spatialReference,!1),o=n(this.layer.fullExtent,this.view.spatialReference,i);return null==o&&(t=new r(\"layerview:projection-not-supported\",\"The layer extent cannot be projected to the view's spatial reference\",{layer:this.layer})),this._set(\"fullExtent\",o),this.datumTransformation||(this.datumTransformation=a(this.layer.fullExtent,this.view.spatialReference,!0)),t?Promise.reject(t):Promise.resolve()}_formatAttributeValue(e,t){if(\"string\"==typeof e){const r=this.layer.popupTemplate&&this.layer.popupTemplate.fieldInfos,i=this._getFieldInfo(r,t),o=i&&i.format;if(o){let t,r;return e.trim().indexOf(\",\")>-1?(t=\",\",r=t+\" \",this._formatDelimitedString(e,t,r,o)):e.trim().indexOf(\" \")>-1?(t=r=\" \",this._formatDelimitedString(e,t,r,o)):this._formatNumberFromString(e,o)}}return e}_getFieldInfo(e,t){if(!e||!e.length||!t)return;const r=t.toLowerCase();let i;return e.some((e=>!(!e.fieldName||e.fieldName.toLowerCase()!==r&&e.fieldName.toLowerCase()!==r.replace(/ /g,\"_\"))&&(i=e,!0))),i}_formatDelimitedString(e,t,r,i){return e&&t&&r&&i?e.trim().split(t).map((e=>this._formatNumberFromString(e,i))).join(r):e}_formatNumberFromString(e,t){if(!e||!t)return e;const r=Number(e);return isNaN(r)?e:t.format(r)}};return e([o()],u.prototype,\"layer\",void 0),e([o()],u.prototype,\"view\",void 0),e([o()],u.prototype,\"fullExtent\",void 0),e([o()],u.prototype,\"tileInfo\",void 0),e([o({readOnly:!0})],u.prototype,\"hasTilingEffects\",null),u=e([s(\"esri.views.layers.ImageryTileLayerView\")],u),u};export default p;export{p as ImageryTileLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{unwrap as r}from\"../../../core/maybe.js\";import{whenTrueOnce as t}from\"../../../core/watchUtils.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView3D as a}from\"./LayerView3D.js\";import{TiledLayerView3D as l}from\"./TiledLayerView3D.js\";import o from\"../terrain/RasterTile.js\";import{ImageryTileLayerView as n}from\"../../layers/ImageryTileLayerView.js\";import m from\"../../layers/LayerView.js\";import{RefreshableLayerView as d}from\"../../layers/RefreshableLayerView.js\";import{createQueryGeometry as h}from\"../../support/drapedUtils.js\";import p from\"../../webgl/capabilities.js\";let y=class extends(n(d(l(a(m))))){constructor(){super(...arguments),this.type=\"imagery-tile-3d\",this.isAlignedMapTile=!0}initialize(){this.layer.increaseRasterJobHandlerUsage();const e=this.updateFullExtent();this.addResolvingPromise(e);const r=t(this.view,\"basemapTerrain.tilingSchemeLocked\").then((()=>{const e=this.view.basemapTerrain.tilingScheme,{tileInfo:r}=this.layer,t=[\"png\",\"png24\",\"png32\",\"jpg\",\"mixed\"].indexOf(r.format)>-1&&e.compatibleWith(r);this.isAlignedMapTile=t;const i=t?r:e.toTileInfo();this._set(\"tileInfo\",i),this.updatingHandles.add(this,\"layer.renderer\",(()=>this.refresh())),this.updatingHandles.add(this,\"layer.interpolation\",(()=>this.refresh())),this.updatingHandles.add(this,\"layer.bandIds\",(()=>this.refresh())),this.updatingHandles.add(this,\"layer.multidimensionalDefinition\",(()=>this.refresh()))}));this.addResolvingPromise(r)}destroy(){this.layer.decreaseRasterJobHandlerUsage(),this.view=null}get _blankTile(){const e=document.createElement(\"canvas\"),r=e.getContext(\"2d\"),[t,i]=this.tileInfo.size;return e.width=t,e.height=i,r.clearRect(0,0,t,i),r.getImageData(0,0,t,i)}get imageFormatIsOpaque(){return\"jpg\"===this.layer.tileInfo.format}get hasMixedImageFormats(){return\"mixed\"===this.layer.tileInfo.format}get dataLevelRange(){const e=this.tileInfo.lods,r=this.layer.tileInfo.lods,t=e[0].scale,i=r[r.length-1].scale;return this.levelRangeFromScaleRange(t,i)}async fetchTile(e,t,i,s){const a=this.tileInfo,l=this._canSymbolizeInWebGL(),n={tileInfo:a,requestRawData:l,signal:r(s.signal),requestAsImageElement:this.isAlignedMapTile},m=await this.layer.fetchTile(e,t,i,n);if(m instanceof HTMLImageElement)return m;let d=m&&m.pixelBlock;if(!d)return this._blankTile;if(!l&&(d=await this.layer.applyRenderer(m),null==d))return this._blankTile;const h=new o([e,t,i],d,a.size[0],a.size[1]);return l?(h.symbolizerRenderer=this.layer.symbolizer.rendererJSON,h.symbolizerParameters=this.layer.symbolizer.generateWebGLParameters(this._getSymbolizerOptions(e)),h.transformGrid=m.transformGrid):h.isRendereredSource=!0,h.interpolation=this.layer.interpolation,h.bandIds=this.layer.bandIds,h}_getSymbolizerOptions(e){const r=this.tileInfo.lodAt(e).resolution;return{pixelBlock:null,isGCS:this.view.spatialReference.isGeographic,resolution:{x:r,y:r},bandIds:this.layer.bandIds}}ensureSymbolizerParameters(e){this._canSymbolizeInWebGL()&&JSON.stringify(e.symbolizerRenderer)!==JSON.stringify(this.layer.symbolizer.rendererJSON)&&(e.symbolizerParameters=this.layer.symbolizer.generateWebGLParameters(this._getSymbolizerOptions(e.lij[0])))}createFetchPopupFeaturesQueryGeometry(e,r){return h(e,r,this.view)}refresh(){this.emit(\"data-changed\")}async doRefresh(e){this.suspended||this.emit(\"data-changed\")}_canSymbolizeInWebGL(){return p().supportsTextureFloat&&this.layer.symbolizer.canRenderInWebGL}};e([i({readOnly:!0})],y.prototype,\"_blankTile\",null),e([i({readOnly:!0})],y.prototype,\"imageFormatIsOpaque\",null),e([i({readOnly:!0})],y.prototype,\"hasMixedImageFormats\",null),e([i({readOnly:!0})],y.prototype,\"dataLevelRange\",null),y=e([s(\"esri.views.3d.layers.ImageryTileLayerView3D\")],y);var c=y;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../../geometry.js\";import e from\"../../../core/Error.js\";import{isSome as n}from\"../../../core/maybe.js\";import{getMetersPerUnitForSR as t}from\"../../../core/unitUtils.js\";import{isLoaded as o,isSupported as r,load as i,getTransformation as a,project as s}from\"../../../geometry/projection.js\";import{project as l}from\"../../../geometry/support/webMercatorUtils.js\";import c from\"../../../geometry/Extent.js\";import x from\"../../../geometry/Point.js\";const m=5e-4,u=function(e,n){const t=(e.isWGS84||e.isWebMercator)&&(n.isWGS84||n.isWebMercator);return!(e.equals(n)||t)},f=function(e,n){const t=(e[0]+e[4]+e[4*n.cols]+e[4*n.cols+4])/4,o=(e[1]+e[5]+e[4*n.rows+1]+e[4*n.rows+5])/4;return[Math.abs(t-e[2*n.rows+2]),Math.abs(o-e[2*n.rows+3])]},p={3395:20037508.342789244,3410:17334193.943686873,3832:3339584.723798206,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,8858:7396237.374497803,8859:2465412.4581659334,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53025:7276828.3848298555,53031:10384677.558821043,53034:20015086.79602057,53036:7389443.187332862,53037:2463147.729110953,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54025:7311399.09166516,54031:10396310.810074743,54034:20037508.342789244,54050:808820.9223376509,54053:1920897.3915568967,54079:20037508.342789244,54080:20037508.342789244,54099:13524439.768288724,54100:20037508.342789244,54101:20037508.342789244,102038:4297258.582585486,102299:5013965.117483125},h=32;async function y(){if(o()||!r())return null;await i()}function M(n,t,r){if(!u(n.spatialReference,t))return null;if(!o())throw new e(\"rasterprojectionhelper-projectResolution\",\"projection engine is not loaded\");return r?a(t,n.spatialReference,n):a(n.spatialReference,t,n)}function g(n,t,r,i=null){if(n.spatialReference.equals(t))return n;const a=u(n.spatialReference,t);if(a&&!o())throw new e(\"rasterprojectionhelper-projectResolution\",\"projection engine is not loaded\");const x=r.center,m=new c({xmin:x.x-n.x/2,xmax:x.x+n.x/2,ymin:x.y-n.y/2,ymax:x.y+n.y/2,spatialReference:n.spatialReference}),f=a?s(m,t,i):l(m,t);if(null==f)return null;return{x:f.xmax-f.xmin,y:f.ymax-f.ymin}}function d(e,n=.01){return t(e)?n/t(e):0}function w(n,t,r=null,i=!0){const a=n.spatialReference;if(a.equals(t))return n;const c=u(a,t);if(c&&!o())throw new e(\"rasterprojectionhelper-projectResolution\",\"projection engine is not loaded\");const x=c?s(n,t,r):l(n,t);if(x&&i&&t.isGeographic){const[e,t]=v(a,!0),o=d(a);o&&null!=e&&null!=t&&(Math.abs(n.x-e)<o&&Math.abs(180-x.x)<m?x.x-=360:Math.abs(n.x-t)<o&&Math.abs(180+x.x)<m&&(x.x+=360))}return x}function R(e){const t=S(e[0].spatialReference);if(e.length<2||!n(t))return e[0];let{xmin:o,xmax:r,ymin:i,ymax:a}=e[0];for(let n=1;n<e.length;n++){const o=e[n];r=o.xmax+t*n,i=Math.min(i,o.ymin),a=Math.max(a,o.ymax)}return new c({xmin:o,xmax:r,ymin:i,ymax:a,spatialReference:e[0].spatialReference})}function j(e,t,o=null,r=!0){if(e.spatialReference.equals(t))return e;const i=W(e),a=S(e.spatialReference,!0);if(!n(a)||0===i)return b(e,t,o,r);return R(e.clone().normalize().map((e=>b(e,t,o,r))))}function b(n,t,r=null,i=!0){const a=n.spatialReference;if(a.equals(t))return n;const c=u(a,t);if(c&&!o())throw new e(\"rasterprojectionhelper-projectExtent\",\"projection engine is not loaded\");const f=c?s(n,t,r):l(n,t);let[p,h]=v(a,!0);if(f&&i&&a.isWebMercator&&t.isGeographic&&null!=p&&null!=h){const e=.001,o=1e3;if(Math.abs(n.xmin-p)<e&&Math.abs(h-n.xmax)>o&&Math.abs(180-f.xmax)<m){f.xmin=-180;const e=[];e.push(new x(n.xmax,n.ymin,a)),e.push(new x(n.xmax,(n.ymin+n.ymax)/2,a)),e.push(new x(n.xmax,n.ymax,a));const o=e.map((e=>w(e,t,r))).filter((e=>!isNaN(null==e?void 0:e.x))).map((e=>e.x));f.xmax=Math.max.apply(null,o)}if(Math.abs(n.xmax-h)<e&&Math.abs(p-n.xmin)>o&&Math.abs(180+f.xmin)<m){f.xmax=180;const e=[];e.push(new x(n.xmin,n.ymin,a)),e.push(new x(n.xmin,(n.ymin+n.ymax)/2,a)),e.push(new x(n.xmin,n.ymax,a));const o=e.map((e=>w(e,t,r))).filter((e=>!isNaN(null==e?void 0:e.x))).map((e=>e.x));f.xmin=Math.min.apply(null,o)}}[p,h]=v(t,!0);const y=d(t);return y&&null!=p&&null!=h&&(Math.abs(f.xmin-p)<y&&(f.xmin=p),Math.abs(f.xmax-h)<y&&(f.xmax=h)),f}function S(e,n=!1){const t=n?20037508.342787:20037508.342788905;return e.isWebMercator?2*t:e.wkid&&e.isGeographic?360:2*p[e.wkid]||null}function v(e,t=!1){const o=[],r=S(e,t);return n(r)&&(o.push(-r/2),o.push(r/2)),o}function N(e,n,t,o){let r=(e-n)/t;return r-Math.floor(r)!=0?r=Math.floor(r):o&&(r-=1),r}function W(e,t=!1){const o=S(e.spatialReference);if(!n(o))return 0;const r=t?0:-(o/2);return N(e.xmax,r,o,!0)-N(e.xmin,r,o,!1)}function z(e){const t=e.storageInfo.origin.x,o=S(e.spatialReference,!0);if(!n(o))return{originX:t,halfWorldWidth:null,pyramidsInfo:null};const r=o/2,{nativePixelSize:i,storageInfo:a,extent:s}=e,{maximumPyramidLevel:l,blockWidth:c,pyramidScalingFactor:x}=a;let m=i.x;const u=[],f=n(e.transform)&&\"gcs-shift\"===e.transform.type,p=t+r,h=f?o-t:r-t;for(let n=0;n<=l;n++){const e=(s.xmax-t)/m/c,n=e-Math.floor(e)==0?e:Math.ceil(e),r=(o/2-t)/m/c,i=r-Math.floor(r)==0?r:Math.ceil(r),a=Math.floor(p/m/c),l=Math.round(p/m)%c,f=(c-Math.round(h/m)%c)%c;u.push({resolutionX:m,blockWidth:c,datsetColumnCount:n,worldColumnCountFromOrigin:i,leftMargin:l,rightPadding:f,originColumnOffset:a}),m*=x}return{originX:t,halfWorldWidth:r,pyramidsInfo:u,hasGCSSShiftTransform:f}}function G(t,r,i,a=null,s=null,l=!1,c=[h,h]){if(u(t.spatialReference,r.spatialReference)&&!o())throw new e(\"rasterprojectionhelper-projectResolution\",\"projection engine is not loaded\");if(!(t&&r&&i))return null;const{xmin:m,ymin:p,xmax:y,ymax:M}=t,g=t.spatialReference,d=r.spatialReference,R=S(d);l=l||\"gcs-shift\"===(null==s?void 0:s.type);const j={x:c[0]*i.x,y:c[1]*i.y},b={cols:Math.ceil((y-m)/j.x-.1)+1,rows:Math.ceil((M-p)/j.y-.1)+1},v=j.x,N=j.y,W=[];let z,G=!1;for(let e=0;e<b.cols;e++){const t=[];for(let o=0;o<b.rows;o++){let i=w(new x({x:m+v*e,y:M-N*o,spatialReference:g}),d,a);s&&(i=s.inverseTransform(i)),t.push(i),e>0&&l&&i&&z[o]&&n(R)&&i.x<z[o].x&&(i.x+=R),i?(W.push((i.x-r.xmin)/(r.xmax-r.xmin)),W.push((r.ymax-i.y)/(r.ymax-r.ymin))):(W.push(NaN),W.push(NaN),G=!0)}z=t}const P=f(W,b),C=new Float32Array((b.cols-1)*(b.rows-1)*2*6),L=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),k=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let e=0;e<b.cols-1;e++){for(let n=0;n<b.rows-1;n++){let t=e*b.rows*2+2*n;const o=W[t],r=W[t+1],i=W[t+2],a=W[t+3];t+=2*b.rows;const s=W[t],l=W[t+1],c=W[t+2],x=W[t+3];let m=0,u=12*(n*(b.cols-1)+e);for(let e=0;e<3;e++)C[u++]=L[m++]*o+L[m++]*i+L[m++]*c;m=0;for(let e=0;e<3;e++)C[u++]=L[m++]*r+L[m++]*a+L[m++]*x;m=0;for(let e=0;e<3;e++)C[u++]=k[m++]*o+k[m++]*s+k[m++]*c;m=0;for(let e=0;e<3;e++)C[u++]=k[m++]*r+k[m++]*l+k[m++]*x}if(G)for(let e=0;e<C.length;e++)isNaN(C[e])&&(C[e]=-1)}return{offsets:W,error:P,coefficients:C,spacing:c,size:[b.cols-1,b.rows-1]}}function P(e){const n=e.clone().normalize();return 1===n.length?n[0]:R(n)}function C(e,t,o){const{storageInfo:r,pixelSize:i}=t;let a,s=!1;const{pyramidResolutions:l}=r;if(n(l)&&l.length){const n=(e.x+e.y)/2,r=l[l.length-1],c=(r.x+r.y)/2,m=(i.x+i.y)/2;if(n<=m)a=0;else if(n>=c)a=l.length,s=n/c>8;else{let e,t=m;for(let r=1;r<=l.length;r++){if(e=(l[r-1].x+l[r-1].y)/2,n<=e){n===e?a=r:\"down\"===o?(a=r-1,s=n/t>8):a=\"up\"===o||n-t>e-n||n/t>2?r:r-1;break}t=e}}const u=0===a?i:l[a-1];return{pyramidLevel:a,pyramidResolution:new x({x:u.x,y:u.y,spatialReference:t.spatialReference}),excessiveReading:s}}const c=Math.log(e.x/i.x)/Math.LN2,m=Math.log(e.y/i.y)/Math.LN2,u=t.storageInfo.maximumPyramidLevel||0;a=\"down\"===o?Math.floor(Math.min(c,m)):\"up\"===o?Math.ceil(Math.max(c,m)):Math.round((c+m)/2),a<0?a=0:a>u&&(s=a>u+3,a=u);const f=2**a;return{pyramidLevel:a,pyramidResolution:new x({x:f*t.nativePixelSize.x,y:f*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:s}}function L(e,n,o=512,r=!0){const{extent:i,spatialReference:a,pixelSize:s}=e,l=g(new x({x:s.x,y:s.y,spatialReference:a}),n,i);if(null==l)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const c=(l.x+l.y)/2,m=t(n),u=c*m*96*39.37,f=n.isGeographic?256/o*295828763.7958547:256/o*591657527.591555;let p=!1;const h=j(i,n);r&&(n.isGeographic||n.isWebMercator)&&(p=h.xmin*h.xmax<0);let y,M=u;const d=1.001;if(p){M=f;const e=n.isGeographic?1341104507446289e-21:.29858214164761665,t=e*(96*m*39.37),o=n.isGeographic?4326:3857;y=g(new x({x:e,y:e,spatialReference:{wkid:o}}),a,h),y.x*=M/t,y.y*=M/t}else{y={x:s.x,y:s.y};const n=Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2);let t=0;for(;M<f*(d/2)&&t<n;)t++,M*=2,y.x*=2,y.y*=2;Math.max(M,f)/Math.min(M,f)<=d&&(M=f)}const w=[M],R=[{x:y.x,y:y.y}],b=70.5310735,S=Math.min(b,u)/d;for(;M>=S;)M/=2,y.x/=2,y.y/=2,w.push(M),R.push({x:y.x,y:y.y});return{projectedPixelSize:l,scales:w,srcResolutions:R,isCustomTilingScheme:!p}}export{L as computeProjectedScales,h as defaultGridSpacing,M as getDefaultDatumTransformationForDataset,G as getProjectionOffsetGrid,z as getRasterDatasetAlignmentInfo,W as getWorldWrapCount,y as load,j as projectExtent,w as projectPoint,g as projectResolution,P as snapExtent,C as snapPyramid};\n"],"sourceRoot":""}