(this["webpackJsonpjsapi-create-react-app"]=this["webpackJsonpjsapi-create-react-app"]||[]).push([[21],{1178:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n(2),a=n(23),s=n(1),l=(n(8),n(9),n(7),n(4)),o=n(564),c=n(589),u=n(427),f=n(124),p=n(11),h=n(835),m=n(703);const d=e=>{let t=class extends e{constructor(){super(...arguments),this._rasterFieldPrefix="Raster.",this.layer=null,this.view=null,this.fullExtent=null,this.tileInfo=null,this.datumTransformation=null}get hasTilingEffects(){return this.layer.renderer&&"dynamicRangeAdjustment"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment}async fetchPopupFeatures(e,t){const{layer:n}=this;if(!e)return Promise.reject(new p.a("imageryTileLayerView:fetchPopupFeatures","Nothing to fetch without area",{layer:n}));const{popupEnabled:i}=n,a=Object(m.a)(n,t);if(!i||!Object(r.j)(a))throw new p.a("imageryTileLayerView:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:i,popupTemplate:a});const s=[],{value:l}=await n.identify(e);let o="";if(l&&l.length){var c,u;o="imagery-tile"===n.type&&n.hasStandardTime()&&null!=l[0]?l.map((e=>n.getStandardTimeValue(e))).join(", "):l.join(", ");const e={ObjectId:0},t="Raster.ServicePixelValue";e[t]=this._formatAttributeValue(o,t);const i=null==(c=n.rasterInfo)||null==(u=c.attributeTable)?void 0:u.features;if(i&&i.length>0){const t=i.filter((e=>{const t=e.attributes.value||e.attributes.Value||e.attributes.VALUE;return String(t)===o}));if(t.length>0){const n=t[0];if(n)for(const t in n.attributes)if(n.attributes.hasOwnProperty(t)){const i=this._rasterFieldPrefix+t;e[i]=this._formatAttributeValue(n.attributes[t],i)}}}const r=new f.a(this.fullExtent.clone(),null,e);r.layer=n,r.sourceLayer=r.layer,s.push(r)}return s}updateFullExtent(){const e=this.layer.tileInfo;let t;e&&e.spatialReference||(t=new p.a("layerview:tiling-information-missing","The layer doesn't provide tiling information",{layer:this.layer}));const n=Object(h.a)(this.layer.fullExtent,this.view.spatialReference,!1),i=Object(h.f)(this.layer.fullExtent,this.view.spatialReference,n);return null==i&&(t=new p.a("layerview:projection-not-supported","The layer extent cannot be projected to the view's spatial reference",{layer:this.layer})),this._set("fullExtent",i),this.datumTransformation||(this.datumTransformation=Object(h.a)(this.layer.fullExtent,this.view.spatialReference,!0)),t?Promise.reject(t):Promise.resolve()}_formatAttributeValue(e,t){if("string"==typeof e){const n=this.layer.popupTemplate&&this.layer.popupTemplate.fieldInfos,i=this._getFieldInfo(n,t),r=i&&i.format;if(r){let t,n;return e.trim().indexOf(",")>-1?(t=",",n=t+" ",this._formatDelimitedString(e,t,n,r)):e.trim().indexOf(" ")>-1?(t=n=" ",this._formatDelimitedString(e,t,n,r)):this._formatNumberFromString(e,r)}}return e}_getFieldInfo(e,t){if(!e||!e.length||!t)return;const n=t.toLowerCase();let i;return e.some((e=>!(!e.fieldName||e.fieldName.toLowerCase()!==n&&e.fieldName.toLowerCase()!==n.replace(/ /g,"_"))&&(i=e,!0))),i}_formatDelimitedString(e,t,n,i){return e&&t&&n&&i?e.trim().split(t).map((e=>this._formatNumberFromString(e,i))).join(n):e}_formatNumberFromString(e,t){if(!e||!t)return e;const n=Number(e);return isNaN(n)?e:t.format(n)}};return Object(i.a)([Object(s.b)()],t.prototype,"layer",void 0),Object(i.a)([Object(s.b)()],t.prototype,"view",void 0),Object(i.a)([Object(s.b)()],t.prototype,"fullExtent",void 0),Object(i.a)([Object(s.b)()],t.prototype,"tileInfo",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],t.prototype,"hasTilingEffects",null),t=Object(i.a)([Object(l.a)("esri.views.layers.ImageryTileLayerView")],t),t};var y=n(562),b=n(445),x=n(810),g=n(626);let j=class extends(d(Object(b.a)(Object(c.a)(Object(o.a)(y.a))))){constructor(){super(...arguments),this.type="imagery-tile-3d",this.isAlignedMapTile=!0}initialize(){this.layer.increaseRasterJobHandlerUsage();const e=this.updateFullExtent();this.addResolvingPromise(e);const t=Object(a.l)(this.view,"basemapTerrain.tilingSchemeLocked").then((()=>{const e=this.view.basemapTerrain.tilingScheme,{tileInfo:t}=this.layer,n=["png","png24","png32","jpg","mixed"].indexOf(t.format)>-1&&e.compatibleWith(t);this.isAlignedMapTile=n;const i=n?t:e.toTileInfo();this._set("tileInfo",i),this.updatingHandles.add(this,"layer.renderer",(()=>this.refresh())),this.updatingHandles.add(this,"layer.interpolation",(()=>this.refresh())),this.updatingHandles.add(this,"layer.bandIds",(()=>this.refresh())),this.updatingHandles.add(this,"layer.multidimensionalDefinition",(()=>this.refresh()))}));this.addResolvingPromise(t)}destroy(){this.layer.decreaseRasterJobHandlerUsage(),this.view=null}get _blankTile(){const e=document.createElement("canvas"),t=e.getContext("2d"),[n,i]=this.tileInfo.size;return e.width=n,e.height=i,t.clearRect(0,0,n,i),t.getImageData(0,0,n,i)}get imageFormatIsOpaque(){return"jpg"===this.layer.tileInfo.format}get hasMixedImageFormats(){return"mixed"===this.layer.tileInfo.format}get dataLevelRange(){const e=this.tileInfo.lods,t=this.layer.tileInfo.lods,n=e[0].scale,i=t[t.length-1].scale;return this.levelRangeFromScaleRange(n,i)}async fetchTile(e,t,n,i){const a=this.tileInfo,s=this._canSymbolizeInWebGL(),l={tileInfo:a,requestRawData:s,signal:Object(r.s)(i.signal),requestAsImageElement:this.isAlignedMapTile},o=await this.layer.fetchTile(e,t,n,l);if(o instanceof HTMLImageElement)return o;let c=o&&o.pixelBlock;if(!c)return this._blankTile;if(!s&&(c=await this.layer.applyRenderer(o),null==c))return this._blankTile;const f=new u.a([e,t,n],c,a.size[0],a.size[1]);return s?(f.symbolizerRenderer=this.layer.symbolizer.rendererJSON,f.symbolizerParameters=this.layer.symbolizer.generateWebGLParameters(this._getSymbolizerOptions(e)),f.transformGrid=o.transformGrid):f.isRendereredSource=!0,f.interpolation=this.layer.interpolation,f.bandIds=this.layer.bandIds,f}_getSymbolizerOptions(e){const t=this.tileInfo.lodAt(e).resolution;return{pixelBlock:null,isGCS:this.view.spatialReference.isGeographic,resolution:{x:t,y:t},bandIds:this.layer.bandIds}}ensureSymbolizerParameters(e){this._canSymbolizeInWebGL()&&JSON.stringify(e.symbolizerRenderer)!==JSON.stringify(this.layer.symbolizer.rendererJSON)&&(e.symbolizerParameters=this.layer.symbolizer.generateWebGLParameters(this._getSymbolizerOptions(e.lij[0])))}createFetchPopupFeaturesQueryGeometry(e,t){return Object(x.a)(e,t,this.view)}refresh(){this.emit("data-changed")}async doRefresh(e){this.suspended||this.emit("data-changed")}_canSymbolizeInWebGL(){return Object(g.a)().supportsTextureFloat&&this.layer.symbolizer.canRenderInWebGL}};Object(i.a)([Object(s.b)({readOnly:!0})],j.prototype,"_blankTile",null),Object(i.a)([Object(s.b)({readOnly:!0})],j.prototype,"imageFormatIsOpaque",null),Object(i.a)([Object(s.b)({readOnly:!0})],j.prototype,"hasMixedImageFormats",null),Object(i.a)([Object(s.b)({readOnly:!0})],j.prototype,"dataLevelRange",null),j=Object(i.a)([Object(l.a)("esri.views.3d.layers.ImageryTileLayerView3D")],j);var O=j;t.default=O},703:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}));var i=n(2),r=n(89);async function a(e,t=e.popupTemplate){if(!Object(i.j)(t))return[];const n=await t.getRequiredFields(e.fieldsIndex),{lastEditInfoEnabled:a}=t,{objectIdField:s,typeIdField:l,globalIdField:o,relationships:c}=e;if(n.includes("*"))return["*"];const u=a?await Object(r.m)(e):[],f=Object(r.i)(e.fieldsIndex,[...n,...u]);return l&&f.push(l),f&&s&&e.fieldsIndex.has(s)&&-1===f.indexOf(s)&&f.push(s),f&&o&&e.fieldsIndex.has(o)&&-1===f.indexOf(o)&&f.push(o),c&&c.forEach((t=>{const{keyField:n}=t;f&&n&&e.fieldsIndex.has(n)&&-1===f.indexOf(n)&&f.push(n)})),f}function s(e,t){return e.popupTemplate?e.popupTemplate:Object(i.j)(t)&&t.defaultPopupTemplateEnabled&&Object(i.j)(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}},760:function(e,t,n){"use strict";function i(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function r(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){let t=0,n=0;for(let i=0;i<e.length;i++){const r=e[i].size;"number"==typeof r&&(t+=r,n++)}return t/n}(e.stops):t}function a(e,t){if(!t)return e;const n=t.filter((e=>"size"===e.type)).map((t=>{const{maxSize:n,minSize:i}=t;return(r(n,e)+r(i,e))/2}));let i=0;const a=n.length;if(0===a)return e;for(let r=0;r<a;r++)i+=n[r];const s=Math.floor(i/a);return Math.max(s,e)}function s(e){const t=e&&e.renderer,n="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return n;const r="visualVariables"in t?a(n,t.visualVariables):n;if("simple"===t.type)return i(r,t.symbol);if("unique-value"===t.type){let e=r;return t.uniqueValueInfos.forEach((t=>{e=i(e,t.symbol)})),e}if("class-breaks"===t.type){let e=r;return t.classBreakInfos.forEach((t=>{e=i(e,t.symbol)})),e}return t.type,r}n.d(t,"a",(function(){return s}))},810:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(113);var i=n(2),r=n(54),a=(n(760),n(50));function s(e,t,n,s=new a.a){let l;if("2d"===n.type)l=t*n.resolution;else if("3d"===n.type){const a=n.overlayPixelSizeInMapUnits(e),s=n.basemapSpatialReference;l=Object(i.j)(s)&&!s.equals(n.spatialReference)?Object(r.f)(s)/Object(r.f)(n.spatialReference):t*a}const o=e.x-l,c=e.y-l,u=e.x+l,f=e.y+l,{spatialReference:p}=n;return s.xmin=Math.min(o,u),s.ymin=Math.min(c,f),s.xmax=Math.max(o,u),s.ymax=Math.max(c,f),s.spatialReference=p,s}new a.a},835:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return I})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return M})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return d})),n.d(t,"i",(function(){return T})),n.d(t,"j",(function(){return S}));n(113);var i=n(11),r=n(2),a=n(54),s=n(36),l=n(46),o=n(50),c=n(41);const u=5e-4,f=function(e,t){const n=(e.isWGS84||e.isWebMercator)&&(t.isWGS84||t.isWebMercator);return!(e.equals(t)||n)},p={3395:20037508.342789244,3410:17334193.943686873,3832:3339584.723798206,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,8858:7396237.374497803,8859:2465412.4581659334,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53025:7276828.3848298555,53031:10384677.558821043,53034:20015086.79602057,53036:7389443.187332862,53037:2463147.729110953,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54025:7311399.09166516,54031:10396310.810074743,54034:20037508.342789244,54050:808820.9223376509,54053:1920897.3915568967,54079:20037508.342789244,54080:20037508.342789244,54099:13524439.768288724,54100:20037508.342789244,54101:20037508.342789244,102038:4297258.582585486,102299:5013965.117483125};async function h(){if(Object(s.h)()||!Object(s.i)())return null;await Object(s.j)()}function m(e,t,n){if(!f(e.spatialReference,t))return null;if(!Object(s.h)())throw new i.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");return n?Object(s.f)(t,e.spatialReference,e):Object(s.f)(e.spatialReference,t,e)}function d(e,t,n,r=null){if(e.spatialReference.equals(t))return e;const a=f(e.spatialReference,t);if(a&&!Object(s.h)())throw new i.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");const c=n.center,u=new o.a({xmin:c.x-e.x/2,xmax:c.x+e.x/2,ymin:c.y-e.y/2,ymax:c.y+e.y/2,spatialReference:e.spatialReference}),p=a?Object(s.n)(u,t,r):Object(l.d)(u,t);return null==p?null:{x:p.xmax-p.xmin,y:p.ymax-p.ymin}}function y(e,t=.01){return Object(a.f)(e)?t/Object(a.f)(e):0}function b(e,t,n=null,r=!0){const a=e.spatialReference;if(a.equals(t))return e;const o=f(a,t);if(o&&!Object(s.h)())throw new i.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");const c=o?Object(s.n)(e,t,n):Object(l.d)(e,t);if(c&&r&&t.isGeographic){const[t,n]=w(a,!0),i=y(a);i&&null!=t&&null!=n&&(Math.abs(e.x-t)<i&&Math.abs(180-c.x)<u?c.x-=360:Math.abs(e.x-n)<i&&Math.abs(180+c.x)<u&&(c.x+=360))}return c}function x(e){const t=O(e[0].spatialReference);if(e.length<2||!Object(r.j)(t))return e[0];let{xmin:n,xmax:i,ymin:a,ymax:s}=e[0];for(let r=1;r<e.length;r++){const n=e[r];i=n.xmax+t*r,a=Math.min(a,n.ymin),s=Math.max(s,n.ymax)}return new o.a({xmin:n,xmax:i,ymin:a,ymax:s,spatialReference:e[0].spatialReference})}function g(e,t,n=null,i=!0){if(e.spatialReference.equals(t))return e;const a=M(e),s=O(e.spatialReference,!0);return Object(r.j)(s)&&0!==a?x(e.clone().normalize().map((e=>j(e,t,n,i)))):j(e,t,n,i)}function j(e,t,n=null,r=!0){const a=e.spatialReference;if(a.equals(t))return e;const o=f(a,t);if(o&&!Object(s.h)())throw new i.a("rasterprojectionhelper-projectExtent","projection engine is not loaded");const p=o?Object(s.n)(e,t,n):Object(l.d)(e,t);let[h,m]=w(a,!0);if(p&&r&&a.isWebMercator&&t.isGeographic&&null!=h&&null!=m){const i=.001,r=1e3;if(Math.abs(e.xmin-h)<i&&Math.abs(m-e.xmax)>r&&Math.abs(180-p.xmax)<u){p.xmin=-180;const i=[];i.push(new c.a(e.xmax,e.ymin,a)),i.push(new c.a(e.xmax,(e.ymin+e.ymax)/2,a)),i.push(new c.a(e.xmax,e.ymax,a));const r=i.map((e=>b(e,t,n))).filter((e=>!isNaN(null==e?void 0:e.x))).map((e=>e.x));p.xmax=Math.max.apply(null,r)}if(Math.abs(e.xmax-m)<i&&Math.abs(h-e.xmin)>r&&Math.abs(180+p.xmin)<u){p.xmax=180;const i=[];i.push(new c.a(e.xmin,e.ymin,a)),i.push(new c.a(e.xmin,(e.ymin+e.ymax)/2,a)),i.push(new c.a(e.xmin,e.ymax,a));const r=i.map((e=>b(e,t,n))).filter((e=>!isNaN(null==e?void 0:e.x))).map((e=>e.x));p.xmin=Math.min.apply(null,r)}}[h,m]=w(t,!0);const d=y(t);return d&&null!=h&&null!=m&&(Math.abs(p.xmin-h)<d&&(p.xmin=h),Math.abs(p.xmax-m)<d&&(p.xmax=m)),p}function O(e,t=!1){const n=t?20037508.342787:20037508.342788905;return e.isWebMercator?2*n:e.wkid&&e.isGeographic?360:2*p[e.wkid]||null}function w(e,t=!1){const n=[],i=O(e,t);return Object(r.j)(i)&&(n.push(-i/2),n.push(i/2)),n}function R(e,t,n,i){let r=(e-t)/n;return r-Math.floor(r)!=0?r=Math.floor(r):i&&(r-=1),r}function M(e,t=!1){const n=O(e.spatialReference);if(!Object(r.j)(n))return 0;const i=t?0:-n/2;return R(e.xmax,i,n,!0)-R(e.xmin,i,n,!1)}function v(e){const t=e.storageInfo.origin.x,n=O(e.spatialReference,!0);if(!Object(r.j)(n))return{originX:t,halfWorldWidth:null,pyramidsInfo:null};const i=n/2,{nativePixelSize:a,storageInfo:s,extent:l}=e,{maximumPyramidLevel:o,blockWidth:c,pyramidScalingFactor:u}=s;let f=a.x;const p=[],h=Object(r.j)(e.transform)&&"gcs-shift"===e.transform.type,m=t+i,d=h?n-t:i-t;for(let r=0;r<=o;r++){const e=(l.xmax-t)/f/c,i=e-Math.floor(e)==0?e:Math.ceil(e),r=(n/2-t)/f/c,a=r-Math.floor(r)==0?r:Math.ceil(r),s=Math.floor(m/f/c),o=Math.round(m/f)%c,h=(c-Math.round(d/f)%c)%c;p.push({resolutionX:f,blockWidth:c,datsetColumnCount:i,worldColumnCountFromOrigin:a,leftMargin:o,rightPadding:h,originColumnOffset:s}),f*=u}return{originX:t,halfWorldWidth:i,pyramidsInfo:p,hasGCSSShiftTransform:h}}function I(e,t,n,a=null,l=null,o=!1,u=[32,32]){if(f(e.spatialReference,t.spatialReference)&&!Object(s.h)())throw new i.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");if(!(e&&t&&n))return null;const{xmin:p,ymin:h,xmax:m,ymax:d}=e,y=e.spatialReference,x=t.spatialReference,g=O(x);o=o||"gcs-shift"===(null==l?void 0:l.type);const j={x:u[0]*n.x,y:u[1]*n.y},w={cols:Math.ceil((m-p)/j.x-.1)+1,rows:Math.ceil((d-h)/j.y-.1)+1},R=j.x,M=j.y,v=[];let I,T=!1;for(let i=0;i<w.cols;i++){const e=[];for(let n=0;n<w.rows;n++){let s=b(new c.a({x:p+R*i,y:d-M*n,spatialReference:y}),x,a);l&&(s=l.inverseTransform(s)),e.push(s),i>0&&o&&s&&I[n]&&Object(r.j)(g)&&s.x<I[n].x&&(s.x+=g),s?(v.push((s.x-t.xmin)/(t.xmax-t.xmin)),v.push((t.ymax-s.y)/(t.ymax-t.ymin))):(v.push(NaN),v.push(NaN),T=!0)}I=e}const S=function(e,t){const n=(e[0]+e[4]+e[4*t.cols]+e[4*t.cols+4])/4,i=(e[1]+e[5]+e[4*t.rows+1]+e[4*t.rows+5])/4;return[Math.abs(n-e[2*t.rows+2]),Math.abs(i-e[2*t.rows+3])]}(v,w),z=new Float32Array((w.cols-1)*(w.rows-1)*2*6),F=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),P=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let i=0;i<w.cols-1;i++){for(let e=0;e<w.rows-1;e++){let t=i*w.rows*2+2*e;const n=v[t],r=v[t+1],a=v[t+2],s=v[t+3];t+=2*w.rows;const l=v[t],o=v[t+1],c=v[t+2],u=v[t+3];let f=0,p=12*(e*(w.cols-1)+i);for(let e=0;e<3;e++)z[p++]=F[f++]*n+F[f++]*a+F[f++]*c;f=0;for(let e=0;e<3;e++)z[p++]=F[f++]*r+F[f++]*s+F[f++]*u;f=0;for(let e=0;e<3;e++)z[p++]=P[f++]*n+P[f++]*l+P[f++]*c;f=0;for(let e=0;e<3;e++)z[p++]=P[f++]*r+P[f++]*o+P[f++]*u}if(T)for(let e=0;e<z.length;e++)isNaN(z[e])&&(z[e]=-1)}return{offsets:v,error:S,coefficients:z,spacing:u,size:[w.cols-1,w.rows-1]}}function T(e){const t=e.clone().normalize();return 1===t.length?t[0]:x(t)}function S(e,t,n){const{storageInfo:i,pixelSize:a}=t;let s,l=!1;const{pyramidResolutions:o}=i;if(Object(r.j)(o)&&o.length){const i=(e.x+e.y)/2,r=o[o.length-1],u=(r.x+r.y)/2,f=(a.x+a.y)/2;if(i<=f)s=0;else if(i>=u)s=o.length,l=i/u>8;else{let e,t=f;for(let r=1;r<=o.length;r++){if(e=(o[r-1].x+o[r-1].y)/2,i<=e){i===e?s=r:"down"===n?(s=r-1,l=i/t>8):s="up"===n||i-t>e-i||i/t>2?r:r-1;break}t=e}}const p=0===s?a:o[s-1];return{pyramidLevel:s,pyramidResolution:new c.a({x:p.x,y:p.y,spatialReference:t.spatialReference}),excessiveReading:l}}const u=Math.log(e.x/a.x)/Math.LN2,f=Math.log(e.y/a.y)/Math.LN2,p=t.storageInfo.maximumPyramidLevel||0;s="down"===n?Math.floor(Math.min(u,f)):"up"===n?Math.ceil(Math.max(u,f)):Math.round((u+f)/2),s<0?s=0:s>p&&(l=s>p+3,s=p);const h=2**s;return{pyramidLevel:s,pyramidResolution:new c.a({x:h*t.nativePixelSize.x,y:h*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:l}}}}]);
//# sourceMappingURL=21.323303e6.chunk.js.map